(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function S1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tg={exports:{}},pa={},ng={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=Symbol.for("react.element"),w1=Symbol.for("react.portal"),j1=Symbol.for("react.fragment"),C1=Symbol.for("react.strict_mode"),k1=Symbol.for("react.profiler"),b1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),E1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),D1=Symbol.for("react.memo"),z1=Symbol.for("react.lazy"),Wf=Symbol.iterator;function R1(e){return e===null||typeof e!="object"?null:(e=Wf&&e[Wf]||e["@@iterator"],typeof e=="function"?e:null)}var rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ig=Object.assign,sg={};function fs(e,t,n){this.props=e,this.context=t,this.refs=sg,this.updater=n||rg}fs.prototype.isReactComponent={};fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function og(){}og.prototype=fs.prototype;function qd(e,t,n){this.props=e,this.context=t,this.refs=sg,this.updater=n||rg}var Zd=qd.prototype=new og;Zd.constructor=qd;ig(Zd,fs.prototype);Zd.isPureReactComponent=!0;var Uf=Array.isArray,lg=Object.prototype.hasOwnProperty,eu={current:null},ag={key:!0,ref:!0,__self:!0,__source:!0};function cg(e,t,n){var r,i={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)lg.call(t,r)&&!ag.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];i.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:No,type:e,key:o,ref:l,props:i,_owner:eu.current}}function N1(e,t){return{$$typeof:No,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tu(e){return typeof e=="object"&&e!==null&&e.$$typeof===No}function M1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hf=/\/+/g;function Ya(e,t){return typeof e=="object"&&e!==null&&e.key!=null?M1(""+e.key):t.toString(36)}function hl(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case No:case w1:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Ya(l,0):r,Uf(i)?(n="",e!=null&&(n=e.replace(Hf,"$&/")+"/"),hl(i,t,n,"",function(u){return u})):i!=null&&(tu(i)&&(i=N1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Hf,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Uf(e))for(var c=0;c<e.length;c++){o=e[c];var d=r+Ya(o,c);l+=hl(o,t,n,d,i)}else if(d=R1(e),typeof d=="function")for(e=d.call(e),c=0;!(o=e.next()).done;)o=o.value,d=r+Ya(o,c++),l+=hl(o,t,n,d,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Go(e,t,n){if(e==null)return e;var r=[],i=0;return hl(e,r,"","",function(o){return t.call(n,o,i++)}),r}function A1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bt={current:null},pl={transition:null},P1={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:pl,ReactCurrentOwner:eu};function dg(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Go,forEach:function(e,t,n){Go(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Go(e,function(){t++}),t},toArray:function(e){return Go(e,function(t){return t})||[]},only:function(e){if(!tu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=fs;ve.Fragment=j1;ve.Profiler=k1;ve.PureComponent=qd;ve.StrictMode=C1;ve.Suspense=T1;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P1;ve.act=dg;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ig({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=eu.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)lg.call(t,d)&&!ag.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:No,type:e.type,key:i,ref:o,props:r,_owner:l}};ve.createContext=function(e){return e={$$typeof:I1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:b1,_context:e},e.Consumer=e};ve.createElement=cg;ve.createFactory=function(e){var t=cg.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:E1,render:e}};ve.isValidElement=tu;ve.lazy=function(e){return{$$typeof:z1,_payload:{_status:-1,_result:e},_init:A1}};ve.memo=function(e,t){return{$$typeof:D1,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=pl.transition;pl.transition={};try{e()}finally{pl.transition=t}};ve.unstable_act=dg;ve.useCallback=function(e,t){return Bt.current.useCallback(e,t)};ve.useContext=function(e){return Bt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Bt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Bt.current.useEffect(e,t)};ve.useId=function(){return Bt.current.useId()};ve.useImperativeHandle=function(e,t,n){return Bt.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return Bt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Bt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Bt.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return Bt.current.useReducer(e,t,n)};ve.useRef=function(e){return Bt.current.useRef(e)};ve.useState=function(e){return Bt.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return Bt.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return Bt.current.useTransition()};ve.version="18.3.1";ng.exports=ve;var C=ng.exports;const F1=S1(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=C,L1=Symbol.for("react.element"),B1=Symbol.for("react.fragment"),$1=Object.prototype.hasOwnProperty,W1=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function ug(e,t,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)$1.call(t,r)&&!U1.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:L1,type:e,key:o,ref:l,props:i,_owner:W1.current}}pa.Fragment=B1;pa.jsx=ug;pa.jsxs=ug;tg.exports=pa;var s=tg.exports,Fc={},fg={exports:{}},nn={},hg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,ee){var T=L.length;L.push(ee);e:for(;0<T;){var q=T-1>>>1,ue=L[q];if(0<i(ue,ee))L[q]=ee,L[T]=ue,T=q;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var ee=L[0],T=L.pop();if(T!==ee){L[0]=T;e:for(var q=0,ue=L.length,he=ue>>>1;q<he;){var Re=2*(q+1)-1,He=L[Re],rt=Re+1,Ie=L[rt];if(0>i(He,T))rt<ue&&0>i(Ie,He)?(L[q]=Ie,L[rt]=T,q=rt):(L[q]=He,L[Re]=T,q=Re);else if(rt<ue&&0>i(Ie,T))L[q]=Ie,L[rt]=T,q=rt;else break e}}return ee}function i(L,ee){var T=L.sortIndex-ee.sortIndex;return T!==0?T:L.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],u=[],h=1,p=null,f=3,S=!1,y=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(L){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=L)r(u),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(u)}}function I(L){if(w=!1,x(L),!y)if(n(d)!==null)y=!0,A(N);else{var ee=n(u);ee!==null&&te(I,ee.startTime-L)}}function N(L,ee){y=!1,w&&(w=!1,m(W),W=-1),S=!0;var T=f;try{for(x(ee),p=n(d);p!==null&&(!(p.expirationTime>ee)||L&&!ie());){var q=p.callback;if(typeof q=="function"){p.callback=null,f=p.priorityLevel;var ue=q(p.expirationTime<=ee);ee=e.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(d)&&r(d),x(ee)}else r(d);p=n(d)}if(p!==null)var he=!0;else{var Re=n(u);Re!==null&&te(I,Re.startTime-ee),he=!1}return he}finally{p=null,f=T,S=!1}}var F=!1,$=null,W=-1,D=5,K=-1;function ie(){return!(e.unstable_now()-K<D)}function P(){if($!==null){var L=e.unstable_now();K=L;var ee=!0;try{ee=$(!0,L)}finally{ee?X():(F=!1,$=null)}}else F=!1}var X;if(typeof g=="function")X=function(){g(P)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,J=ce.port2;ce.port1.onmessage=P,X=function(){J.postMessage(null)}}else X=function(){j(P,0)};function A(L){$=L,F||(F=!0,X())}function te(L,ee){W=j(function(){L(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){y||S||(y=!0,A(N))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(L){switch(f){case 1:case 2:case 3:var ee=3;break;default:ee=f}var T=f;f=ee;try{return L()}finally{f=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,ee){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var T=f;f=L;try{return ee()}finally{f=T}},e.unstable_scheduleCallback=function(L,ee,T){var q=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?q+T:q):T=q,L){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=T+ue,L={id:h++,callback:ee,priorityLevel:L,startTime:T,expirationTime:ue,sortIndex:-1},T>q?(L.sortIndex=T,t(u,L),n(d)===null&&L===n(u)&&(w?(m(W),W=-1):w=!0,te(I,T-q))):(L.sortIndex=ue,t(d,L),y||S||(y=!0,A(N))),L},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(L){var ee=f;return function(){var T=f;f=ee;try{return L.apply(this,arguments)}finally{f=T}}}})(pg);hg.exports=pg;var H1=hg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=C,tn=H1;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gg=new Set,ro={};function mi(e,t){qi(e,t),qi(e+"Capture",t)}function qi(e,t){for(ro[e]=t,e=0;e<t.length;e++)gg.add(t[e])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oc=Object.prototype.hasOwnProperty,K1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vf={},Kf={};function G1(e){return Oc.call(Kf,e)?!0:Oc.call(Vf,e)?!1:K1.test(e)?Kf[e]=!0:(Vf[e]=!0,!1)}function Y1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q1(e,t,n,r){if(t===null||typeof t>"u"||Y1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,n,r,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ct[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ct[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ct[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ct[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ct[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ct[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ct[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ct[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ct[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var nu=/[\-:]([a-z])/g;function ru(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nu,ru);Ct[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nu,ru);Ct[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nu,ru);Ct[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ct[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ct[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function iu(e,t,n,r){var i=Ct.hasOwnProperty(t)?Ct[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q1(t,n,i,r)&&(n=null),r||i===null?G1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ar=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yo=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Di=Symbol.for("react.fragment"),su=Symbol.for("react.strict_mode"),Lc=Symbol.for("react.profiler"),mg=Symbol.for("react.provider"),yg=Symbol.for("react.context"),ou=Symbol.for("react.forward_ref"),Bc=Symbol.for("react.suspense"),$c=Symbol.for("react.suspense_list"),lu=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),xg=Symbol.for("react.offscreen"),Gf=Symbol.iterator;function bs(e){return e===null||typeof e!="object"?null:(e=Gf&&e[Gf]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,Qa;function Os(e){if(Qa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qa=t&&t[1]||""}return`
`+Qa+e}var Xa=!1;function Ja(e,t){if(!e||Xa)return"";Xa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,c=o.length-1;1<=l&&0<=c&&i[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==o[c]){var d=`
`+i[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=c);break}}}finally{Xa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Os(e):""}function X1(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=Ja(e.type,!1),e;case 11:return e=Ja(e.type.render,!1),e;case 1:return e=Ja(e.type,!0),e;default:return""}}function Wc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Di:return"Fragment";case Ti:return"Portal";case Lc:return"Profiler";case su:return"StrictMode";case Bc:return"Suspense";case $c:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yg:return(e.displayName||"Context")+".Consumer";case mg:return(e._context.displayName||"Context")+".Provider";case ou:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lu:return t=e.displayName||null,t!==null?t:Wc(e.type)||"Memo";case pr:t=e._payload,e=e._init;try{return Wc(e(t))}catch{}}return null}function J1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wc(t);case 8:return t===su?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q1(e){var t=vg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qo(e){e._valueTracker||(e._valueTracker=q1(e))}function _g(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Uc(e,t){var n=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Nr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sg(e,t){t=t.checked,t!=null&&iu(e,"checked",t,!1)}function Hc(e,t){Sg(e,t);var n=Nr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Vc(e,t.type,Nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Vc(e,t,n){(t!=="number"||bl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ls=Array.isArray;function Wi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Nr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Kc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(Ls(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Nr(n)}}function wg(e,t){var n=Nr(t.value),r=Nr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xo,Cg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function io(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z1=["Webkit","ms","Moz","O"];Object.keys(Ws).forEach(function(e){Z1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ws[t]=Ws[e]})});function kg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ws.hasOwnProperty(e)&&Ws[e]?(""+t).trim():t+"px"}function bg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var e0=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yc(e,t){if(t){if(e0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Qc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=null;function au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jc=null,Ui=null,Hi=null;function qf(e){if(e=Po(e)){if(typeof Jc!="function")throw Error(O(280));var t=e.stateNode;t&&(t=va(t),Jc(e.stateNode,e.type,t))}}function Ig(e){Ui?Hi?Hi.push(e):Hi=[e]:Ui=e}function Eg(){if(Ui){var e=Ui,t=Hi;if(Hi=Ui=null,qf(e),t)for(e=0;e<t.length;e++)qf(t[e])}}function Tg(e,t){return e(t)}function Dg(){}var qa=!1;function zg(e,t,n){if(qa)return e(t,n);qa=!0;try{return Tg(e,t,n)}finally{qa=!1,(Ui!==null||Hi!==null)&&(Dg(),Eg())}}function so(e,t){var n=e.stateNode;if(n===null)return null;var r=va(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var qc=!1;if(tr)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{qc=!1}function t0(e,t,n,r,i,o,l,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Us=!1,Il=null,El=!1,Zc=null,n0={onError:function(e){Us=!0,Il=e}};function r0(e,t,n,r,i,o,l,c,d){Us=!1,Il=null,t0.apply(n0,arguments)}function i0(e,t,n,r,i,o,l,c,d){if(r0.apply(this,arguments),Us){if(Us){var u=Il;Us=!1,Il=null}else throw Error(O(198));El||(El=!0,Zc=u)}}function yi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Rg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zf(e){if(yi(e)!==e)throw Error(O(188))}function s0(e){var t=e.alternate;if(!t){if(t=yi(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Zf(i),e;if(o===r)return Zf(i),t;o=o.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,c=i.child;c;){if(c===n){l=!0,n=i,r=o;break}if(c===r){l=!0,r=i,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,r=i;break}if(c===r){l=!0,r=o,n=i;break}c=c.sibling}if(!l)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function Ng(e){return e=s0(e),e!==null?Mg(e):null}function Mg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mg(e);if(t!==null)return t;e=e.sibling}return null}var Ag=tn.unstable_scheduleCallback,eh=tn.unstable_cancelCallback,o0=tn.unstable_shouldYield,l0=tn.unstable_requestPaint,nt=tn.unstable_now,a0=tn.unstable_getCurrentPriorityLevel,cu=tn.unstable_ImmediatePriority,Pg=tn.unstable_UserBlockingPriority,Tl=tn.unstable_NormalPriority,c0=tn.unstable_LowPriority,Fg=tn.unstable_IdlePriority,ga=null,Fn=null;function d0(e){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(ga,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:h0,u0=Math.log,f0=Math.LN2;function h0(e){return e>>>=0,e===0?32:31-(u0(e)/f0|0)|0}var Jo=64,qo=4194304;function Bs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~i;c!==0?r=Bs(c):(o&=l,o!==0&&(r=Bs(o)))}else l=n&~i,l!==0?r=Bs(l):o!==0&&(r=Bs(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-En(t),i=1<<n,r|=e[n],t&=~i;return r}function p0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-En(o),c=1<<l,d=i[l];d===-1?(!(c&n)||c&r)&&(i[l]=p0(c,t)):d<=t&&(e.expiredLanes|=c),o&=~c}}function ed(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Og(){var e=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),e}function Za(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-En(t),e[t]=n}function m0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-En(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function du(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-En(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Te=0;function Lg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bg,uu,$g,Wg,Ug,td=!1,Zo=[],Sr=null,wr=null,jr=null,oo=new Map,lo=new Map,mr=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function th(e,t){switch(e){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":oo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(t.pointerId)}}function Es(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Po(t),t!==null&&uu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function x0(e,t,n,r,i){switch(t){case"focusin":return Sr=Es(Sr,e,t,n,r,i),!0;case"dragenter":return wr=Es(wr,e,t,n,r,i),!0;case"mouseover":return jr=Es(jr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return oo.set(o,Es(oo.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,lo.set(o,Es(lo.get(o)||null,e,t,n,r,i)),!0}return!1}function Hg(e){var t=Zr(e.target);if(t!==null){var n=yi(t);if(n!==null){if(t=n.tag,t===13){if(t=Rg(n),t!==null){e.blockedOn=t,Ug(e.priority,function(){$g(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xc=r,n.target.dispatchEvent(r),Xc=null}else return t=Po(n),t!==null&&uu(t),e.blockedOn=n,!1;t.shift()}return!0}function nh(e,t,n){gl(e)&&n.delete(t)}function v0(){td=!1,Sr!==null&&gl(Sr)&&(Sr=null),wr!==null&&gl(wr)&&(wr=null),jr!==null&&gl(jr)&&(jr=null),oo.forEach(nh),lo.forEach(nh)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,td||(td=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,v0)))}function ao(e){function t(i){return Ts(i,e)}if(0<Zo.length){Ts(Zo[0],e);for(var n=1;n<Zo.length;n++){var r=Zo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sr!==null&&Ts(Sr,e),wr!==null&&Ts(wr,e),jr!==null&&Ts(jr,e),oo.forEach(t),lo.forEach(t),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)Hg(n),n.blockedOn===null&&mr.shift()}var Vi=ar.ReactCurrentBatchConfig,zl=!0;function _0(e,t,n,r){var i=Te,o=Vi.transition;Vi.transition=null;try{Te=1,fu(e,t,n,r)}finally{Te=i,Vi.transition=o}}function S0(e,t,n,r){var i=Te,o=Vi.transition;Vi.transition=null;try{Te=4,fu(e,t,n,r)}finally{Te=i,Vi.transition=o}}function fu(e,t,n,r){if(zl){var i=nd(e,t,n,r);if(i===null)cc(e,t,r,Rl,n),th(e,r);else if(x0(i,e,t,n,r))r.stopPropagation();else if(th(e,r),t&4&&-1<y0.indexOf(e)){for(;i!==null;){var o=Po(i);if(o!==null&&Bg(o),o=nd(e,t,n,r),o===null&&cc(e,t,r,Rl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else cc(e,t,r,null,n)}}var Rl=null;function nd(e,t,n,r){if(Rl=null,e=au(r),e=Zr(e),e!==null)if(t=yi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Rg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rl=e,null}function Vg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case cu:return 1;case Pg:return 4;case Tl:case c0:return 16;case Fg:return 536870912;default:return 16}default:return 16}}var xr=null,hu=null,ml=null;function Kg(){if(ml)return ml;var e,t=hu,n=t.length,r,i="value"in xr?xr.value:xr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[o-r];r++);return ml=i.slice(e,1<r?1-r:void 0)}function yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function el(){return!0}function rh(){return!1}function rn(e){function t(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?el:rh,this.isPropagationStopped=rh,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),t}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=rn(hs),Ao=Qe({},hs,{view:0,detail:0}),w0=rn(Ao),ec,tc,Ds,ma=Qe({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(ec=e.screenX-Ds.screenX,tc=e.screenY-Ds.screenY):tc=ec=0,Ds=e),ec)},movementY:function(e){return"movementY"in e?e.movementY:tc}}),ih=rn(ma),j0=Qe({},ma,{dataTransfer:0}),C0=rn(j0),k0=Qe({},Ao,{relatedTarget:0}),nc=rn(k0),b0=Qe({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=rn(b0),E0=Qe({},hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),T0=rn(E0),D0=Qe({},hs,{data:0}),sh=rn(D0),z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N0[e])?!!t[e]:!1}function gu(){return M0}var A0=Qe({},Ao,{key:function(e){if(e.key){var t=z0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(e){return e.type==="keypress"?yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),P0=rn(A0),F0=Qe({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=rn(F0),O0=Qe({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),L0=rn(O0),B0=Qe({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$0=rn(B0),W0=Qe({},ma,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),U0=rn(W0),H0=[9,13,27,32],mu=tr&&"CompositionEvent"in window,Hs=null;tr&&"documentMode"in document&&(Hs=document.documentMode);var V0=tr&&"TextEvent"in window&&!Hs,Gg=tr&&(!mu||Hs&&8<Hs&&11>=Hs),lh=" ",ah=!1;function Yg(e,t){switch(e){case"keyup":return H0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function K0(e,t){switch(e){case"compositionend":return Qg(t);case"keypress":return t.which!==32?null:(ah=!0,lh);case"textInput":return e=t.data,e===lh&&ah?null:e;default:return null}}function G0(e,t){if(zi)return e==="compositionend"||!mu&&Yg(e,t)?(e=Kg(),ml=hu=xr=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gg&&t.locale!=="ko"?null:t.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Y0[e.type]:t==="textarea"}function Xg(e,t,n,r){Ig(r),t=Nl(t,"onChange"),0<t.length&&(n=new pu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vs=null,co=null;function Q0(e){lm(e,0)}function ya(e){var t=Mi(e);if(_g(t))return e}function X0(e,t){if(e==="change")return t}var Jg=!1;if(tr){var rc;if(tr){var ic="oninput"in document;if(!ic){var dh=document.createElement("div");dh.setAttribute("oninput","return;"),ic=typeof dh.oninput=="function"}rc=ic}else rc=!1;Jg=rc&&(!document.documentMode||9<document.documentMode)}function uh(){Vs&&(Vs.detachEvent("onpropertychange",qg),co=Vs=null)}function qg(e){if(e.propertyName==="value"&&ya(co)){var t=[];Xg(t,co,e,au(e)),zg(Q0,t)}}function J0(e,t,n){e==="focusin"?(uh(),Vs=t,co=n,Vs.attachEvent("onpropertychange",qg)):e==="focusout"&&uh()}function q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ya(co)}function Z0(e,t){if(e==="click")return ya(t)}function ev(e,t){if(e==="input"||e==="change")return ya(t)}function tv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:tv;function uo(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Oc.call(t,i)||!zn(e[i],t[i]))return!1}return!0}function fh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hh(e,t){var n=fh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fh(n)}}function Zg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function em(){for(var e=window,t=bl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bl(e.document)}return t}function yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nv(e){var t=em(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zg(n.ownerDocument.documentElement,n)){if(r!==null&&yu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=hh(n,o);var l=hh(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rv=tr&&"documentMode"in document&&11>=document.documentMode,Ri=null,rd=null,Ks=null,id=!1;function ph(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;id||Ri==null||Ri!==bl(r)||(r=Ri,"selectionStart"in r&&yu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ks&&uo(Ks,r)||(Ks=r,r=Nl(rd,"onSelect"),0<r.length&&(t=new pu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ri)))}function tl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ni={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},sc={},tm={};tr&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function xa(e){if(sc[e])return sc[e];if(!Ni[e])return e;var t=Ni[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tm)return sc[e]=t[n];return e}var nm=xa("animationend"),rm=xa("animationiteration"),im=xa("animationstart"),sm=xa("transitionend"),om=new Map,gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){om.set(e,t),mi(t,[e])}for(var oc=0;oc<gh.length;oc++){var lc=gh[oc],iv=lc.toLowerCase(),sv=lc[0].toUpperCase()+lc.slice(1);Lr(iv,"on"+sv)}Lr(nm,"onAnimationEnd");Lr(rm,"onAnimationIteration");Lr(im,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(sm,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ov=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function mh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,i0(r,t,void 0,e),e.currentTarget=null}function lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==o&&i.isPropagationStopped())break e;mh(i,c,u),o=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,u=c.currentTarget,c=c.listener,d!==o&&i.isPropagationStopped())break e;mh(i,c,u),o=d}}}if(El)throw e=Zc,El=!1,Zc=null,e}function $e(e,t){var n=t[cd];n===void 0&&(n=t[cd]=new Set);var r=e+"__bubble";n.has(r)||(am(t,e,2,!1),n.add(r))}function ac(e,t,n){var r=0;t&&(r|=4),am(n,e,r,t)}var nl="_reactListening"+Math.random().toString(36).slice(2);function fo(e){if(!e[nl]){e[nl]=!0,gg.forEach(function(n){n!=="selectionchange"&&(ov.has(n)||ac(n,!1,e),ac(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nl]||(t[nl]=!0,ac("selectionchange",!1,t))}}function am(e,t,n,r){switch(Vg(t)){case 1:var i=_0;break;case 4:i=S0;break;default:i=fu}n=i.bind(null,t,n,e),i=void 0,!qc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function cc(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=Zr(c),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}c=c.parentNode}}r=r.return}zg(function(){var u=o,h=au(n),p=[];e:{var f=om.get(e);if(f!==void 0){var S=pu,y=e;switch(e){case"keypress":if(yl(n)===0)break e;case"keydown":case"keyup":S=P0;break;case"focusin":y="focus",S=nc;break;case"focusout":y="blur",S=nc;break;case"beforeblur":case"afterblur":S=nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=C0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=L0;break;case nm:case rm:case im:S=I0;break;case sm:S=$0;break;case"scroll":S=w0;break;case"wheel":S=U0;break;case"copy":case"cut":case"paste":S=T0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=oh}var w=(t&4)!==0,j=!w&&e==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var g=u,x;g!==null;){x=g;var I=x.stateNode;if(x.tag===5&&I!==null&&(x=I,m!==null&&(I=so(g,m),I!=null&&w.push(ho(g,I,x)))),j)break;g=g.return}0<w.length&&(f=new S(f,y,null,n,h),p.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",f&&n!==Xc&&(y=n.relatedTarget||n.fromElement)&&(Zr(y)||y[nr]))break e;if((S||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,S?(y=n.relatedTarget||n.toElement,S=u,y=y?Zr(y):null,y!==null&&(j=yi(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(S=null,y=u),S!==y)){if(w=ih,I="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=oh,I="onPointerLeave",m="onPointerEnter",g="pointer"),j=S==null?f:Mi(S),x=y==null?f:Mi(y),f=new w(I,g+"leave",S,n,h),f.target=j,f.relatedTarget=x,I=null,Zr(h)===u&&(w=new w(m,g+"enter",y,n,h),w.target=x,w.relatedTarget=j,I=w),j=I,S&&y)t:{for(w=S,m=y,g=0,x=w;x;x=bi(x))g++;for(x=0,I=m;I;I=bi(I))x++;for(;0<g-x;)w=bi(w),g--;for(;0<x-g;)m=bi(m),x--;for(;g--;){if(w===m||m!==null&&w===m.alternate)break t;w=bi(w),m=bi(m)}w=null}else w=null;S!==null&&yh(p,f,S,w,!1),y!==null&&j!==null&&yh(p,j,y,w,!0)}}e:{if(f=u?Mi(u):window,S=f.nodeName&&f.nodeName.toLowerCase(),S==="select"||S==="input"&&f.type==="file")var N=X0;else if(ch(f))if(Jg)N=ev;else{N=q0;var F=J0}else(S=f.nodeName)&&S.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Z0);if(N&&(N=N(e,u))){Xg(p,N,n,h);break e}F&&F(e,f,u),e==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&Vc(f,"number",f.value)}switch(F=u?Mi(u):window,e){case"focusin":(ch(F)||F.contentEditable==="true")&&(Ri=F,rd=u,Ks=null);break;case"focusout":Ks=rd=Ri=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,ph(p,n,h);break;case"selectionchange":if(rv)break;case"keydown":case"keyup":ph(p,n,h)}var $;if(mu)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else zi?Yg(e,n)&&(W="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(W="onCompositionStart");W&&(Gg&&n.locale!=="ko"&&(zi||W!=="onCompositionStart"?W==="onCompositionEnd"&&zi&&($=Kg()):(xr=h,hu="value"in xr?xr.value:xr.textContent,zi=!0)),F=Nl(u,W),0<F.length&&(W=new sh(W,e,null,n,h),p.push({event:W,listeners:F}),$?W.data=$:($=Qg(n),$!==null&&(W.data=$)))),($=V0?K0(e,n):G0(e,n))&&(u=Nl(u,"onBeforeInput"),0<u.length&&(h=new sh("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=$))}lm(p,t)})}function ho(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=so(e,n),o!=null&&r.unshift(ho(e,o,i)),o=so(e,t),o!=null&&r.push(ho(e,o,i))),e=e.return}return r}function bi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yh(e,t,n,r,i){for(var o=t._reactName,l=[];n!==null&&n!==r;){var c=n,d=c.alternate,u=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&u!==null&&(c=u,i?(d=so(n,o),d!=null&&l.unshift(ho(n,d,c))):i||(d=so(n,o),d!=null&&l.push(ho(n,d,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var lv=/\r\n?/g,av=/\u0000|\uFFFD/g;function xh(e){return(typeof e=="string"?e:""+e).replace(lv,`
`).replace(av,"")}function rl(e,t,n){if(t=xh(t),xh(e)!==t&&n)throw Error(O(425))}function Ml(){}var sd=null,od=null;function ld(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ad=typeof setTimeout=="function"?setTimeout:void 0,cv=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,dv=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(e){return vh.resolve(null).then(e).catch(uv)}:ad;function uv(e){setTimeout(function(){throw e})}function dc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ao(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ao(t)}function Cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ps=Math.random().toString(36).slice(2),Pn="__reactFiber$"+ps,po="__reactProps$"+ps,nr="__reactContainer$"+ps,cd="__reactEvents$"+ps,fv="__reactListeners$"+ps,hv="__reactHandles$"+ps;function Zr(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nr]||n[Pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_h(e);e!==null;){if(n=e[Pn])return n;e=_h(e)}return t}e=n,n=e.parentNode}return null}function Po(e){return e=e[Pn]||e[nr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function va(e){return e[po]||null}var dd=[],Ai=-1;function Br(e){return{current:e}}function We(e){0>Ai||(e.current=dd[Ai],dd[Ai]=null,Ai--)}function Oe(e,t){Ai++,dd[Ai]=e.current,e.current=t}var Mr={},Rt=Br(Mr),Kt=Br(!1),oi=Mr;function Zi(e,t){var n=e.type.contextTypes;if(!n)return Mr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Gt(e){return e=e.childContextTypes,e!=null}function Al(){We(Kt),We(Rt)}function Sh(e,t,n){if(Rt.current!==Mr)throw Error(O(168));Oe(Rt,t),Oe(Kt,n)}function cm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(O(108,J1(e)||"Unknown",i));return Qe({},n,r)}function Pl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,oi=Rt.current,Oe(Rt,e),Oe(Kt,Kt.current),!0}function wh(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=cm(e,t,oi),r.__reactInternalMemoizedMergedChildContext=e,We(Kt),We(Rt),Oe(Rt,e)):We(Kt),Oe(Kt,n)}var Qn=null,_a=!1,uc=!1;function dm(e){Qn===null?Qn=[e]:Qn.push(e)}function pv(e){_a=!0,dm(e)}function $r(){if(!uc&&Qn!==null){uc=!0;var e=0,t=Te;try{var n=Qn;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Qn=null,_a=!1}catch(i){throw Qn!==null&&(Qn=Qn.slice(e+1)),Ag(cu,$r),i}finally{Te=t,uc=!1}}return null}var Pi=[],Fi=0,Fl=null,Ol=0,an=[],cn=0,li=null,Xn=1,Jn="";function Yr(e,t){Pi[Fi++]=Ol,Pi[Fi++]=Fl,Fl=e,Ol=t}function um(e,t,n){an[cn++]=Xn,an[cn++]=Jn,an[cn++]=li,li=e;var r=Xn;e=Jn;var i=32-En(r)-1;r&=~(1<<i),n+=1;var o=32-En(t)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Xn=1<<32-En(t)+i|n<<i|r,Jn=o+e}else Xn=1<<o|n<<i|r,Jn=e}function xu(e){e.return!==null&&(Yr(e,1),um(e,1,0))}function vu(e){for(;e===Fl;)Fl=Pi[--Fi],Pi[Fi]=null,Ol=Pi[--Fi],Pi[Fi]=null;for(;e===li;)li=an[--cn],an[cn]=null,Jn=an[--cn],an[cn]=null,Xn=an[--cn],an[cn]=null}var Zt=null,qt=null,Ue=!1,kn=null;function fm(e,t){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,qt=Cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=li!==null?{id:Xn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Zt=e,qt=null,!0):!1;default:return!1}}function ud(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fd(e){if(Ue){var t=qt;if(t){var n=t;if(!jh(e,t)){if(ud(e))throw Error(O(418));t=Cr(n.nextSibling);var r=Zt;t&&jh(e,t)?fm(r,n):(e.flags=e.flags&-4097|2,Ue=!1,Zt=e)}}else{if(ud(e))throw Error(O(418));e.flags=e.flags&-4097|2,Ue=!1,Zt=e}}}function Ch(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function il(e){if(e!==Zt)return!1;if(!Ue)return Ch(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ld(e.type,e.memoizedProps)),t&&(t=qt)){if(ud(e))throw hm(),Error(O(418));for(;t;)fm(e,t),t=Cr(t.nextSibling)}if(Ch(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qt=Cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=Zt?Cr(e.stateNode.nextSibling):null;return!0}function hm(){for(var e=qt;e;)e=Cr(e.nextSibling)}function es(){qt=Zt=null,Ue=!1}function _u(e){kn===null?kn=[e]:kn.push(e)}var gv=ar.ReactCurrentBatchConfig;function zs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var c=i.refs;l===null?delete c[o]:c[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function sl(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kh(e){var t=e._init;return t(e._payload)}function pm(e){function t(m,g){if(e){var x=m.deletions;x===null?(m.deletions=[g],m.flags|=16):x.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=Er(m,g),m.index=0,m.sibling=null,m}function o(m,g,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<g?(m.flags|=2,g):x):(m.flags|=2,g)):(m.flags|=1048576,g)}function l(m){return e&&m.alternate===null&&(m.flags|=2),m}function c(m,g,x,I){return g===null||g.tag!==6?(g=xc(x,m.mode,I),g.return=m,g):(g=i(g,x),g.return=m,g)}function d(m,g,x,I){var N=x.type;return N===Di?h(m,g,x.props.children,I,x.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===pr&&kh(N)===g.type)?(I=i(g,x.props),I.ref=zs(m,g,x),I.return=m,I):(I=Cl(x.type,x.key,x.props,null,m.mode,I),I.ref=zs(m,g,x),I.return=m,I)}function u(m,g,x,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=vc(x,m.mode,I),g.return=m,g):(g=i(g,x.children||[]),g.return=m,g)}function h(m,g,x,I,N){return g===null||g.tag!==7?(g=si(x,m.mode,I,N),g.return=m,g):(g=i(g,x),g.return=m,g)}function p(m,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=xc(""+g,m.mode,x),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yo:return x=Cl(g.type,g.key,g.props,null,m.mode,x),x.ref=zs(m,null,g),x.return=m,x;case Ti:return g=vc(g,m.mode,x),g.return=m,g;case pr:var I=g._init;return p(m,I(g._payload),x)}if(Ls(g)||bs(g))return g=si(g,m.mode,x,null),g.return=m,g;sl(m,g)}return null}function f(m,g,x,I){var N=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:c(m,g,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yo:return x.key===N?d(m,g,x,I):null;case Ti:return x.key===N?u(m,g,x,I):null;case pr:return N=x._init,f(m,g,N(x._payload),I)}if(Ls(x)||bs(x))return N!==null?null:h(m,g,x,I,null);sl(m,x)}return null}function S(m,g,x,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return m=m.get(x)||null,c(g,m,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Yo:return m=m.get(I.key===null?x:I.key)||null,d(g,m,I,N);case Ti:return m=m.get(I.key===null?x:I.key)||null,u(g,m,I,N);case pr:var F=I._init;return S(m,g,x,F(I._payload),N)}if(Ls(I)||bs(I))return m=m.get(x)||null,h(g,m,I,N,null);sl(g,I)}return null}function y(m,g,x,I){for(var N=null,F=null,$=g,W=g=0,D=null;$!==null&&W<x.length;W++){$.index>W?(D=$,$=null):D=$.sibling;var K=f(m,$,x[W],I);if(K===null){$===null&&($=D);break}e&&$&&K.alternate===null&&t(m,$),g=o(K,g,W),F===null?N=K:F.sibling=K,F=K,$=D}if(W===x.length)return n(m,$),Ue&&Yr(m,W),N;if($===null){for(;W<x.length;W++)$=p(m,x[W],I),$!==null&&(g=o($,g,W),F===null?N=$:F.sibling=$,F=$);return Ue&&Yr(m,W),N}for($=r(m,$);W<x.length;W++)D=S($,m,W,x[W],I),D!==null&&(e&&D.alternate!==null&&$.delete(D.key===null?W:D.key),g=o(D,g,W),F===null?N=D:F.sibling=D,F=D);return e&&$.forEach(function(ie){return t(m,ie)}),Ue&&Yr(m,W),N}function w(m,g,x,I){var N=bs(x);if(typeof N!="function")throw Error(O(150));if(x=N.call(x),x==null)throw Error(O(151));for(var F=N=null,$=g,W=g=0,D=null,K=x.next();$!==null&&!K.done;W++,K=x.next()){$.index>W?(D=$,$=null):D=$.sibling;var ie=f(m,$,K.value,I);if(ie===null){$===null&&($=D);break}e&&$&&ie.alternate===null&&t(m,$),g=o(ie,g,W),F===null?N=ie:F.sibling=ie,F=ie,$=D}if(K.done)return n(m,$),Ue&&Yr(m,W),N;if($===null){for(;!K.done;W++,K=x.next())K=p(m,K.value,I),K!==null&&(g=o(K,g,W),F===null?N=K:F.sibling=K,F=K);return Ue&&Yr(m,W),N}for($=r(m,$);!K.done;W++,K=x.next())K=S($,m,W,K.value,I),K!==null&&(e&&K.alternate!==null&&$.delete(K.key===null?W:K.key),g=o(K,g,W),F===null?N=K:F.sibling=K,F=K);return e&&$.forEach(function(P){return t(m,P)}),Ue&&Yr(m,W),N}function j(m,g,x,I){if(typeof x=="object"&&x!==null&&x.type===Di&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Yo:e:{for(var N=x.key,F=g;F!==null;){if(F.key===N){if(N=x.type,N===Di){if(F.tag===7){n(m,F.sibling),g=i(F,x.props.children),g.return=m,m=g;break e}}else if(F.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===pr&&kh(N)===F.type){n(m,F.sibling),g=i(F,x.props),g.ref=zs(m,F,x),g.return=m,m=g;break e}n(m,F);break}else t(m,F);F=F.sibling}x.type===Di?(g=si(x.props.children,m.mode,I,x.key),g.return=m,m=g):(I=Cl(x.type,x.key,x.props,null,m.mode,I),I.ref=zs(m,g,x),I.return=m,m=I)}return l(m);case Ti:e:{for(F=x.key;g!==null;){if(g.key===F)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(m,g.sibling),g=i(g,x.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=vc(x,m.mode,I),g.return=m,m=g}return l(m);case pr:return F=x._init,j(m,g,F(x._payload),I)}if(Ls(x))return y(m,g,x,I);if(bs(x))return w(m,g,x,I);sl(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,x),g.return=m,m=g):(n(m,g),g=xc(x,m.mode,I),g.return=m,m=g),l(m)):n(m,g)}return j}var ts=pm(!0),gm=pm(!1),Ll=Br(null),Bl=null,Oi=null,Su=null;function wu(){Su=Oi=Bl=null}function ju(e){var t=Ll.current;We(Ll),e._currentValue=t}function hd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ki(e,t){Bl=e,Su=Oi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ht=!0),e.firstContext=null)}function hn(e){var t=e._currentValue;if(Su!==e)if(e={context:e,memoizedValue:t,next:null},Oi===null){if(Bl===null)throw Error(O(308));Oi=e,Bl.dependencies={lanes:0,firstContext:e}}else Oi=Oi.next=e;return t}var ei=null;function Cu(e){ei===null?ei=[e]:ei.push(e)}function mm(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Cu(t)):(n.next=i.next,i.next=n),t.interleaved=n,rr(e,r)}function rr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gr=!1;function ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,rr(e,n)}return i=r.interleaved,i===null?(t.next=t,Cu(r)):(t.next=i.next,i.next=t),r.interleaved=t,rr(e,n)}function xl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,du(e,n)}}function bh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $l(e,t,n,r){var i=e.updateQueue;gr=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,u=d.next;d.next=null,l===null?o=u:l.next=u,l=d;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==l&&(c===null?h.firstBaseUpdate=u:c.next=u,h.lastBaseUpdate=d))}if(o!==null){var p=i.baseState;l=0,h=u=d=null,c=o;do{var f=c.lane,S=c.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:S,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,w=c;switch(f=t,S=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){p=y.call(S,p,f);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(S,p,f):y,f==null)break e;p=Qe({},p,f);break e;case 2:gr=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[c]:f.push(c))}else S={eventTime:S,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(u=h=S,d=p):h=h.next=S,l|=f;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;f=c,c=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(d=p),i.baseState=d,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);ci|=l,e.lanes=l,e.memoizedState=p}}function Ih(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Fo={},On=Br(Fo),go=Br(Fo),mo=Br(Fo);function ti(e){if(e===Fo)throw Error(O(174));return e}function bu(e,t){switch(Oe(mo,t),Oe(go,e),Oe(On,Fo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gc(t,e)}We(On),Oe(On,t)}function ns(){We(On),We(go),We(mo)}function xm(e){ti(mo.current);var t=ti(On.current),n=Gc(t,e.type);t!==n&&(Oe(go,e),Oe(On,n))}function Iu(e){go.current===e&&(We(On),We(go))}var Ge=Br(0);function Wl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fc=[];function Eu(){for(var e=0;e<fc.length;e++)fc[e]._workInProgressVersionPrimary=null;fc.length=0}var vl=ar.ReactCurrentDispatcher,hc=ar.ReactCurrentBatchConfig,ai=0,Ye=null,dt=null,mt=null,Ul=!1,Gs=!1,yo=0,mv=0;function Tt(){throw Error(O(321))}function Tu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zn(e[n],t[n]))return!1;return!0}function Du(e,t,n,r,i,o){if(ai=o,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vl.current=e===null||e.memoizedState===null?_v:Sv,e=n(r,i),Gs){o=0;do{if(Gs=!1,yo=0,25<=o)throw Error(O(301));o+=1,mt=dt=null,t.updateQueue=null,vl.current=wv,e=n(r,i)}while(Gs)}if(vl.current=Hl,t=dt!==null&&dt.next!==null,ai=0,mt=dt=Ye=null,Ul=!1,t)throw Error(O(300));return e}function zu(){var e=yo!==0;return yo=0,e}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=e:mt=mt.next=e,mt}function pn(){if(dt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=mt===null?Ye.memoizedState:mt.next;if(t!==null)mt=t,dt=e;else{if(e===null)throw Error(O(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?Ye.memoizedState=mt=e:mt=mt.next=e}return mt}function xo(e,t){return typeof t=="function"?t(e):t}function pc(e){var t=pn(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=dt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=l=null,d=null,u=o;do{var h=u.lane;if((ai&h)===h)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=p,l=r):d=d.next=p,Ye.lanes|=h,ci|=h}u=u.next}while(u!==null&&u!==o);d===null?l=r:d.next=c,zn(r,t.memoizedState)||(Ht=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ye.lanes|=o,ci|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gc(e){var t=pn(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);zn(o,t.memoizedState)||(Ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function vm(){}function _m(e,t){var n=Ye,r=pn(),i=t(),o=!zn(r.memoizedState,i);if(o&&(r.memoizedState=i,Ht=!0),r=r.queue,Ru(jm.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,vo(9,wm.bind(null,n,r,i,t),void 0,null),xt===null)throw Error(O(349));ai&30||Sm(n,t,i)}return i}function Sm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wm(e,t,n,r){t.value=n,t.getSnapshot=r,Cm(t)&&km(e)}function jm(e,t,n){return n(function(){Cm(t)&&km(e)})}function Cm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zn(e,n)}catch{return!0}}function km(e){var t=rr(e,1);t!==null&&Tn(t,e,1,-1)}function Eh(e){var t=An();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=vv.bind(null,Ye,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bm(){return pn().memoizedState}function _l(e,t,n,r){var i=An();Ye.flags|=e,i.memoizedState=vo(1|t,n,void 0,r===void 0?null:r)}function Sa(e,t,n,r){var i=pn();r=r===void 0?null:r;var o=void 0;if(dt!==null){var l=dt.memoizedState;if(o=l.destroy,r!==null&&Tu(r,l.deps)){i.memoizedState=vo(t,n,o,r);return}}Ye.flags|=e,i.memoizedState=vo(1|t,n,o,r)}function Th(e,t){return _l(8390656,8,e,t)}function Ru(e,t){return Sa(2048,8,e,t)}function Im(e,t){return Sa(4,2,e,t)}function Em(e,t){return Sa(4,4,e,t)}function Tm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dm(e,t,n){return n=n!=null?n.concat([e]):null,Sa(4,4,Tm.bind(null,t,e),n)}function Nu(){}function zm(e,t){var n=pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Rm(e,t){var n=pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nm(e,t,n){return ai&21?(zn(n,t)||(n=Og(),Ye.lanes|=n,ci|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=n)}function yv(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=hc.transition;hc.transition={};try{e(!1),t()}finally{Te=n,hc.transition=r}}function Mm(){return pn().memoizedState}function xv(e,t,n){var r=Ir(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Am(e))Pm(t,n);else if(n=mm(e,t,n,r),n!==null){var i=Pt();Tn(n,e,r,i),Fm(n,t,r)}}function vv(e,t,n){var r=Ir(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Am(e))Pm(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,c=o(l,n);if(i.hasEagerState=!0,i.eagerState=c,zn(c,l)){var d=t.interleaved;d===null?(i.next=i,Cu(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=mm(e,t,i,r),n!==null&&(i=Pt(),Tn(n,e,r,i),Fm(n,t,r))}}function Am(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Pm(e,t){Gs=Ul=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,du(e,n)}}var Hl={readContext:hn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},_v={readContext:hn,useCallback:function(e,t){return An().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:Th,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_l(4194308,4,Tm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _l(4194308,4,e,t)},useInsertionEffect:function(e,t){return _l(4,2,e,t)},useMemo:function(e,t){var n=An();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=An();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xv.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=An();return e={current:e},t.memoizedState=e},useState:Eh,useDebugValue:Nu,useDeferredValue:function(e){return An().memoizedState=e},useTransition:function(){var e=Eh(!1),t=e[0];return e=yv.bind(null,e[1]),An().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,i=An();if(Ue){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),xt===null)throw Error(O(349));ai&30||Sm(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Th(jm.bind(null,r,o,e),[e]),r.flags|=2048,vo(9,wm.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=An(),t=xt.identifierPrefix;if(Ue){var n=Jn,r=Xn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sv={readContext:hn,useCallback:zm,useContext:hn,useEffect:Ru,useImperativeHandle:Dm,useInsertionEffect:Im,useLayoutEffect:Em,useMemo:Rm,useReducer:pc,useRef:bm,useState:function(){return pc(xo)},useDebugValue:Nu,useDeferredValue:function(e){var t=pn();return Nm(t,dt.memoizedState,e)},useTransition:function(){var e=pc(xo)[0],t=pn().memoizedState;return[e,t]},useMutableSource:vm,useSyncExternalStore:_m,useId:Mm,unstable_isNewReconciler:!1},wv={readContext:hn,useCallback:zm,useContext:hn,useEffect:Ru,useImperativeHandle:Dm,useInsertionEffect:Im,useLayoutEffect:Em,useMemo:Rm,useReducer:gc,useRef:bm,useState:function(){return gc(xo)},useDebugValue:Nu,useDeferredValue:function(e){var t=pn();return dt===null?t.memoizedState=e:Nm(t,dt.memoizedState,e)},useTransition:function(){var e=gc(xo)[0],t=pn().memoizedState;return[e,t]},useMutableSource:vm,useSyncExternalStore:_m,useId:Mm,unstable_isNewReconciler:!1};function jn(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wa={isMounted:function(e){return(e=e._reactInternals)?yi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),i=Ir(e),o=Zn(r,i);o.payload=t,n!=null&&(o.callback=n),t=kr(e,o,i),t!==null&&(Tn(t,e,i,r),xl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),i=Ir(e),o=Zn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=kr(e,o,i),t!==null&&(Tn(t,e,i,r),xl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=Ir(e),i=Zn(n,r);i.tag=2,t!=null&&(i.callback=t),t=kr(e,i,r),t!==null&&(Tn(t,e,r,n),xl(t,e,r))}};function Dh(e,t,n,r,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!uo(n,r)||!uo(i,o):!0}function Om(e,t,n){var r=!1,i=Mr,o=t.contextType;return typeof o=="object"&&o!==null?o=hn(o):(i=Gt(t)?oi:Rt.current,r=t.contextTypes,o=(r=r!=null)?Zi(e,i):Mr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function zh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function gd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},ku(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=hn(o):(o=Gt(t)?oi:Rt.current,i.context=Zi(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(pd(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&wa.enqueueReplaceState(i,i.state,null),$l(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function rs(e,t){try{var n="",r=t;do n+=X1(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function mc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function md(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jv=typeof WeakMap=="function"?WeakMap:Map;function Lm(e,t,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,bd=r),md(e,t)},n}function Bm(e,t,n){n=Zn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){md(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){md(e,t),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Rh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jv;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Fv.bind(null,e,t,n),t.then(e,e))}function Nh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mh(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zn(-1,1),t.tag=2,kr(n,t,1))),n.lanes|=1),e)}var Cv=ar.ReactCurrentOwner,Ht=!1;function Mt(e,t,n,r){t.child=e===null?gm(t,null,n,r):ts(t,e.child,n,r)}function Ah(e,t,n,r,i){n=n.render;var o=t.ref;return Ki(t,i),r=Du(e,t,n,r,o,i),n=zu(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ir(e,t,i)):(Ue&&n&&xu(t),t.flags|=1,Mt(e,t,r,i),t.child)}function Ph(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!$u(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,$m(e,t,o,r,i)):(e=Cl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:uo,n(l,r)&&e.ref===t.ref)return ir(e,t,i)}return t.flags|=1,e=Er(o,r),e.ref=t.ref,e.return=t,t.child=e}function $m(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(uo(o,r)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,ir(e,t,i)}return yd(e,t,n,r,i)}function Wm(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Bi,Xt),Xt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(Bi,Xt),Xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Oe(Bi,Xt),Xt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Oe(Bi,Xt),Xt|=r;return Mt(e,t,i,n),t.child}function Um(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yd(e,t,n,r,i){var o=Gt(n)?oi:Rt.current;return o=Zi(t,o),Ki(t,i),n=Du(e,t,n,r,o,i),r=zu(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ir(e,t,i)):(Ue&&r&&xu(t),t.flags|=1,Mt(e,t,n,i),t.child)}function Fh(e,t,n,r,i){if(Gt(n)){var o=!0;Pl(t)}else o=!1;if(Ki(t,i),t.stateNode===null)Sl(e,t),Om(t,n,r),gd(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var d=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=hn(u):(u=Gt(n)?oi:Rt.current,u=Zi(t,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==u)&&zh(t,l,r,u),gr=!1;var f=t.memoizedState;l.state=f,$l(t,r,l,i),d=t.memoizedState,c!==r||f!==d||Kt.current||gr?(typeof h=="function"&&(pd(t,n,h,r),d=t.memoizedState),(c=gr||Dh(t,n,c,r,f,d,u))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=u,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,ym(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:jn(t.type,c),l.props=u,p=t.pendingProps,f=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=hn(d):(d=Gt(n)?oi:Rt.current,d=Zi(t,d));var S=n.getDerivedStateFromProps;(h=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==p||f!==d)&&zh(t,l,r,d),gr=!1,f=t.memoizedState,l.state=f,$l(t,r,l,i);var y=t.memoizedState;c!==p||f!==y||Kt.current||gr?(typeof S=="function"&&(pd(t,n,S,r),y=t.memoizedState),(u=gr||Dh(t,n,u,r,f,y,d)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,y,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,y,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),l.props=r,l.state=y,l.context=d,r=u):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return xd(e,t,n,r,o,i)}function xd(e,t,n,r,i,o){Um(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&wh(t,n,!1),ir(e,t,o);r=t.stateNode,Cv.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ts(t,e.child,null,o),t.child=ts(t,null,c,o)):Mt(e,t,c,o),t.memoizedState=r.state,i&&wh(t,n,!0),t.child}function Hm(e){var t=e.stateNode;t.pendingContext?Sh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sh(e,t.context,!1),bu(e,t.containerInfo)}function Oh(e,t,n,r,i){return es(),_u(i),t.flags|=256,Mt(e,t,n,r),t.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function _d(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vm(e,t,n){var r=t.pendingProps,i=Ge.current,o=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Oe(Ge,i&1),e===null)return fd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=ka(l,r,0,null),e=si(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=_d(n),t.memoizedState=vd,e):Mu(t,l));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return kv(e,t,l,r,c,i,n);if(o){o=r.fallback,l=t.mode,i=e.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Er(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Er(c,o):(o=si(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?_d(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=vd,r}return o=e.child,e=o.sibling,r=Er(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mu(e,t){return t=ka({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ol(e,t,n,r){return r!==null&&_u(r),ts(t,e.child,null,n),e=Mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kv(e,t,n,r,i,o,l){if(n)return t.flags&256?(t.flags&=-257,r=mc(Error(O(422))),ol(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ka({mode:"visible",children:r.children},i,0,null),o=si(o,i,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ts(t,e.child,null,l),t.child.memoizedState=_d(l),t.memoizedState=vd,o);if(!(t.mode&1))return ol(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(O(419)),r=mc(o,r,void 0),ol(e,t,l,r)}if(c=(l&e.childLanes)!==0,Ht||c){if(r=xt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,rr(e,i),Tn(r,e,i,-1))}return Bu(),r=mc(Error(O(421))),ol(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Ov.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,qt=Cr(i.nextSibling),Zt=t,Ue=!0,kn=null,e!==null&&(an[cn++]=Xn,an[cn++]=Jn,an[cn++]=li,Xn=e.id,Jn=e.overflow,li=t),t=Mu(t,r.children),t.flags|=4096,t)}function Lh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hd(e.return,t,n)}function yc(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Km(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Mt(e,t,r.children,n),r=Ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lh(e,n,t);else if(e.tag===19)Lh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oe(Ge,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Wl(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),yc(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Wl(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}yc(t,!0,n,null,o);break;case"together":yc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ir(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ci|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=Er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bv(e,t,n){switch(t.tag){case 3:Hm(t),es();break;case 5:xm(t);break;case 1:Gt(t.type)&&Pl(t);break;case 4:bu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Oe(Ll,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ge,Ge.current&1),t.flags|=128,null):n&t.child.childLanes?Vm(e,t,n):(Oe(Ge,Ge.current&1),e=ir(e,t,n),e!==null?e.sibling:null);Oe(Ge,Ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Km(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Ge,Ge.current),r)break;return null;case 22:case 23:return t.lanes=0,Wm(e,t,n)}return ir(e,t,n)}var Gm,Sd,Ym,Qm;Gm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sd=function(){};Ym=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ti(On.current);var o=null;switch(n){case"input":i=Uc(e,i),r=Uc(e,r),o=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),o=[];break;case"textarea":i=Kc(e,i),r=Kc(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ml)}Yc(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var c=i[u];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ro.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var d=r[u];if(c=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(o=o||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ro.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&$e("scroll",e),o||c===d||(o=[])):(o=o||[]).push(u,d))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Qm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rs(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Iv(e,t,n){var r=t.pendingProps;switch(vu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Gt(t.type)&&Al(),Dt(t),null;case 3:return r=t.stateNode,ns(),We(Kt),We(Rt),Eu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kn!==null&&(Td(kn),kn=null))),Sd(e,t),Dt(t),null;case 5:Iu(t);var i=ti(mo.current);if(n=t.type,e!==null&&t.stateNode!=null)Ym(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return Dt(t),null}if(e=ti(On.current),il(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Pn]=t,r[po]=o,e=(t.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<$s.length;i++)$e($s[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Yf(r,o),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},$e("invalid",r);break;case"textarea":Xf(r,o),$e("invalid",r)}Yc(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&rl(r.textContent,c,e),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&rl(r.textContent,c,e),i=["children",""+c]):ro.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&$e("scroll",r)}switch(n){case"input":Qo(r),Qf(r,o,!0);break;case"textarea":Qo(r),Jf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ml)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Pn]=t,e[po]=r,Gm(e,t,!1,!1),t.stateNode=e;e:{switch(l=Qc(n,r),n){case"dialog":$e("cancel",e),$e("close",e),i=r;break;case"iframe":case"object":case"embed":$e("load",e),i=r;break;case"video":case"audio":for(i=0;i<$s.length;i++)$e($s[i],e);i=r;break;case"source":$e("error",e),i=r;break;case"img":case"image":case"link":$e("error",e),$e("load",e),i=r;break;case"details":$e("toggle",e),i=r;break;case"input":Yf(e,r),i=Uc(e,r),$e("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),$e("invalid",e);break;case"textarea":Xf(e,r),i=Kc(e,r),$e("invalid",e);break;default:i=r}Yc(n,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="style"?bg(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Cg(e,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&io(e,d):typeof d=="number"&&io(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ro.hasOwnProperty(o)?d!=null&&o==="onScroll"&&$e("scroll",e):d!=null&&iu(e,o,d,l))}switch(n){case"input":Qo(e),Qf(e,r,!1);break;case"textarea":Qo(e),Jf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Nr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Wi(e,!!r.multiple,o,!1):r.defaultValue!=null&&Wi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)Qm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=ti(mo.current),ti(On.current),il(t)){if(r=t.stateNode,n=t.memoizedProps,r[Pn]=t,(o=r.nodeValue!==n)&&(e=Zt,e!==null))switch(e.tag){case 3:rl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rl(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=t,t.stateNode=r}return Dt(t),null;case 13:if(We(Ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&qt!==null&&t.mode&1&&!(t.flags&128))hm(),es(),t.flags|=98560,o=!1;else if(o=il(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(O(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[Pn]=t}else es(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dt(t),o=!1}else kn!==null&&(Td(kn),kn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?ht===0&&(ht=3):Bu())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return ns(),Sd(e,t),e===null&&fo(t.stateNode.containerInfo),Dt(t),null;case 10:return ju(t.type._context),Dt(t),null;case 17:return Gt(t.type)&&Al(),Dt(t),null;case 19:if(We(Ge),o=t.memoizedState,o===null)return Dt(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)Rs(o,!1);else{if(ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Wl(e),l!==null){for(t.flags|=128,Rs(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(Ge,Ge.current&1|2),t.child}e=e.sibling}o.tail!==null&&nt()>is&&(t.flags|=128,r=!0,Rs(o,!1),t.lanes=4194304)}else{if(!r)if(e=Wl(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ue)return Dt(t),null}else 2*nt()-o.renderingStartTime>is&&n!==1073741824&&(t.flags|=128,r=!0,Rs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nt(),t.sibling=null,n=Ge.current,Oe(Ge,r?n&1|2:n&1),t):(Dt(t),null);case 22:case 23:return Lu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xt&1073741824&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Ev(e,t){switch(vu(t),t.tag){case 1:return Gt(t.type)&&Al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ns(),We(Kt),We(Rt),Eu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Iu(t),null;case 13:if(We(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Ge),null;case 4:return ns(),null;case 10:return ju(t.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var ll=!1,zt=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Li(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(e,t,r)}else n.current=null}function wd(e,t,n){try{n()}catch(r){Xe(e,t,r)}}var Bh=!1;function Dv(e,t){if(sd=zl,e=em(),yu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,u=0,h=0,p=e,f=null;t:for(;;){for(var S;p!==n||i!==0&&p.nodeType!==3||(c=l+i),p!==o||r!==0&&p.nodeType!==3||(d=l+r),p.nodeType===3&&(l+=p.nodeValue.length),(S=p.firstChild)!==null;)f=p,p=S;for(;;){if(p===e)break t;if(f===n&&++u===i&&(c=l),f===o&&++h===r&&(d=l),(S=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=S}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(od={focusedElem:e,selectionRange:n},zl=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,j=y.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:jn(t.type,w),j);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(I){Xe(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return y=Bh,Bh=!1,y}function Ys(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&wd(t,n,o)}i=i.next}while(i!==r)}}function ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xm(e){var t=e.alternate;t!==null&&(e.alternate=null,Xm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pn],delete t[po],delete t[cd],delete t[fv],delete t[hv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jm(e){return e.tag===5||e.tag===3||e.tag===4}function $h(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ml));else if(r!==4&&(e=e.child,e!==null))for(Cd(e,t,n),e=e.sibling;e!==null;)Cd(e,t,n),e=e.sibling}function kd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kd(e,t,n),e=e.sibling;e!==null;)kd(e,t,n),e=e.sibling}var St=null,Cn=!1;function hr(e,t,n){for(n=n.child;n!==null;)qm(e,t,n),n=n.sibling}function qm(e,t,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(ga,n)}catch{}switch(n.tag){case 5:zt||Li(n,t);case 6:var r=St,i=Cn;St=null,hr(e,t,n),St=r,Cn=i,St!==null&&(Cn?(e=St,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Cn?(e=St,n=n.stateNode,e.nodeType===8?dc(e.parentNode,n):e.nodeType===1&&dc(e,n),ao(e)):dc(St,n.stateNode));break;case 4:r=St,i=Cn,St=n.stateNode.containerInfo,Cn=!0,hr(e,t,n),St=r,Cn=i;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&wd(n,t,l),i=i.next}while(i!==r)}hr(e,t,n);break;case 1:if(!zt&&(Li(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Xe(n,t,c)}hr(e,t,n);break;case 21:hr(e,t,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,hr(e,t,n),zt=r):hr(e,t,n);break;default:hr(e,t,n)}}function Wh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Tv),t.forEach(function(r){var i=Lv.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:St=c.stateNode,Cn=!1;break e;case 3:St=c.stateNode.containerInfo,Cn=!0;break e;case 4:St=c.stateNode.containerInfo,Cn=!0;break e}c=c.return}if(St===null)throw Error(O(160));qm(o,l,i),St=null,Cn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(u){Xe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zm(t,e),t=t.sibling}function Zm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wn(t,e),Mn(e),r&4){try{Ys(3,e,e.return),ja(3,e)}catch(w){Xe(e,e.return,w)}try{Ys(5,e,e.return)}catch(w){Xe(e,e.return,w)}}break;case 1:wn(t,e),Mn(e),r&512&&n!==null&&Li(n,n.return);break;case 5:if(wn(t,e),Mn(e),r&512&&n!==null&&Li(n,n.return),e.flags&32){var i=e.stateNode;try{io(i,"")}catch(w){Xe(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Sg(i,o),Qc(c,l);var u=Qc(c,o);for(l=0;l<d.length;l+=2){var h=d[l],p=d[l+1];h==="style"?bg(i,p):h==="dangerouslySetInnerHTML"?Cg(i,p):h==="children"?io(i,p):iu(i,h,p,u)}switch(c){case"input":Hc(i,o);break;case"textarea":wg(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Wi(i,!!o.multiple,S,!1):f!==!!o.multiple&&(o.defaultValue!=null?Wi(i,!!o.multiple,o.defaultValue,!0):Wi(i,!!o.multiple,o.multiple?[]:"",!1))}i[po]=o}catch(w){Xe(e,e.return,w)}}break;case 6:if(wn(t,e),Mn(e),r&4){if(e.stateNode===null)throw Error(O(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(w){Xe(e,e.return,w)}}break;case 3:if(wn(t,e),Mn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ao(t.containerInfo)}catch(w){Xe(e,e.return,w)}break;case 4:wn(t,e),Mn(e);break;case 13:wn(t,e),Mn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Fu=nt())),r&4&&Wh(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(zt=(u=zt)||h,wn(t,e),zt=u):wn(t,e),Mn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(Q=e,h=e.child;h!==null;){for(p=Q=h;Q!==null;){switch(f=Q,S=f.child,f.tag){case 0:case 11:case 14:case 15:Ys(4,f,f.return);break;case 1:Li(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){Xe(r,n,w)}}break;case 5:Li(f,f.return);break;case 22:if(f.memoizedState!==null){Hh(p);continue}}S!==null?(S.return=f,Q=S):Hh(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=p.stateNode,d=p.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=kg("display",l))}catch(w){Xe(e,e.return,w)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(w){Xe(e,e.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:wn(t,e),Mn(e),r&4&&Wh(e);break;case 21:break;default:wn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jm(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(io(i,""),r.flags&=-33);var o=$h(e);kd(e,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=$h(e);Cd(e,c,l);break;default:throw Error(O(161))}}catch(d){Xe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zv(e,t,n){Q=e,ey(e)}function ey(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||ll;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||zt;c=ll;var u=zt;if(ll=l,(zt=d)&&!u)for(Q=i;Q!==null;)l=Q,d=l.child,l.tag===22&&l.memoizedState!==null?Vh(i):d!==null?(d.return=l,Q=d):Vh(i);for(;o!==null;)Q=o,ey(o),o=o.sibling;Q=i,ll=c,zt=u}Uh(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):Uh(e)}}function Uh(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:zt||ja(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!zt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:jn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ih(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ih(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ao(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}zt||t.flags&512&&jd(t)}catch(f){Xe(t,t.return,f)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Hh(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function Vh(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ja(4,t)}catch(d){Xe(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Xe(t,i,d)}}var o=t.return;try{jd(t)}catch(d){Xe(t,o,d)}break;case 5:var l=t.return;try{jd(t)}catch(d){Xe(t,l,d)}}}catch(d){Xe(t,t.return,d)}if(t===e){Q=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Q=c;break}Q=t.return}}var Rv=Math.ceil,Vl=ar.ReactCurrentDispatcher,Au=ar.ReactCurrentOwner,fn=ar.ReactCurrentBatchConfig,we=0,xt=null,lt=null,jt=0,Xt=0,Bi=Br(0),ht=0,_o=null,ci=0,Ca=0,Pu=0,Qs=null,Ut=null,Fu=0,is=1/0,Yn=null,Kl=!1,bd=null,br=null,al=!1,vr=null,Gl=0,Xs=0,Id=null,wl=-1,jl=0;function Pt(){return we&6?nt():wl!==-1?wl:wl=nt()}function Ir(e){return e.mode&1?we&2&&jt!==0?jt&-jt:gv.transition!==null?(jl===0&&(jl=Og()),jl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Vg(e.type)),e):1}function Tn(e,t,n,r){if(50<Xs)throw Xs=0,Id=null,Error(O(185));Mo(e,n,r),(!(we&2)||e!==xt)&&(e===xt&&(!(we&2)&&(Ca|=n),ht===4&&yr(e,jt)),Yt(e,r),n===1&&we===0&&!(t.mode&1)&&(is=nt()+500,_a&&$r()))}function Yt(e,t){var n=e.callbackNode;g0(e,t);var r=Dl(e,e===xt?jt:0);if(r===0)n!==null&&eh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&eh(n),t===1)e.tag===0?pv(Kh.bind(null,e)):dm(Kh.bind(null,e)),dv(function(){!(we&6)&&$r()}),n=null;else{switch(Lg(r)){case 1:n=cu;break;case 4:n=Pg;break;case 16:n=Tl;break;case 536870912:n=Fg;break;default:n=Tl}n=ay(n,ty.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ty(e,t){if(wl=-1,jl=0,we&6)throw Error(O(327));var n=e.callbackNode;if(Gi()&&e.callbackNode!==n)return null;var r=Dl(e,e===xt?jt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Yl(e,r);else{t=r;var i=we;we|=2;var o=ry();(xt!==e||jt!==t)&&(Yn=null,is=nt()+500,ii(e,t));do try{Av();break}catch(c){ny(e,c)}while(!0);wu(),Vl.current=o,we=i,lt!==null?t=0:(xt=null,jt=0,t=ht)}if(t!==0){if(t===2&&(i=ed(e),i!==0&&(r=i,t=Ed(e,i))),t===1)throw n=_o,ii(e,0),yr(e,r),Yt(e,nt()),n;if(t===6)yr(e,r);else{if(i=e.current.alternate,!(r&30)&&!Nv(i)&&(t=Yl(e,r),t===2&&(o=ed(e),o!==0&&(r=o,t=Ed(e,o))),t===1))throw n=_o,ii(e,0),yr(e,r),Yt(e,nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:Qr(e,Ut,Yn);break;case 3:if(yr(e,r),(r&130023424)===r&&(t=Fu+500-nt(),10<t)){if(Dl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ad(Qr.bind(null,e,Ut,Yn),t);break}Qr(e,Ut,Yn);break;case 4:if(yr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-En(r);o=1<<l,l=t[l],l>i&&(i=l),r&=~o}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rv(r/1960))-r,10<r){e.timeoutHandle=ad(Qr.bind(null,e,Ut,Yn),r);break}Qr(e,Ut,Yn);break;case 5:Qr(e,Ut,Yn);break;default:throw Error(O(329))}}}return Yt(e,nt()),e.callbackNode===n?ty.bind(null,e):null}function Ed(e,t){var n=Qs;return e.current.memoizedState.isDehydrated&&(ii(e,t).flags|=256),e=Yl(e,t),e!==2&&(t=Ut,Ut=n,t!==null&&Td(t)),e}function Td(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function Nv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!zn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yr(e,t){for(t&=~Pu,t&=~Ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-En(t),r=1<<n;e[n]=-1,t&=~r}}function Kh(e){if(we&6)throw Error(O(327));Gi();var t=Dl(e,0);if(!(t&1))return Yt(e,nt()),null;var n=Yl(e,t);if(e.tag!==0&&n===2){var r=ed(e);r!==0&&(t=r,n=Ed(e,r))}if(n===1)throw n=_o,ii(e,0),yr(e,t),Yt(e,nt()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qr(e,Ut,Yn),Yt(e,nt()),null}function Ou(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(is=nt()+500,_a&&$r())}}function di(e){vr!==null&&vr.tag===0&&!(we&6)&&Gi();var t=we;we|=1;var n=fn.transition,r=Te;try{if(fn.transition=null,Te=1,e)return e()}finally{Te=r,fn.transition=n,we=t,!(we&6)&&$r()}}function Lu(){Xt=Bi.current,We(Bi)}function ii(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cv(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(vu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Al();break;case 3:ns(),We(Kt),We(Rt),Eu();break;case 5:Iu(r);break;case 4:ns();break;case 13:We(Ge);break;case 19:We(Ge);break;case 10:ju(r.type._context);break;case 22:case 23:Lu()}n=n.return}if(xt=e,lt=e=Er(e.current,null),jt=Xt=t,ht=0,_o=null,Pu=Ca=ci=0,Ut=Qs=null,ei!==null){for(t=0;t<ei.length;t++)if(n=ei[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}ei=null}return e}function ny(e,t){do{var n=lt;try{if(wu(),vl.current=Hl,Ul){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ul=!1}if(ai=0,mt=dt=Ye=null,Gs=!1,yo=0,Au.current=null,n===null||n.return===null){ht=1,_o=t,lt=null;break}e:{var o=e,l=n.return,c=n,d=t;if(t=jt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,h=c,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var S=Nh(l);if(S!==null){S.flags&=-257,Mh(S,l,c,o,t),S.mode&1&&Rh(o,u,t),t=S,d=u;var y=t.updateQueue;if(y===null){var w=new Set;w.add(d),t.updateQueue=w}else y.add(d);break e}else{if(!(t&1)){Rh(o,u,t),Bu();break e}d=Error(O(426))}}else if(Ue&&c.mode&1){var j=Nh(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Mh(j,l,c,o,t),_u(rs(d,c));break e}}o=d=rs(d,c),ht!==4&&(ht=2),Qs===null?Qs=[o]:Qs.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=Lm(o,d,t);bh(o,m);break e;case 1:c=d;var g=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(br===null||!br.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var I=Bm(o,c,t);bh(o,I);break e}}o=o.return}while(o!==null)}sy(n)}catch(N){t=N,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function ry(){var e=Vl.current;return Vl.current=Hl,e===null?Hl:e}function Bu(){(ht===0||ht===3||ht===2)&&(ht=4),xt===null||!(ci&268435455)&&!(Ca&268435455)||yr(xt,jt)}function Yl(e,t){var n=we;we|=2;var r=ry();(xt!==e||jt!==t)&&(Yn=null,ii(e,t));do try{Mv();break}catch(i){ny(e,i)}while(!0);if(wu(),we=n,Vl.current=r,lt!==null)throw Error(O(261));return xt=null,jt=0,ht}function Mv(){for(;lt!==null;)iy(lt)}function Av(){for(;lt!==null&&!o0();)iy(lt)}function iy(e){var t=ly(e.alternate,e,Xt);e.memoizedProps=e.pendingProps,t===null?sy(e):lt=t,Au.current=null}function sy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ev(n,t),n!==null){n.flags&=32767,lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ht=6,lt=null;return}}else if(n=Iv(n,t,Xt),n!==null){lt=n;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);ht===0&&(ht=5)}function Qr(e,t,n){var r=Te,i=fn.transition;try{fn.transition=null,Te=1,Pv(e,t,n,r)}finally{fn.transition=i,Te=r}return null}function Pv(e,t,n,r){do Gi();while(vr!==null);if(we&6)throw Error(O(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(m0(e,o),e===xt&&(lt=xt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,ay(Tl,function(){return Gi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=fn.transition,fn.transition=null;var l=Te;Te=1;var c=we;we|=4,Au.current=null,Dv(e,n),Zm(n,e),nv(od),zl=!!sd,od=sd=null,e.current=n,zv(n),l0(),we=c,Te=l,fn.transition=o}else e.current=n;if(al&&(al=!1,vr=e,Gl=i),o=e.pendingLanes,o===0&&(br=null),d0(n.stateNode),Yt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=bd,bd=null,e;return Gl&1&&e.tag!==0&&Gi(),o=e.pendingLanes,o&1?e===Id?Xs++:(Xs=0,Id=e):Xs=0,$r(),null}function Gi(){if(vr!==null){var e=Lg(Gl),t=fn.transition,n=Te;try{if(fn.transition=null,Te=16>e?16:e,vr===null)var r=!1;else{if(e=vr,vr=null,Gl=0,we&6)throw Error(O(331));var i=we;for(we|=4,Q=e.current;Q!==null;){var o=Q,l=o.child;if(Q.flags&16){var c=o.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(Q=u;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:Ys(8,h,o)}var p=h.child;if(p!==null)p.return=h,Q=p;else for(;Q!==null;){h=Q;var f=h.sibling,S=h.return;if(Xm(h),h===u){Q=null;break}if(f!==null){f.return=S,Q=f;break}Q=S}}}var y=o.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}Q=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Q=l;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ys(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Q=m;break e}Q=o.return}}var g=e.current;for(Q=g;Q!==null;){l=Q;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,Q=x;else e:for(l=g;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ja(9,c)}}catch(N){Xe(c,c.return,N)}if(c===l){Q=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,Q=I;break e}Q=c.return}}if(we=i,$r(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(ga,e)}catch{}r=!0}return r}finally{Te=n,fn.transition=t}}return!1}function Gh(e,t,n){t=rs(n,t),t=Lm(e,t,1),e=kr(e,t,1),t=Pt(),e!==null&&(Mo(e,1,t),Yt(e,t))}function Xe(e,t,n){if(e.tag===3)Gh(e,e,n);else for(;t!==null;){if(t.tag===3){Gh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){e=rs(n,e),e=Bm(t,e,1),t=kr(t,e,1),e=Pt(),t!==null&&(Mo(t,1,e),Yt(t,e));break}}t=t.return}}function Fv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,xt===e&&(jt&n)===n&&(ht===4||ht===3&&(jt&130023424)===jt&&500>nt()-Fu?ii(e,0):Pu|=n),Yt(e,t)}function oy(e,t){t===0&&(e.mode&1?(t=qo,qo<<=1,!(qo&130023424)&&(qo=4194304)):t=1);var n=Pt();e=rr(e,t),e!==null&&(Mo(e,t,n),Yt(e,n))}function Ov(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oy(e,n)}function Lv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),oy(e,n)}var ly;ly=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ht=!1,bv(e,t,n);Ht=!!(e.flags&131072)}else Ht=!1,Ue&&t.flags&1048576&&um(t,Ol,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sl(e,t),e=t.pendingProps;var i=Zi(t,Rt.current);Ki(t,n),i=Du(null,t,r,e,i,n);var o=zu();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gt(r)?(o=!0,Pl(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ku(t),i.updater=wa,t.stateNode=i,i._reactInternals=t,gd(t,r,e,n),t=xd(null,t,r,!0,o,n)):(t.tag=0,Ue&&o&&xu(t),Mt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=$v(r),e=jn(r,e),i){case 0:t=yd(null,t,r,e,n);break e;case 1:t=Fh(null,t,r,e,n);break e;case 11:t=Ah(null,t,r,e,n);break e;case 14:t=Ph(null,t,r,jn(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),yd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),Fh(e,t,r,i,n);case 3:e:{if(Hm(t),e===null)throw Error(O(387));r=t.pendingProps,o=t.memoizedState,i=o.element,ym(e,t),$l(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=rs(Error(O(423)),t),t=Oh(e,t,r,n,i);break e}else if(r!==i){i=rs(Error(O(424)),t),t=Oh(e,t,r,n,i);break e}else for(qt=Cr(t.stateNode.containerInfo.firstChild),Zt=t,Ue=!0,kn=null,n=gm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(es(),r===i){t=ir(e,t,n);break e}Mt(e,t,r,n)}t=t.child}return t;case 5:return xm(t),e===null&&fd(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,ld(r,i)?l=null:o!==null&&ld(r,o)&&(t.flags|=32),Um(e,t),Mt(e,t,l,n),t.child;case 6:return e===null&&fd(t),null;case 13:return Vm(e,t,n);case 4:return bu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ts(t,null,r,n):Mt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),Ah(e,t,r,i,n);case 7:return Mt(e,t,t.pendingProps,n),t.child;case 8:return Mt(e,t,t.pendingProps.children,n),t.child;case 12:return Mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,Oe(Ll,r._currentValue),r._currentValue=l,o!==null)if(zn(o.value,l)){if(o.children===i.children&&!Kt.current){t=ir(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Zn(-1,n&-n),d.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?d.next=d:(d.next=h.next,h.next=d),u.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),hd(o.return,n,t),c.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(O(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),hd(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Mt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ki(t,n),i=hn(i),r=r(i),t.flags|=1,Mt(e,t,r,n),t.child;case 14:return r=t.type,i=jn(r,t.pendingProps),i=jn(r.type,i),Ph(e,t,r,i,n);case 15:return $m(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),Sl(e,t),t.tag=1,Gt(r)?(e=!0,Pl(t)):e=!1,Ki(t,n),Om(t,r,i),gd(t,r,i,n),xd(null,t,r,!0,e,n);case 19:return Km(e,t,n);case 22:return Wm(e,t,n)}throw Error(O(156,t.tag))};function ay(e,t){return Ag(e,t)}function Bv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,n,r){return new Bv(e,t,n,r)}function $u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $v(e){if(typeof e=="function")return $u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ou)return 11;if(e===lu)return 14}return 2}function Er(e,t){var n=e.alternate;return n===null?(n=dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cl(e,t,n,r,i,o){var l=2;if(r=e,typeof e=="function")$u(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Di:return si(n.children,i,o,t);case su:l=8,i|=8;break;case Lc:return e=dn(12,n,t,i|2),e.elementType=Lc,e.lanes=o,e;case Bc:return e=dn(13,n,t,i),e.elementType=Bc,e.lanes=o,e;case $c:return e=dn(19,n,t,i),e.elementType=$c,e.lanes=o,e;case xg:return ka(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mg:l=10;break e;case yg:l=9;break e;case ou:l=11;break e;case lu:l=14;break e;case pr:l=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=dn(l,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function si(e,t,n,r){return e=dn(7,e,r,t),e.lanes=n,e}function ka(e,t,n,r){return e=dn(22,e,r,t),e.elementType=xg,e.lanes=n,e.stateNode={isHidden:!1},e}function xc(e,t,n){return e=dn(6,e,null,t),e.lanes=n,e}function vc(e,t,n){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wv(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Za(0),this.expirationTimes=Za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Za(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wu(e,t,n,r,i,o,l,c,d){return e=new Wv(e,t,n,c,d),t===1?(t=1,o===!0&&(t|=8)):t=0,o=dn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ku(o),e}function Uv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cy(e){if(!e)return Mr;e=e._reactInternals;e:{if(yi(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(Gt(n))return cm(e,n,t)}return t}function dy(e,t,n,r,i,o,l,c,d){return e=Wu(n,r,!0,e,i,o,l,c,d),e.context=cy(null),n=e.current,r=Pt(),i=Ir(n),o=Zn(r,i),o.callback=t??null,kr(n,o,i),e.current.lanes=i,Mo(e,i,r),Yt(e,r),e}function ba(e,t,n,r){var i=t.current,o=Pt(),l=Ir(i);return n=cy(n),t.context===null?t.context=n:t.pendingContext=n,t=Zn(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kr(i,t,l),e!==null&&(Tn(e,i,l,o),xl(e,i,l)),l}function Ql(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Uu(e,t){Yh(e,t),(e=e.alternate)&&Yh(e,t)}function Hv(){return null}var uy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hu(e){this._internalRoot=e}Ia.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));ba(e,t,null,null)};Ia.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;di(function(){ba(null,e,null,null)}),t[nr]=null}};function Ia(e){this._internalRoot=e}Ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mr.length&&t!==0&&t<mr[n].priority;n++);mr.splice(n,0,e),n===0&&Hg(e)}};function Vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ea(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qh(){}function Vv(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Ql(l);o.call(u)}}var l=dy(t,r,e,0,null,!1,!1,"",Qh);return e._reactRootContainer=l,e[nr]=l.current,fo(e.nodeType===8?e.parentNode:e),di(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var u=Ql(d);c.call(u)}}var d=Wu(e,0,!1,null,null,!1,!1,"",Qh);return e._reactRootContainer=d,e[nr]=d.current,fo(e.nodeType===8?e.parentNode:e),di(function(){ba(t,d,n,r)}),d}function Ta(e,t,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var c=i;i=function(){var d=Ql(l);c.call(d)}}ba(t,l,e,i)}else l=Vv(n,t,e,i,r);return Ql(l)}Bg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bs(t.pendingLanes);n!==0&&(du(t,n|1),Yt(t,nt()),!(we&6)&&(is=nt()+500,$r()))}break;case 13:di(function(){var r=rr(e,1);if(r!==null){var i=Pt();Tn(r,e,1,i)}}),Uu(e,1)}};uu=function(e){if(e.tag===13){var t=rr(e,134217728);if(t!==null){var n=Pt();Tn(t,e,134217728,n)}Uu(e,134217728)}};$g=function(e){if(e.tag===13){var t=Ir(e),n=rr(e,t);if(n!==null){var r=Pt();Tn(n,e,t,r)}Uu(e,t)}};Wg=function(){return Te};Ug=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};Jc=function(e,t,n){switch(t){case"input":if(Hc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=va(r);if(!i)throw Error(O(90));_g(r),Hc(r,i)}}}break;case"textarea":wg(e,n);break;case"select":t=n.value,t!=null&&Wi(e,!!n.multiple,t,!1)}};Tg=Ou;Dg=di;var Kv={usingClientEntryPoint:!1,Events:[Po,Mi,va,Ig,Eg,Ou]},Ns={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gv={bundleType:Ns.bundleType,version:Ns.version,rendererPackageName:Ns.rendererPackageName,rendererConfig:Ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ng(e),e===null?null:e.stateNode},findFiberByHostInstance:Ns.findFiberByHostInstance||Hv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{ga=cl.inject(Gv),Fn=cl}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kv;nn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(t))throw Error(O(200));return Uv(e,t,null,n)};nn.createRoot=function(e,t){if(!Vu(e))throw Error(O(299));var n=!1,r="",i=uy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Wu(e,1,!1,null,null,n,!1,r,i),e[nr]=t.current,fo(e.nodeType===8?e.parentNode:e),new Hu(t)};nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=Ng(t),e=e===null?null:e.stateNode,e};nn.flushSync=function(e){return di(e)};nn.hydrate=function(e,t,n){if(!Ea(t))throw Error(O(200));return Ta(null,e,t,!0,n)};nn.hydrateRoot=function(e,t,n){if(!Vu(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=uy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=dy(t,null,e,1,n??null,i,!1,o,l),e[nr]=t.current,fo(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ia(t)};nn.render=function(e,t,n){if(!Ea(t))throw Error(O(200));return Ta(null,e,t,!1,n)};nn.unmountComponentAtNode=function(e){if(!Ea(e))throw Error(O(40));return e._reactRootContainer?(di(function(){Ta(null,null,e,!1,function(){e._reactRootContainer=null,e[nr]=null})}),!0):!1};nn.unstable_batchedUpdates=Ou;nn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ea(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Ta(e,t,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function fy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fy)}catch(e){console.error(e)}}fy(),fg.exports=nn;var Yv=fg.exports,Xh=Yv;Fc.createRoot=Xh.createRoot,Fc.hydrateRoot=Xh.hydrateRoot;const Me={students:[],rooms:[{id:"601",name:"",floor:"6F",building:"",equipment:" , , ",rules:"  "},{id:"602",name:"3D",floor:"6F",building:"",equipment:" 3",rules:"     "},{id:"604",name:"",floor:"6F",building:"",equipment:"3D Modeling    ",rules:"   "},{id:"605",name:"",floor:"6F",building:"",equipment:"  1",rules:" ,   "},{id:"606",name:"",floor:"6F",building:"",equipment:" 1",rules:"  OFF  "}],equipment:[{id:"001",name:" ",category:" ",available:4,total:4,deposit:!1,maxDays:1,icon:""},{id:"002",name:"",category:" ",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"003",name:"",category:" ",available:11,total:11,deposit:!1,maxDays:1,icon:""},{id:"004",name:"",category:" ",available:7,total:7,deposit:!1,maxDays:1,icon:""},{id:"005",name:"",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"006",name:"",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"007",name:"",category:" ",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"008",name:"",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"009",name:"",category:"",available:3,total:3,deposit:!1,maxDays:1,icon:""},{id:"010",name:" ",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"011",name:" ",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"012",name:" ",category:"",available:5,total:5,deposit:!1,maxDays:1,icon:""},{id:"013",name:" ",category:"",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"014",name:"",category:"",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"015",name:"",category:"",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"016",name:"",category:"",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"017",name:"",category:"",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"018",name:"",category:"",available:7,total:7,deposit:!1,maxDays:1,icon:""},{id:"019",name:"",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"020",name:"",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"021",name:" ",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"022",name:" ",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"023",name:"",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"024",name:" ()",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"025",name:" ()",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"026",name:" ()",category:" ",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"027",name:"",category:" ",available:2,total:2,deposit:!1,maxDays:1,icon:""},{id:"028",name:"",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"029",name:" ",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"030",name:"",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""},{id:"031",name:" ",category:"",available:1,total:1,deposit:!1,maxDays:1,icon:""}],equipmentReturnChecklist:["   ","//   "],timeSlots:[{id:"01",label:"09:0010:00",start:9},{id:"02",label:"10:0011:00",start:10},{id:"03",label:"11:0012:00",start:11},{id:"04",label:"12:0013:00",start:12},{id:"05",label:"13:0014:00",start:13},{id:"06",label:"14:0015:00",start:14},{id:"07",label:"15:0016:00",start:15},{id:"08",label:"16:0017:00",start:16}],workers:[{id:"001",name:"A",shift:" (0913)",username:"worker1",password:"1234"},{id:"002",name:"B",shift:" (1318)",username:"worker2",password:"1234"},{id:"003",name:"C",shift:" (1821)",username:"worker3",password:"1234"}],safetySheet:{url:"https://script.google.com/macros/s/AKfycbwTbgP51KGhGWIFY8oODXg1XUA3Q2lYEKvCgMD24Aqvwz12wKlhT7yZkvY3zvlievjFrg/exec",sheetName:"1",columns:{studentId:"",studentName:"",year:"",dept:"",safetyTrained:"",email:""}},emailNotify:{url:"https://script.google.com/macros/s/AKfycbxytKXE1KSMUmuA3BBZ7lPdvrbQunIaJxiAopYh6cWi4ABr_SHOT2ISurah_v5JqLNr/exec",recipients:["saku20392@kookmin.ac.kr"],enabled:!0},adminAccount:{username:"admin",password:"admin1234",name:""},apiKey:"kmu-arch-2026-secret"},Qv=Me.students,qr=Me.rooms,dl=Me.equipment,_c=Me.timeSlots,Sc=Me.workers,Dd=Me.adminAccount,ss=()=>`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,Ft=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`},Yi=()=>new Date().toISOString().split("T")[0],Xv=()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]},Jv=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]},qv=e=>{if(!e)return"";const[t,n,r]=e.split("-");return`${n}/${r}`},de={async get(e){try{const t=await window.storage.get(e);return t?JSON.parse(t.value):null}catch{return null}},async set(e,t){try{return await window.storage.set(e,JSON.stringify(t)),!0}catch{return!1}},async listByPrefix(e){try{const t=await window.storage.list(e);return(t==null?void 0:t.keys)||[]}catch{return[]}}},ke=({d:e,size:t=18,color:n="currentColor",sw:r=1.8})=>s.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",flexShrink:0},children:typeof e=="string"?s.jsx("path",{d:e}):e}),b={door:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),s.jsx("path",{d:"M9 3v18"}),s.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor"})]})}),tool:e=>s.jsx(ke,{...e,d:"M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"}),check:e=>s.jsx(ke,{...e,d:"M20 6L9 17l-5-5"}),x:e=>s.jsx(ke,{...e,d:"M18 6L6 18M6 6l12 12"}),bell:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"}),s.jsx("path",{d:"M13.73 21a2 2 0 01-3.46 0"})]})}),user:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),calendar:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),s.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]})}),log:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),s.jsx("path",{d:"M14 2v6h6"}),s.jsx("path",{d:"M16 13H8M16 17H8M10 9H8"})]})}),home:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),s.jsx("path",{d:"M9 22V12h6v10"})]})}),download:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),s.jsx("path",{d:"M7 10l5 5 5-5"}),s.jsx("path",{d:"M12 15V3"})]})}),search:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),alert:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),s.jsx("path",{d:"M12 9v4M12 17h.01"})]})}),refresh:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M23 4v6h-6"}),s.jsx("path",{d:"M1 20v-6h6"}),s.jsx("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})]})}),list:e=>s.jsx(ke,{...e,d:s.jsx(s.Fragment,{children:s.jsx("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})})}),grid:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),s.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),s.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),info:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M12 16v-4M12 8h.01"})]})}),logout:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),s.jsx("path",{d:"M16 17l5-5-5-5"}),s.jsx("path",{d:"M21 12H9"})]})}),history:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M12 6v6l4 2"})]})}),package:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M16.5 9.4l-9-5.19"}),s.jsx("path",{d:"M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"}),s.jsx("path",{d:"M3.27 6.96L12 12.01l8.73-5.05"}),s.jsx("path",{d:"M12 22.08V12"})]})}),shield:e=>s.jsx(ke,{...e,d:s.jsx(s.Fragment,{children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),edit:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),trash:e=>s.jsx(ke,{...e,d:s.jsx(s.Fragment,{children:s.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})})}),plus:e=>s.jsx(ke,{...e,d:"M12 5v14M5 12h14"}),users:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"})]})}),eye:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),eyeOff:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19M1 1l22 22"}),s.jsx("path",{d:"M14.12 14.12a3 3 0 11-4.24-4.24"})]})}),upload:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),s.jsx("path",{d:"M17 8l-5-5-5 5"}),s.jsx("path",{d:"M12 3v12"})]})}),file:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z"}),s.jsx("path",{d:"M13 2v7h7"})]})}),loading:e=>s.jsx(ke,{...e,d:s.jsx(s.Fragment,{children:s.jsx("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})}),style:{animation:"spin 1s linear infinite",...e==null?void 0:e.style}}),sun:e=>s.jsx(ke,{...e,d:s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]})}),moon:e=>s.jsx(ke,{...e,d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"})},hy={bg:"#1a1b1e",surface:"#222326",surfaceHover:"#2a2b2f",card:"#252629",border:"#1c1e22",borderLight:"#252830",text:"#e4e2de",textMuted:"#7a7d85",textDim:"#4a4d55",accent:"#d4a053",accentDim:"#8b6b38",accentBg:"rgba(212,160,83,0.08)",accentBorder:"rgba(212,160,83,0.2)",blue:"#4a90d9",blueBg:"rgba(74,144,217,0.08)",blueBorder:"rgba(74,144,217,0.2)",green:"#5cb87a",greenBg:"rgba(92,184,122,0.08)",greenBorder:"rgba(92,184,122,0.2)",red:"#d45d5d",redBg:"rgba(212,93,93,0.08)",redBorder:"rgba(212,93,93,0.2)",yellow:"#d4b34a",yellowBg:"rgba(212,179,74,0.08)",yellowBorder:"rgba(212,179,74,0.15)"},Zv={bg:"#f0f1f3",surface:"#e8e9ec",surfaceHover:"#dcdde0",card:"#ffffff",border:"#d0d2d6",borderLight:"#c0c2c6",text:"#1a1b1e",textMuted:"#5a5d65",textDim:"#9a9da5",accent:"#e8a832",accentDim:"#b8862d",accentBg:"rgba(232,168,50,0.12)",accentBorder:"rgba(232,168,50,0.3)",blue:"#2e73c0",blueBg:"rgba(46,115,192,0.1)",blueBorder:"rgba(46,115,192,0.25)",green:"#3a9a58",greenBg:"rgba(58,154,88,0.1)",greenBorder:"rgba(58,154,88,0.25)",red:"#c0392b",redBg:"rgba(192,57,43,0.08)",redBorder:"rgba(192,57,43,0.2)",yellow:"#b89a2a",yellowBg:"rgba(184,154,42,0.1)",yellowBorder:"rgba(184,154,42,0.2)"},a={...hy,font:"'DM Sans', 'Noto Sans KR', sans-serif",fontMono:"'JetBrains Mono', 'Fira Code', monospace",radius:10,radiusSm:6},re=({children:e,color:t="accent",style:n})=>{const r={accent:{bg:a.accentBg,border:a.accentBorder,text:a.accent},blue:{bg:a.blueBg,border:a.blueBorder,text:a.blue},green:{bg:a.greenBg,border:a.greenBorder,text:a.green},red:{bg:a.redBg,border:a.redBorder,text:a.red},yellow:{bg:a.yellowBg,border:a.yellowBorder,text:a.yellow},dim:{bg:"rgba(255,255,255,0.04)",border:a.border,text:a.textMuted}},i=r[t]||r.accent;return s.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 10px",borderRadius:5,fontSize:11,fontWeight:600,letterSpacing:"0.2px",background:i.bg,border:`1px solid ${i.border}`,color:i.text,...n},children:e})},ne=({children:e,style:t,onClick:n,hover:r})=>s.jsx("div",{onClick:n,style:{background:a.card,borderRadius:a.radius,border:`1px solid ${a.border}`,padding:20,transition:"all 0.2s ease",cursor:n?"pointer":"default",...t},onMouseEnter:i=>{(r||n)&&(i.currentTarget.style.borderColor=a.borderLight,i.currentTarget.style.background=a.surfaceHover)},onMouseLeave:i=>{(r||n)&&(i.currentTarget.style.borderColor=a.border,i.currentTarget.style.background=a.card)},children:e}),H=({children:e,variant:t="primary",disabled:n,onClick:r,style:i,size:o="md"})=>{const c={primary:{bg:a.accent,color:"#0a0a0a",hoverBg:"#e0b060"},secondary:{bg:a.surfaceHover,color:a.text,hoverBg:"#1e2025"},danger:{bg:a.redBg,color:a.red,hoverBg:"rgba(212,93,93,0.15)"},ghost:{bg:"transparent",color:a.textMuted,hoverBg:"rgba(255,255,255,0.04)"},success:{bg:a.greenBg,color:a.green,hoverBg:"rgba(92,184,122,0.15)"}}[t],u={sm:{padding:"6px 14px",fontSize:12},md:{padding:"10px 22px",fontSize:13},lg:{padding:"14px 28px",fontSize:15}}[o];return s.jsx("button",{disabled:n,onClick:r,style:{...u,borderRadius:a.radiusSm,border:t==="ghost"?`1px solid ${a.border}`:"none",cursor:n?"not-allowed":"pointer",fontWeight:600,fontFamily:a.font,background:n?a.surfaceHover:c.bg,color:n?a.textDim:c.color,opacity:n?.5:1,transition:"all 0.15s",display:"inline-flex",alignItems:"center",gap:6,...i},onMouseEnter:h=>{n||(h.currentTarget.style.background=c.hoverBg)},onMouseLeave:h=>{n||(h.currentTarget.style.background=n?a.surfaceHover:c.bg)},children:e})},ye=({label:e,...t})=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e&&s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.text,letterSpacing:"0.5px",textTransform:"uppercase"},children:e}),s.jsx("input",{...t,style:{width:"100%",padding:"10px 14px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:14,fontFamily:a.font,outline:"none",boxSizing:"border-box",transition:"border-color 0.2s",height:42,...t.style},onFocus:n=>n.target.style.borderColor=a.accent,onBlur:n=>n.target.style.borderColor=a.border})]}),ct=({icon:e,children:t,right:n})=>s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:14,fontWeight:700,color:a.text},children:[e," ",t]}),n]}),Jt=({icon:e,text:t})=>s.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:a.textDim},children:[s.jsx("div",{style:{marginBottom:8,opacity:.5},children:e}),s.jsx("div",{style:{fontSize:13},children:t})]}),Ku=({tabs:e,active:t,onChange:n,isMobile:r})=>s.jsx("div",{style:{display:"flex",gap:2,background:a.surface,borderRadius:a.radius,padding:3,marginBottom:r?16:24,border:`1px solid ${a.border}`,...r?{overflowX:"auto",WebkitOverflowScrolling:"touch",scrollbarWidth:"none"}:{}},children:e.map(i=>s.jsxs("button",{onClick:()=>n(i.id),style:{flex:r?"0 0 auto":1,padding:r?"8px 14px":"10px 8px",borderRadius:a.radiusSm+1,border:"none",cursor:"pointer",fontSize:r?11.5:12.5,fontWeight:600,fontFamily:a.font,transition:"all 0.2s",whiteSpace:"nowrap",background:t===i.id?a.card:"transparent",color:t===i.id?a.text:a.textMuted,boxShadow:t===i.id?"0 1px 3px rgba(0,0,0,0.3)":"none",display:"flex",alignItems:"center",justifyContent:"center",gap:6,position:"relative"},children:[i.icon," ",i.label,i.badge>0&&!i.badges&&s.jsx("span",{style:{position:"absolute",top:4,right:8,minWidth:16,height:16,borderRadius:8,background:a.red,color:"#fff",fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 4px"},children:i.badge}),i.badges&&s.jsx("div",{style:{position:"absolute",top:2,right:4,display:"flex",gap:3},children:i.badges.map((o,l)=>o.count>0&&s.jsx("span",{style:{minWidth:16,height:16,borderRadius:8,background:o.color,color:"#fff",fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 4px"},children:o.count},l))})]},i.id))});function e_(){const[e,t]=C.useState("login"),[n,r]=C.useState(null),[i,o]=C.useState(null),[l,c]=C.useState(!0),[d,u]=C.useState(null),[h,p]=C.useState(()=>window.innerWidth<768),[f,S]=C.useState(()=>{try{return localStorage.getItem("theme-mode")==="dark"}catch{return!1}}),y=C.useCallback(()=>S(k=>!k),[]);C.useEffect(()=>{const k=()=>p(window.innerWidth<768);return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),C.useEffect(()=>{try{localStorage.setItem("theme-mode",f?"dark":"light")}catch{}},[f]);const[w,j]=C.useState([]),[m,g]=C.useState([]),[x,I]=C.useState([]),[N,F]=C.useState([]),[$,W]=C.useState(Sc),[D,K]=C.useState({reservationWebhookUrl:"https://script.google.com/macros/s/AKfycbwyzzFFUQRLjITW6D6YVw4RzVoB4ye80-tb7Tsan4RspCPAIdq3pV4C9_ixeGp6Hdotpg/exec",printWebhookUrl:"https://script.google.com/macros/s/AKfycbxoF7nFIP6neZjGegxwwMYZn5FIt2nXsoPsXUIsWxv5nqmcglf7i9K34PcgL2XutNwD/exec"}),[ie,P]=C.useState({}),[X,ce]=C.useState({}),[J,A]=C.useState({}),[te,L]=C.useState({}),[ee,T]=C.useState([]),[q,ue]=C.useState([]),[he,Re]=C.useState(0),[He,rt]=C.useState({}),[Ie,mn]=C.useState(!1),Ve=C.useMemo(()=>[{id:"c1",content:"    ?",createdAt:"2026-02-07T10:30:00",comments:[{id:"cm1",content:"  !",createdAt:"2026-02-07T11:00:00"},{id:"cm2",content:"    ",createdAt:"2026-02-07T12:30:00"}]},{id:"c2",content:"4    !",createdAt:"2026-02-06T15:20:00",comments:[{id:"cm3",content:" ",createdAt:"2026-02-06T16:00:00"}]},{id:"c3",content:"     ",createdAt:"2026-02-05T09:15:00",comments:[]}],[]),[Qt,E]=C.useState(Ve),V=C.useCallback(k=>{E(G=>{const U=typeof k=="function"?k(G):k;return de.set("communityPosts",U),U})},[]),M=C.useMemo(()=>[{id:"exh1",title:"archi.zip",description:"    ",dates:"2026.02.05 ~ 02.09",location:"",instagramUrl:"https://www.instagram.com/archi.zip_kmu",posterUrl:"/archzip_poster.jpeg",createdAt:"2026-02-01T00:00:00"}],[]),[le,De]=C.useState(M),bt=C.useCallback(k=>{De(G=>{const U=typeof k=="function"?k(G):k;return de.set("exhibitionPosts",U),U})},[]),[it,Ee]=C.useState(dl),pt=C.useCallback(k=>{Ee(G=>{const U=typeof k=="function"?k(G):k;return de.set("equipmentDB",U),U})},[]);C.useEffect(()=>{(async()=>{try{const[k,G]=await Promise.all([de.get("session"),de.get("rememberSession")]),U=G??!0;c(U),U&&(k!=null&&k.user)&&(k!=null&&k.role)&&u({user:k.user,role:k.role}),mn(!0);const[Y,_e,Le,Se,be,Ce,_t,It,Kn,Wt,xn,_s,ji,Ss,Hr,ws,Ci,vn]=await Promise.all([de.get("workers"),de.get("warnings"),de.get("blacklist"),de.get("certificates"),de.get("reservations"),de.get("equipRentals"),de.get("logs"),de.get("notifications"),de.get("sheetConfig"),de.get("overdueFlags"),de.get("inquiries"),de.get("printRequests"),de.get("visitCount"),de.get("visitedUsers"),de.get("communityPosts"),de.get("exhibitionPosts"),de.get("exhibitionData"),de.get("equipmentDB")]);if(Y&&W(Y),_e&&ce(_e),Le&&A(Le),Se&&L(Se),be&&j(be),Ce&&g(Ce),_t&&I(_t),It&&F(It),Kn&&K(Kn),Wt&&P(Wt),xn&&T(xn),_s&&ue(_s),ji&&Re(ji),Ss&&rt(Ss),Hr?E(Hr):de.set("communityPosts",Ve),ws)De(ws);else if(Ci){const v=[{...Ci,id:`exh${Date.now()}`,createdAt:new Date().toISOString()}];De(v),de.set("exhibitionPosts",v)}else de.set("exhibitionPosts",M);if(vn){const v=vn.map(Z=>Z.id).sort().join(","),z=dl.map(Z=>Z.id).sort().join(",");v!==z?(Ee(dl),de.set("equipmentDB",dl)):Ee(vn)}}catch(k){console.error("Initial data load failed:",k),mn(!0)}})()},[]);const ae=C.useCallback(async(k,G)=>{await de.set(k,G)},[]),Ze=C.useCallback((k,G,U={})=>{I(Y=>{const _e=[{id:ss(),time:Ft(),action:k,type:G,...U},...Y].slice(0,500);return ae("logs",_e),_e})},[ae]),sn=C.useCallback((k,G="info",U=!1)=>{F(Y=>{const _e=[{id:ss(),text:k,type:G,urgent:U,read:!1,time:Ft()},...Y].slice(0,200);return ae("notifications",_e),_e})},[ae]),on=C.useCallback(k=>{j(G=>{const U=typeof k=="function"?k(G):k;return ae("reservations",U),U})},[ae]),Wr=C.useCallback(k=>{g(G=>{const U=typeof k=="function"?k(G):k;return ae("equipRentals",U),U})},[ae]),Rn=C.useCallback(k=>{W(G=>{const U=typeof k=="function"?k(G):k;return ae("workers",U),U})},[ae]),Ur=C.useCallback(k=>{K(G=>{const U=typeof k=="function"?k(G):k;return ae("sheetConfig",U),U})},[ae]),yn=C.useCallback(k=>{P(G=>{const U=typeof k=="function"?k(G):k;return ae("overdueFlags",U),U})},[ae]),Nn=C.useCallback(k=>{ce(G=>{const U=typeof k=="function"?k(G):k;return ae("warnings",U),U})},[ae]),Wn=C.useCallback(k=>{A(G=>{const U=typeof k=="function"?k(G):k;return ae("blacklist",U),U})},[ae]),dr=C.useCallback(k=>{L(G=>{const U=typeof k=="function"?k(G):k;return ae("certificates",U),U})},[ae]),ur=C.useCallback(k=>{T(G=>{const U=typeof k=="function"?k(G):k;return ae("inquiries",U),U})},[ae]),Un=C.useCallback(k=>{ue(G=>{const U=typeof k=="function"?k(G):k;return ae("printRequests",U),U})},[ae]),Hn=C.useCallback(k=>{F(G=>{const U=G.map(Y=>Y.id===k?{...Y,read:!0}:Y);return ae("notifications",U),U})},[ae]),Si=C.useCallback(()=>{F(k=>{const G=k.map(U=>({...U,read:!0}));return ae("notifications",G),G})},[ae]),wi=C.useCallback(async(k,G)=>{var Le;const U=Me==null?void 0:Me.safetySheet,Y=(Le=U==null?void 0:U.url)==null?void 0:Le.trim();if(!Y)return{ok:!1,error:" URL  ."};const _e={action:"verify_student",key:Me.apiKey,studentId:k==null?void 0:k.trim(),studentName:G==null?void 0:G.trim(),sheetName:U==null?void 0:U.sheetName,columns:U==null?void 0:U.columns};try{const Se=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}),be=await Se.text();let Ce=null;try{Ce=JSON.parse(be)}catch{Ce=null}return Se.ok?Ce?Ce.found?{ok:!0,student:Ce.student||{},safetyTrained:Ce.safetyTrained??!0}:{ok:!1,error:"   ."}:{ok:!1,error:"  "}:{ok:!1,error:(Ce==null?void 0:Ce.error)||be||`HTTP ${Se.status}`}}catch(Se){try{const be=new URLSearchParams({action:"verify_student",key:Me.apiKey,studentId:_e.studentId||"",studentName:_e.studentName||"",sheetName:_e.sheetName||""}),Ce=await fetch(`${Y}?${be.toString()}`,{method:"GET"}),_t=await Ce.text();let It=null;try{It=JSON.parse(_t)}catch{It=null}return Ce.ok?It?It.found?{ok:!0,student:It.student||{},safetyTrained:It.safetyTrained??!0}:{ok:!1,error:"   ."}:{ok:!1,error:"  "}:{ok:!1,error:(It==null?void 0:It.error)||_t||`HTTP ${Ce.status}`}}catch(be){return{ok:!1,error:(be==null?void 0:be.message)||(Se==null?void 0:Se.message)||" "}}}},[]),vt=C.useCallback(async({to:k,subject:G,body:U})=>{var Se;const Y=Me==null?void 0:Me.emailNotify;Y!=null&&Y.enabled;const _e=(Se=Y==null?void 0:Y.url)==null?void 0:Se.trim();if(!_e)return{skipped:!0};const Le=k||(Array.isArray(Y==null?void 0:Y.recipients)?Y.recipients.join(","):String((Y==null?void 0:Y.recipients)||""));if(!Le)return{skipped:!0};try{const be={action:"send_email",key:Me.apiKey,to:Le,subject:G,body:U,senderName:" "},Ce=await fetch(_e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(be)});if(!Ce.ok)throw new Error(`HTTP ${Ce.status}`);return{ok:!0}}catch(be){try{return await fetch(_e,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"send_email",key:Me.apiKey,to:Le,subject:G,body:U,senderName:" "})}),{ok:!0,opaque:!0}}catch(Ce){try{const _t=new URLSearchParams({action:"send_email",to:Le,subject:G||"",body:U||""});return await fetch(`${_e}?${_t.toString()}`,{method:"GET"}),{ok:!0,fallback:"get"}}catch(_t){return{ok:!1,error:(_t==null?void 0:_t.message)||(Ce==null?void 0:Ce.message)||(be==null?void 0:be.message)||"email_failed"}}}}},[]);C.useEffect(()=>{if(!(m!=null&&m.length))return;const k=Yi(),G={...ie};let U=!1;m.forEach(Y=>{var _e,Le,Se;Y.status==="returned"||Y.status==="cancelled"||Y.returnDate&&Y.returnDate<k&&(G[Y.id]||(G[Y.id]=!0,U=!0,sn(`  : ${Y.studentName}  ${(_e=Y.items)==null?void 0:_e.map(be=>be.name).join(", ")} ( ${Y.returnDate})`,"equipment",!0),Ze(`[] ${Y.studentName}(${Y.studentId})  ${(Le=Y.items)==null?void 0:Le.map(be=>be.name).join(", ")} |  ${Y.returnDate}`,"equipment",{studentId:Y.studentId}),vt({subject:`[ ] ${Y.studentName}    `,body:["    .","","[ ]",`- : ${Y.studentName} (${Y.studentId})`,`- /: ${Y.studentDept||"-"}`,`-  : ${(Se=Y.items)==null?void 0:Se.map(be=>be.name).join(", ")}`,`-  : ${Y.returnDate}`,"","   .","  "].join(`
`)})))}),U&&yn(G)},[m,ie,sn,Ze,vt,yn]);const at=C.useCallback(async k=>{var U;const G=(U=D==null?void 0:D.reservationWebhookUrl)==null?void 0:U.trim();if(!G)return{skipped:!0};try{const Y={event:"room_reservation",key:Me.apiKey,data:{id:k.id,studentId:k.studentId,studentName:k.studentName,studentDept:k.studentDept,roomId:k.roomId,roomName:k.roomName,date:k.date,slots:k.slots,slotLabels:k.slotLabels,purpose:k.purpose,members:k.members,status:k.status,createdAt:k.createdAt}},_e=await fetch(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!_e.ok)throw new Error(`HTTP ${_e.status}`);return{ok:!0}}catch(Y){try{return await fetch(G,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({event:"room_reservation",key:Me.apiKey,data:{id:k.id,studentId:k.studentId,studentName:k.studentName,studentDept:k.studentDept,roomId:k.roomId,roomName:k.roomName,date:k.date,slots:k.slots,slotLabels:k.slotLabels,purpose:k.purpose,members:k.members,status:k.status,createdAt:k.createdAt}})}),{ok:!0,opaque:!0}}catch(_e){return Ze(`[  ] ${k.studentName}(${k.studentId})  ${k.roomName} ${k.date}`,"reservation"),{ok:!1,error:(_e==null?void 0:_e.message)||(Y==null?void 0:Y.message)||"unknown"}}}},[D,Ze]),st=C.useCallback(async k=>{var U,Y,_e;const G=(U=D==null?void 0:D.printWebhookUrl)==null?void 0:U.trim();if(!G)return{skipped:!0};try{const Le={event:"print_request",key:Me.apiKey,data:{id:k.id,studentId:k.studentId,studentName:k.studentName,studentDept:k.studentDept,paperSize:k.paperSize,colorMode:k.colorMode,copies:k.copies,unitPrice:k.unitPrice,totalPrice:k.totalPrice,fileName:((Y=k.printFile)==null?void 0:Y.name)||"",note:k.note,urgentPickup:k.urgentPickup,status:k.status,createdAt:k.createdAt}},Se=await fetch(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(!Se.ok)throw new Error(`HTTP ${Se.status}`);return{ok:!0}}catch(Le){try{return await fetch(G,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({event:"print_request",key:Me.apiKey,data:{id:k.id,studentId:k.studentId,studentName:k.studentName,studentDept:k.studentDept,paperSize:k.paperSize,colorMode:k.colorMode,copies:k.copies,unitPrice:k.unitPrice,totalPrice:k.totalPrice,fileName:((_e=k.printFile)==null?void 0:_e.name)||"",note:k.note,urgentPickup:k.urgentPickup,status:k.status,createdAt:k.createdAt}})}),{ok:!0,opaque:!0}}catch(Se){return Ze(`[   ] ${k.studentName}(${k.studentId})`,"print"),{ok:!1,error:(Se==null?void 0:Se.message)||(Le==null?void 0:Le.message)||"unknown"}}}},[D,Ze]),Vn=C.useCallback(async k=>{c(k),await de.set("rememberSession",k),k||await de.set("session",null)},[]),ln=async(k,G)=>{if(r(k),o(G),t(G),l?de.set("session",{user:k,role:G,page:G}):de.set("session",null),G==="student"&&(k!=null&&k.id)){const Y=(await de.get("visitCount")||0)+1;Re(Y),await de.set("visitCount",Y)}},fr=()=>{r(null),o(null),t("login"),l||de.set("session",null)},Nt=async()=>{const k=[];j(k),g(k),I(k),F(k),W(Sc),await Promise.all([ae("reservations",k),ae("equipRentals",k),ae("logs",k),ae("notifications",k),ae("workers",Sc)])},vs=N.filter(k=>!k.read).length;return Ie?(Object.assign(a,f?hy:Zv),s.jsxs("div",{style:{fontFamily:a.font,background:a.bg,color:a.text,minHeight:"100vh",transition:"background 0.3s, color 0.3s"},children:[s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800&family=Noto+Sans+KR:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap",rel:"stylesheet"}),s.jsx("style",{children:`
        * { box-sizing: border-box; margin: 0; padding: 0; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: ${a.bg}; }
        ::-webkit-scrollbar-thumb { background: ${a.border}; border-radius: 3px; }
        ::selection { background: ${a.accent}; color: ${f?"#000":"#fff"}; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(${f?.7:0}); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-12px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.3s ease forwards; }
        .slide-in { animation: slideIn 0.25s ease forwards; }
      `}),s.jsxs("div",{style:{maxWidth:880,margin:"0 auto",padding:h?"0 10px":"0 16px",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e==="login"&&s.jsx(t_,{onLogin:ln,onReset:Nt,workers:$,verifyStudentInSheet:wi,rememberSession:l,onRememberSessionChange:Vn,blacklist:J,warnings:X,certificates:te,updateCertificates:dr,inquiries:ee,updateInquiries:ur,savedCredentials:d,communityPosts:Qt,setCommunityPosts:V,exhibitionPosts:le,isMobile:h,isDark:f,toggleDark:y}),e==="student"&&s.jsx(n_,{user:n,onLogout:fr,reservations:w,updateReservations:on,equipRentals:m,updateEquipRentals:Wr,equipmentDB:it,setEquipmentDB:pt,addLog:Ze,addNotification:sn,syncReservationToSheet:at,syncPrintToSheet:st,sendEmailNotification:vt,warnings:X,inquiries:ee,updateInquiries:ur,printRequests:q,updatePrintRequests:Un,isMobile:h,isDark:f,toggleDark:y}),e==="worker"&&s.jsx(a_,{user:n,onLogout:fr,reservations:w,updateReservations:on,equipRentals:m,updateEquipRentals:Wr,logs:x,addLog:Ze,notifications:N,markNotifRead:Hn,markAllNotifsRead:Si,unreadCount:vs,sendEmailNotification:vt,inquiries:ee,updateInquiries:ur,printRequests:q,updatePrintRequests:Un,visitCount:he,isMobile:h,isDark:f,toggleDark:y}),e==="admin"&&s.jsx(h_,{onLogout:fr,reservations:w,updateReservations:on,workers:$,updateWorkers:Rn,logs:x,addLog:Ze,sheetConfig:D,updateSheetConfig:Ur,warnings:X,updateWarnings:Nn,blacklist:J,updateBlacklist:Wn,certificates:te,updateCertificates:dr,sendEmailNotification:vt,communityPosts:Qt,setCommunityPosts:V,exhibitionPosts:le,setExhibitionPosts:bt,equipmentDB:it,setEquipmentDB:pt,isMobile:h,isDark:f,toggleDark:y})]}),s.jsx("img",{src:"/kmu-logo.png",alt:"KMU Logo",style:{position:"fixed",bottom:"15px",...e==="login"?{left:"50%",transform:"translateX(-50%)"}:{right:"20px",left:"auto",transform:"none"},height:"40px",width:"auto",opacity:.5,pointerEvents:"none",zIndex:1e3,objectFit:"contain"}})]})):s.jsx("div",{style:{fontFamily:a.font,background:a.bg,color:a.text,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:18,fontWeight:700,color:a.accent,marginBottom:8},children:"  "}),s.jsx("div",{style:{fontSize:13,color:a.textMuted},children:"  ..."})]})})}function t_({onLogin:e,onReset:t,workers:n,verifyStudentInSheet:r,rememberSession:i,onRememberSessionChange:o,blacklist:l,warnings:c,certificates:d,updateCertificates:u,inquiries:h,updateInquiries:p,savedCredentials:f,communityPosts:S,setCommunityPosts:y,exhibitionPosts:w,isMobile:j,isDark:m,toggleDark:g}){const[x,I]=C.useState(()=>(f==null?void 0:f.role)==="worker"?"worker":(f==null?void 0:f.role)==="admin"?"admin":"student"),[N,F]=C.useState(()=>{var _;return(f==null?void 0:f.role)==="student"&&((_=f.user)==null?void 0:_.id)||""}),[$,W]=C.useState(()=>{var _;return(f==null?void 0:f.role)==="student"&&((_=f.user)==null?void 0:_.name)||""}),[D,K]=C.useState(()=>{var _,fe;return(f==null?void 0:f.role)==="worker"?((_=f.user)==null?void 0:_.username)||"":(f==null?void 0:f.role)==="admin"&&((fe=f.user)==null?void 0:fe.username)||""}),[ie,P]=C.useState(""),[X,ce]=C.useState(!1),[J,A]=C.useState(""),[te,L]=C.useState(!1),[ee,T]=C.useState(!1),[q,ue]=C.useState(null),[he,Re]=C.useState(!1),[He,rt]=C.useState(""),[Ie,mn]=C.useState(""),[Ve,Qt]=C.useState(""),[E,V]=C.useState(""),[M,le]=C.useState(""),[De,bt]=C.useState(""),[it,Ee]=C.useState(!1),[pt,ae]=C.useState(!1),[Ze,sn]=C.useState(!1),[on,Wr]=C.useState(""),[Rn,Ur]=C.useState(""),[yn,Nn]=C.useState(""),[Wn,dr]=C.useState(""),[ur,Un]=C.useState(!1),[Hn,Si]=C.useState(""),wi=C.useRef(null),[vt,at]=C.useState("community"),[st,Vn]=C.useState(null),[ln,fr]=C.useState(""),[Nt,vs]=C.useState(null),[k,G]=C.useState(""),[U,Y]=C.useState(()=>{try{return JSON.parse(localStorage.getItem("myPostIds")||"[]")}catch{return[]}}),[_e,Le]=C.useState(null),[Se,be]=C.useState(""),[Ce,_t]=C.useState(()=>{try{return JSON.parse(localStorage.getItem("myCommentIds")||"[]")}catch{return[]}}),[It,Kn]=C.useState(null),[Wt,xn]=C.useState(""),[_s,ji]=C.useState([{title:"[ ]    3 (~3/15)",date:"02.05",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11324/view.do"},{title:"[] 2026  (~2/21)",date:"02.05",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11323/view.do"},{title:"16 DB(IFC)",date:"02.05",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11322/view.do"},{title:"[] 2025-2      ",date:"02.05",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11321/view.do"},{title:"2026 1   ",date:"02.04",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11320/view.do"},{title:"2026 1   ",date:"02.04",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11319/view.do"},{title:"2026 1   ",date:"02.03",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11318/view.do"},{title:"2026 1   ",date:"02.03",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11317/view.do"},{title:"2026 2  ",date:"02.02",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11316/view.do"},{title:"2026   ",date:"02.01",category:"",url:"https://www.kookmin.ac.kr/user/kmuNews/notice/8/11315/view.do"}]),[Ss,Hr]=C.useState(!1),[ws,Ci]=C.useState(null),[vn,v]=C.useState(!1),[z,Z]=C.useState(!1),[ot,Et]=C.useState(!1),[pe,_n]=C.useState(()=>window.innerWidth<=1200),[Ne,Sn]=C.useState(()=>({width:window.innerWidth,height:window.innerHeight})),Gn=C.useMemo(()=>{if(!(Ne.width<1600||Ne.height<900))return 1;const fe=Ne.width/1600,R=Ne.height/900;return Math.max(.72,Math.min(1,fe,R))},[Ne]),Ko=async()=>{Hr(!0);try{const _=["https://api.codetabs.com/v1/proxy?quest=","https://api.allorigins.win/raw?url="],fe="https://www.kookmin.ac.kr/user/kmuNews/notice/index.do";let R=null;for(const tt of _)try{const Vr=await fetch(tt+encodeURIComponent(fe));if(Vr.ok){R=await Vr.text();break}}catch{}if(!R)throw new Error("proxy failed");const Be=new DOMParser().parseFromString(R,"text/html").querySelectorAll(".board_list ul li"),Ke=[];Be.forEach((tt,Vr)=>{var Of,Lf,Bf,$f;if(Vr>=10)return;const js=tt.querySelector("a"),Cs=tt.querySelector("p.title"),Ka=tt.querySelector("span.ctg_name"),x1=tt.querySelectorAll(".board_etc span");if(js&&Cs){const ks=js.getAttribute("href"),v1=ks!=null&&ks.startsWith("http")?ks:`https://www.kookmin.ac.kr${ks}`,Ga=((Lf=(Of=x1[0])==null?void 0:Of.textContent)==null?void 0:Lf.trim())||"",_1=Ga.length>=5?Ga.slice(5):Ga;Ke.push({title:((Bf=Cs.textContent)==null?void 0:Bf.trim())||"",date:_1,category:(($f=Ka==null?void 0:Ka.textContent)==null?void 0:$f.trim())||"",url:v1})}}),Ke.length>0&&(ji(Ke),Ci(new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})))}catch(_){console.log("  :",_)}Hr(!1)};C.useEffect(()=>{Ko();const _=setInterval(Ko,30*60*1e3);return()=>clearInterval(_)},[]),C.useEffect(()=>{const _=()=>{const fe=window.innerWidth,R=window.innerHeight;_n(fe<=1200),Sn({width:fe,height:R})};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const f1=()=>{if(!on.trim()||!Rn.trim())return;Un(!0);const _={id:ss(),title:on.trim(),content:Rn.trim(),name:yn.trim()||"",contact:Wn.trim()||"",createdAt:Ft(),status:"pending",answer:null,isLoggedIn:!1};p(fe=>[_,...fe]),Wr(""),Ur(""),Nn(""),dr(""),Un(!1),Si(" !"),setTimeout(()=>Si(""),3e3)},h1=async()=>{var Ke,tt,Vr,js;const _=N.trim(),fe=$.trim();if(!_||!fe)return;A(""),T(!0);const R=await(r==null?void 0:r(_,fe));if(T(!1),!(R!=null&&R.ok)){A((R==null?void 0:R.error)||" ");return}const se=Qv.find(Cs=>Cs.id===_&&Cs.name===fe);if(l!=null&&l[_]){A("    .");return}const et=c==null?void 0:c[_],Be={id:_,name:fe,dept:((Ke=R==null?void 0:R.student)==null?void 0:Ke.dept)||(se==null?void 0:se.dept)||"",year:((tt=R==null?void 0:R.student)==null?void 0:tt.year)||(se==null?void 0:se.year)||0,safetyTrained:(R==null?void 0:R.safetyTrained)??!0,safetyDate:((Vr=R==null?void 0:R.student)==null?void 0:Vr.safetyDate)||(se==null?void 0:se.safetyDate)||null,warningCount:(et==null?void 0:et.count)||0,email:((js=R==null?void 0:R.student)==null?void 0:js.email)||""};e(Be,"student")},p1=async _=>{var R;const fe=(R=_.target.files)==null?void 0:R[0];fe&&(ue(fe),rt(""),A(""))},g1=async()=>{if(!q){A("  .");return}if(!Ie.trim()||!Ve.trim()||!E.trim()||!M.trim()||!De.trim()){A(", , , ,   .");return}Re(!0),rt(""),A("");try{const _=new FileReader;_.onload=async()=>{const fe=_.result,R=Ie.trim();await de.set(`certFile_${R}`,fe);const se={studentId:R,studentName:Ve.trim(),studentYear:E.trim(),studentMajor:M.trim(),studentEmail:De.trim(),fileName:q.name,fileSize:q.size,fileType:q.type,uploadDate:new Date().toISOString()};u==null||u(et=>({...et,[R]:se})),Re(!1),rt("  !"),Et(!0),ue(null)},_.onerror=()=>{Re(!1),A("  ")},_.readAsDataURL(q)}catch(_){Re(!1),A("  : "+((_==null?void 0:_.message)||"   "))}},m1=()=>{const _=n.find(fe=>fe.username===D.trim()&&fe.password===ie)||n[0];if(!_){A("  .");return}A(""),e(_,"worker")},y1=()=>{A(""),e({name:Dd.name,username:Dd.username,role:"admin"},"admin")},ki=async()=>{x==="student"?await h1():x==="worker"?m1():y1()};return s.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:60,position:"relative",overflow:"auto"},children:[s.jsx("button",{onClick:g,style:{position:"fixed",top:16,right:16,zIndex:100,width:36,height:36,borderRadius:"50%",background:a.surface,border:`1px solid ${a.border}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:a.textMuted,transition:"all 0.2s"},onMouseEnter:_=>{_.currentTarget.style.borderColor=a.accent,_.currentTarget.style.color=a.accent},onMouseLeave:_=>{_.currentTarget.style.borderColor=a.border,_.currentTarget.style.color=a.textMuted},children:m?s.jsx(b.sun,{size:16}):s.jsx(b.moon,{size:16})}),s.jsx("div",{style:{position:"fixed",left:20,top:20,zIndex:pe?2:10,width:500,transform:`scale(${Gn})`,transformOrigin:"top left",display:j?"none":void 0},children:s.jsxs("div",{style:{background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`,borderRadius:12,padding:"14px 20px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:14},children:[s.jsx("span",{style:{fontSize:18},children:""}),s.jsx("span",{style:{fontSize:13,fontWeight:700,color:a.accent},children:" "}),s.jsx("div",{style:{flex:1,height:1,background:a.border,marginLeft:8}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:14},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{width:20,height:20,borderRadius:"50%",background:a.accentBg,color:a.accent,fontSize:11,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"1"}),s.jsx("span",{style:{fontSize:11,fontWeight:600,color:a.text},children:"  "})]}),s.jsx("span",{style:{color:a.textDim,fontSize:10},children:""}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{width:20,height:20,borderRadius:"50%",background:a.accentBg,color:a.accent,fontSize:11,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"2"}),s.jsx("span",{style:{fontSize:11,fontWeight:600,color:a.text},children:"/   "})]}),s.jsx("span",{style:{color:a.textDim,fontSize:10},children:""}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{width:20,height:20,borderRadius:"50%",background:a.accentBg,color:a.accent,fontSize:11,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"3"}),s.jsx("span",{style:{fontSize:11,fontWeight:600,color:a.text},children:"// "})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:20},children:[s.jsxs("div",{style:{fontSize:11,color:a.text,display:"flex",alignItems:"center",gap:4},children:[s.jsx("span",{style:{color:a.yellow},children:""}),"  09:00~17:00"]}),s.jsxs("div",{style:{fontSize:11,color:a.text,display:"flex",alignItems:"center",gap:4},children:[s.jsx("span",{style:{color:a.blue},children:""}),"  602 "]}),s.jsxs("div",{style:{fontSize:11,color:a.text,display:"flex",alignItems:"center",gap:4},children:[s.jsx("span",{style:{color:a.green},children:""})," 02-910-6525"]})]})]})}),s.jsxs("div",{style:{position:"fixed",left:20,top:"50%",transform:`translateY(-50%) scale(${Gn})`,display:j?"none":"flex",flexDirection:"column",gap:8,zIndex:pe?2:100,transformOrigin:"left center"},children:[s.jsx("div",{style:{padding:"6px 12px",background:"transparent",marginBottom:6,marginLeft:4},children:s.jsx("span",{style:{fontSize:11,fontWeight:600,color:a.text,letterSpacing:"2px",textTransform:"uppercase"},children:""})}),[{label:"",url:"https://www.kookmin.ac.kr",icon:"",color:"#4A90D9"},{label:"",url:"https://archi.kookmin.ac.kr/",icon:"",color:"#d4a053"},{label:"ON",url:"https://portal.kookmin.ac.kr/por/ln",icon:"",color:"#6B8E23"},{label:"",url:"https://ecampus.kookmin.ac.kr/login/index.php",icon:"",color:"#9370DB"},{label:"",url:"https://lib.kookmin.ac.kr/#/",icon:"",color:"#20B2AA"}].map((_,fe)=>s.jsxs("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:10,padding:"12px 16px",background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${_.color}40`,borderLeft:`3px solid ${_.color}`,borderRadius:"0 8px 8px 0",textDecoration:"none",color:a.text,fontSize:13,fontWeight:500,transition:"all 0.2s ease",minWidth:140},onMouseEnter:R=>{R.currentTarget.style.background=`${_.color}20`,R.currentTarget.style.borderColor=_.color,R.currentTarget.style.transform="translateX(4px)"},onMouseLeave:R=>{R.currentTarget.style.background=a.card,R.currentTarget.style.borderColor=`${_.color}40`,R.currentTarget.style.transform="translateX(0)"},children:[s.jsx("span",{style:{fontSize:16},children:_.icon}),s.jsx("span",{children:_.label})]},fe)),s.jsxs("div",{style:{position:"relative"},children:[s.jsxs("a",{href:"https://unc.doculink.co.kr/index/main.do#reload",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:10,padding:"12px 16px",background:z?"#FF950020":a.card,backdropFilter:"blur(10px)",border:`1px solid ${z?"#FF9500":"#FF950040"}`,borderLeft:"3px solid #FF9500",borderRadius:"0 8px 8px 0",textDecoration:"none",color:a.text,fontSize:13,fontWeight:500,transition:"all 0.2s ease",minWidth:140,transform:z?"translateX(4px)":"translateX(0)"},onMouseEnter:()=>Z(!0),onMouseLeave:()=>Z(!1),children:[s.jsx("span",{style:{fontSize:16},children:""}),s.jsx("span",{children:" "})]}),z&&s.jsx("div",{style:{position:"absolute",left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:12,background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`,borderLeft:"3px solid #FF9500",borderRadius:8,padding:"10px 14px",zIndex:9999,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",whiteSpace:"nowrap"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:14},children:""}),s.jsx("span",{style:{fontSize:12,color:"#FF9500",fontWeight:600},children:"1 3,000  "})]})})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsxs("a",{href:"https://lib.kookmin.ac.kr/facility/reservation/room/all-rooms?roomIndex=1",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:10,padding:"12px 16px",background:vn?"#FF6B6B20":a.card,backdropFilter:"blur(10px)",border:`1px solid ${vn?"#FF6B6B":"#FF6B6B40"}`,borderLeft:"3px solid #FF6B6B",borderRadius:"0 8px 8px 0",textDecoration:"none",color:a.text,fontSize:13,fontWeight:500,transition:"all 0.2s ease",minWidth:140,transform:vn?"translateX(4px)":"translateX(0)"},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[s.jsx("span",{style:{fontSize:16},children:""}),s.jsx("span",{children:""})]}),vn&&s.jsxs("div",{style:{position:"absolute",left:"100%",top:0,marginLeft:12,width:320,background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`,borderLeft:"3px solid #FF6B6B",borderRadius:10,padding:16,zIndex:9999,boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:14},children:[s.jsx("span",{style:{fontSize:16},children:""}),s.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#FF6B6B"},children:" "})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:14},children:["","/  ","   KL ","      "].map((_,fe)=>s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[s.jsx("span",{style:{width:20,height:20,borderRadius:"50%",background:"rgba(255, 107, 107, 0.2)",color:"#FF6B6B",fontSize:11,fontWeight:700,flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center"},children:fe+1}),s.jsx("span",{style:{fontSize:12,color:a.text,lineHeight:1.4},children:_})]},fe))}),s.jsx("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:6,padding:"10px 12px"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:8},children:[s.jsx("span",{style:{fontSize:14,flexShrink:0},children:""}),s.jsx("span",{style:{fontSize:11,color:a.yellow,lineHeight:1.5},children:"          ."})]})})]})]})]}),s.jsxs("div",{style:{position:"fixed",right:60,top:"50%",transform:`translateY(-50%) scale(${Gn})`,display:j?"none":"flex",flexDirection:"column",gap:10,zIndex:pe?2:10,width:420,transformOrigin:"top right"},children:[s.jsxs("div",{style:{display:"flex",gap:0,background:a.card,borderRadius:8,padding:4,border:`1px solid ${a.border}`},children:[s.jsx("button",{onClick:()=>at("community"),style:{flex:1,padding:"10px 16px",border:"none",borderRadius:6,background:vt==="community"?a.accent:"transparent",color:vt==="community"?"#000":a.textMuted,fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s",fontFamily:a.font},children:" "}),s.jsx("button",{onClick:()=>at("exhibition"),style:{flex:1,padding:"10px 16px",border:"none",borderRadius:6,background:vt==="exhibition"?a.accent:"transparent",color:vt==="exhibition"?"#000":a.textMuted,fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s",fontFamily:a.font},children:"  "})]}),vt==="exhibition"&&s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:0,maxHeight:500,overflowY:"auto"},children:!w||w.length===0?s.jsx("div",{style:{padding:30,textAlign:"center",color:a.textDim,fontSize:13,background:a.card,borderRadius:10,border:`1px solid ${a.border}`},children:"  ."}):s.jsx("div",{style:{background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`,borderRadius:10,overflow:"hidden"},children:w.map((_,fe)=>s.jsxs("div",{children:[s.jsxs("div",{onClick:()=>Vn(st===_.id?null:_.id),style:{padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",borderBottom:st===_.id||fe<w.length-1?`1px solid ${a.border}`:"none",background:st===_.id?"rgba(212, 160, 83, 0.08)":"transparent",transition:"background 0.2s"},onMouseEnter:R=>{st!==_.id&&(R.currentTarget.style.background="rgba(255,255,255,0.03)")},onMouseLeave:R=>{st!==_.id&&(R.currentTarget.style.background="transparent")},children:[s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontSize:20,fontWeight:600,color:st===_.id?a.accent:a.text,transition:"color 0.2s"},children:_.title||""}),s.jsxs("div",{style:{fontSize:10,color:a.textMuted,marginTop:3},children:[" ",_.dates||"","   ",_.location||""]})]}),s.jsx("span",{style:{fontSize:11,color:a.textDim,flexShrink:0,marginLeft:8,transition:"transform 0.2s",transform:st===_.id?"rotate(180deg)":"rotate(0deg)"},children:""})]}),st===_.id&&s.jsxs("div",{style:{borderBottom:fe<w.length-1?`1px solid ${a.border}`:"none"},children:[_.posterUrl&&s.jsx("div",{style:{overflow:"hidden"},children:s.jsx("a",{href:_.instagramUrl||"#",target:"_blank",rel:"noopener noreferrer",style:{display:"block"},children:s.jsx("img",{src:_.posterUrl,alt:`${_.title||""}  `,style:{width:"100%",height:"auto",display:"block",transition:"transform 0.3s, opacity 0.3s"},onMouseOver:R=>{R.currentTarget.style.transform="scale(1.02)",R.currentTarget.style.opacity="0.9"},onMouseOut:R=>{R.currentTarget.style.transform="scale(1)",R.currentTarget.style.opacity="1"},onError:R=>{R.currentTarget.style.display="none",R.currentTarget.parentElement.innerHTML=`
                                    <div style="padding: 30px 20px; text-align: center; color: #888;">
                                      <div style="font-size: 36px; margin-bottom: 8px;"></div>
                                      <div style="font-size: 11px;">   </div>
                                    </div>
                                  `}})})}),s.jsxs("div",{style:{padding:"12px 16px",background:a.surface},children:[s.jsx("div",{style:{fontSize:18,color:a.text,lineHeight:1.6,marginBottom:8},children:_.description||""}),s.jsxs("div",{style:{fontSize:17,color:a.text,lineHeight:1.5},children:[" ",_.dates||"",s.jsx("br",{})," ",_.location||""]}),_.instagramUrl&&s.jsx("a",{href:_.instagramUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:8,fontSize:11,color:a.accent,textDecoration:"none"},onMouseEnter:R=>R.currentTarget.style.textDecoration="underline",onMouseLeave:R=>R.currentTarget.style.textDecoration="none",children:"Instagram "})]})]})]},_.id))})}),vt==="community"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`,borderRadius:10,padding:14},children:[s.jsx("textarea",{value:ln,onChange:_=>fr(_.target.value),placeholder:"   ...",style:{width:"100%",height:70,padding:12,border:`1px solid ${a.border}`,borderRadius:8,background:a.surface,color:a.text,fontSize:13,resize:"none",fontFamily:a.font,outline:"none",boxSizing:"border-box"},onFocus:_=>_.target.style.borderColor=a.accent,onBlur:_=>_.target.style.borderColor=a.border}),s.jsx("button",{onClick:()=>{if(!ln.trim())return;const _=`c${Date.now()}`,fe={id:_,content:ln.trim(),createdAt:new Date().toISOString(),comments:[]};y(se=>[fe,...se]),fr("");const R=[...U,_];Y(R),localStorage.setItem("myPostIds",JSON.stringify(R))},disabled:!ln.trim(),style:{marginTop:10,width:"100%",padding:"10px 16px",border:"none",borderRadius:8,background:ln.trim()?a.accent:a.surface,color:ln.trim()?"#000":a.textDim,fontSize:13,fontWeight:600,cursor:ln.trim()?"pointer":"not-allowed",transition:"all 0.2s",fontFamily:a.font},children:" "})]}),s.jsx("div",{style:{background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`,borderRadius:10,maxHeight:350,overflowY:"auto"},children:S.length===0?s.jsxs("div",{style:{padding:30,textAlign:"center",color:a.textDim,fontSize:13},children:["  .",s.jsx("br",{}),"   !"]}):S.map((_,fe)=>s.jsxs("div",{children:[s.jsx("div",{onClick:()=>{vs(Nt===_.id?null:_.id),G("")},style:{padding:"14px 16px",borderBottom:Nt!==_.id&&fe<S.length-1?`1px solid ${a.border}`:"none",cursor:"pointer",transition:"background 0.2s",background:Nt===_.id?"rgba(212, 160, 83, 0.1)":"transparent"},onMouseEnter:R=>{Nt!==_.id&&(R.currentTarget.style.background="rgba(212, 160, 83, 0.05)")},onMouseLeave:R=>{Nt!==_.id&&(R.currentTarget.style.background="transparent")},children:_e===_.id?s.jsxs("div",{onClick:R=>R.stopPropagation(),children:[s.jsx("textarea",{value:Se,onChange:R=>be(R.target.value),style:{width:"100%",minHeight:60,padding:10,border:`1px solid ${a.accent}`,borderRadius:6,background:a.surface,color:a.text,fontSize:13,resize:"none",fontFamily:a.font,outline:"none",boxSizing:"border-box",marginBottom:8}}),s.jsxs("div",{style:{display:"flex",gap:6,justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>{Le(null),be("")},style:{padding:"6px 12px",border:`1px solid ${a.border}`,borderRadius:4,background:"transparent",color:a.textDim,fontSize:11,cursor:"pointer",fontFamily:a.font},children:""}),s.jsx("button",{onClick:()=>{Se.trim()&&(y(R=>R.map(se=>se.id===_.id?{...se,content:Se.trim()}:se)),Le(null),be(""))},disabled:!Se.trim(),style:{padding:"6px 12px",border:"none",borderRadius:4,background:Se.trim()?a.accent:a.surface,color:Se.trim()?"#000":a.textDim,fontSize:11,fontWeight:600,cursor:Se.trim()?"pointer":"not-allowed",fontFamily:a.font},children:""})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:13,color:a.text,lineHeight:1.5,marginBottom:8},children:_.content}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsxs("span",{style:{fontSize:10,color:a.textDim},children:["  ",new Date(_.createdAt).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),U.includes(_.id)&&s.jsx("span",{style:{fontSize:9,color:a.accent,background:"rgba(212, 160, 83, 0.2)",padding:"2px 6px",borderRadius:4},children:" "})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[U.includes(_.id)&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:R=>{R.stopPropagation(),Le(_.id),be(_.content)},style:{padding:"4px 8px",border:"none",borderRadius:4,background:"transparent",color:a.textDim,fontSize:10,cursor:"pointer",fontFamily:a.font},onMouseEnter:R=>R.currentTarget.style.color=a.accent,onMouseLeave:R=>R.currentTarget.style.color=a.textDim,children:""}),s.jsx("button",{onClick:R=>{if(R.stopPropagation(),window.confirm("   ?")){y(et=>et.filter(Be=>Be.id!==_.id));const se=U.filter(et=>et!==_.id);Y(se),localStorage.setItem("myPostIds",JSON.stringify(se))}},style:{padding:"4px 8px",border:"none",borderRadius:4,background:"transparent",color:a.textDim,fontSize:10,cursor:"pointer",fontFamily:a.font},onMouseEnter:R=>R.currentTarget.style.color=a.red,onMouseLeave:R=>R.currentTarget.style.color=a.textDim,children:""})]}),s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4,padding:"4px 8px",color:_.comments.length>0?a.accent:a.textDim,fontSize:11,fontFamily:a.font},children:[" ",_.comments.length," ",Nt===_.id?"":""]})]})]})]})}),s.jsx("div",{style:{maxHeight:Nt===_.id?300:0,overflow:"hidden",transition:"max-height 0.3s ease-in-out",background:"rgba(0,0,0,0.2)",borderBottom:Nt===_.id&&fe<S.length-1?`1px solid ${a.border}`:"none"},children:s.jsxs("div",{style:{padding:"12px 16px"},children:[_.comments.length===0?s.jsx("div",{style:{textAlign:"center",color:a.textDim,fontSize:11,padding:"10px 0"},children:"  .   !"}):_.comments.map(R=>s.jsx("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:It===R.id?s.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[s.jsx("input",{type:"text",value:Wt,onChange:se=>xn(se.target.value),onClick:se=>se.stopPropagation(),style:{flex:1,padding:"6px 10px",border:`1px solid ${a.accent}`,borderRadius:4,background:a.surface,color:a.text,fontSize:11,outline:"none",fontFamily:a.font},onKeyPress:se=>{se.key==="Enter"&&Wt.trim()&&(y(et=>et.map(Be=>Be.id===_.id?{...Be,comments:Be.comments.map(Ke=>Ke.id===R.id?{...Ke,content:Wt.trim()}:Ke)}:Be)),Kn(null),xn(""))}}),s.jsx("button",{onClick:se=>{se.stopPropagation(),Kn(null),xn("")},style:{padding:"5px 8px",border:`1px solid ${a.border}`,borderRadius:4,background:"transparent",color:a.textDim,fontSize:10,cursor:"pointer",fontFamily:a.font},children:""}),s.jsx("button",{onClick:se=>{se.stopPropagation(),Wt.trim()&&(y(et=>et.map(Be=>Be.id===_.id?{...Be,comments:Be.comments.map(Ke=>Ke.id===R.id?{...Ke,content:Wt.trim()}:Ke)}:Be)),Kn(null),xn(""))},disabled:!Wt.trim(),style:{padding:"5px 8px",border:"none",borderRadius:4,background:Wt.trim()?a.accent:a.surface,color:Wt.trim()?"#000":a.textDim,fontSize:10,fontWeight:600,cursor:Wt.trim()?"pointer":"not-allowed",fontFamily:a.font},children:""})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontSize:12,color:a.text,lineHeight:1.4,marginBottom:4},children:[" ",R.content]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsxs("span",{style:{fontSize:9,color:a.textDim},children:["  ",new Date(R.createdAt).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),Ce.includes(R.id)&&s.jsx("span",{style:{fontSize:8,color:a.accent,background:"rgba(212, 160, 83, 0.2)",padding:"1px 4px",borderRadius:3},children:" "})]}),Ce.includes(R.id)&&s.jsxs("div",{style:{display:"flex",gap:4},children:[s.jsx("button",{onClick:se=>{se.stopPropagation(),Kn(R.id),xn(R.content)},style:{padding:"2px 6px",border:"none",borderRadius:3,background:"transparent",color:a.textDim,fontSize:9,cursor:"pointer",fontFamily:a.font},onMouseEnter:se=>se.currentTarget.style.color=a.accent,onMouseLeave:se=>se.currentTarget.style.color=a.textDim,children:""}),s.jsx("button",{onClick:se=>{if(se.stopPropagation(),window.confirm("  ?")){y(Be=>Be.map(Ke=>Ke.id===_.id?{...Ke,comments:Ke.comments.filter(tt=>tt.id!==R.id)}:Ke));const et=Ce.filter(Be=>Be!==R.id);_t(et),localStorage.setItem("myCommentIds",JSON.stringify(et))}},style:{padding:"2px 6px",border:"none",borderRadius:3,background:"transparent",color:a.textDim,fontSize:9,cursor:"pointer",fontFamily:a.font},onMouseEnter:se=>se.currentTarget.style.color=a.red,onMouseLeave:se=>se.currentTarget.style.color=a.textDim,children:""})]})]})]})},R.id)),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:10},children:[s.jsx("input",{type:"text",value:Nt===_.id?k:"",onChange:R=>G(R.target.value),placeholder:" ...",onClick:R=>R.stopPropagation(),onKeyPress:R=>{if(R.key==="Enter"&&k.trim()){const se=`cm${Date.now()}`,et={id:se,content:k.trim(),createdAt:new Date().toISOString()};y(Ke=>Ke.map(tt=>tt.id===_.id?{...tt,comments:[...tt.comments,et]}:tt)),G("");const Be=[...Ce,se];_t(Be),localStorage.setItem("myCommentIds",JSON.stringify(Be))}},style:{flex:1,padding:"8px 12px",border:`1px solid ${a.border}`,borderRadius:6,background:a.surface,color:a.text,fontSize:12,outline:"none",fontFamily:a.font}}),s.jsx("button",{onClick:R=>{if(R.stopPropagation(),!k.trim())return;const se=`cm${Date.now()}`,et={id:se,content:k.trim(),createdAt:new Date().toISOString()};y(Ke=>Ke.map(tt=>tt.id===_.id?{...tt,comments:[...tt.comments,et]}:tt)),G("");const Be=[...Ce,se];_t(Be),localStorage.setItem("myCommentIds",JSON.stringify(Be))},disabled:!k.trim(),style:{padding:"8px 14px",border:"none",borderRadius:6,background:k.trim()?a.accent:a.surface,color:k.trim()?"#000":a.textDim,fontSize:12,fontWeight:600,cursor:k.trim()?"pointer":"not-allowed",fontFamily:a.font},children:""})]})]})})]},_.id))})]})]}),s.jsx("img",{src:"/kmu-logo.svg",alt:"KMU Logo",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"500px",height:"500px",opacity:.15,pointerEvents:"none",zIndex:0,objectFit:"contain"}}),s.jsxs("div",{className:"fade-in",style:{width:"100%",maxWidth:j?"100%":420,position:"relative",zIndex:pe?30:1,transform:j?"none":`scale(${Gn})`,transformOrigin:"center top",padding:j?"0 4px":0},children:[j&&s.jsxs("div",{style:{background:a.card,border:`1px solid ${a.border}`,borderRadius:12,padding:"12px 16px",marginBottom:20},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[s.jsx("span",{style:{fontSize:16},children:""}),s.jsx("span",{style:{fontSize:12,fontWeight:700,color:a.accent},children:" "}),s.jsx("div",{style:{flex:1,height:1,background:a.border,marginLeft:6}})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,marginBottom:10},children:[{n:"1",t:"  "},{n:"2",t:"/   "},{n:"3",t:"// "}].map(_=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{width:18,height:18,borderRadius:"50%",background:a.accentBg,color:a.accent,fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:_.n}),s.jsx("span",{style:{fontSize:12,fontWeight:600,color:a.text},children:_.t})]},_.n))}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,fontSize:11,color:a.text},children:[s.jsxs("span",{children:[s.jsx("span",{style:{color:a.yellow},children:""}),"  09:00~17:00"]}),s.jsxs("span",{children:[s.jsx("span",{style:{color:a.blue},children:""}),"  602"]}),s.jsxs("span",{children:[s.jsx("span",{style:{color:a.green},children:""})," 02-910-6525"]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:30},children:[s.jsx("div",{style:{fontSize:13,fontWeight:600,color:a.accent,letterSpacing:"3px",textTransform:"uppercase",marginBottom:12},children:"The Best School of Architecture"}),s.jsx("h1",{style:{fontSize:28,fontWeight:800,color:a.text,lineHeight:1.3,letterSpacing:"-0.5px"},children:"  "}),s.jsx("div",{style:{fontSize:13,color:a.textMuted,marginTop:8},children:"Kookmin University School of Architecture Portal"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:10,marginTop:20},children:[s.jsx("div",{style:{padding:"8px 16px",borderRadius:8,background:"linear-gradient(135deg, #6BA3D6 0%, #5A8FC2 100%)",color:"#fff",fontSize:12,fontWeight:600,boxShadow:"0 2px 8px rgba(107, 163, 214, 0.3)"},children:"  "}),s.jsx("div",{style:{padding:"8px 16px",borderRadius:8,background:"linear-gradient(135deg, #6EBD8E 0%, #5DAD7D 100%)",color:"#fff",fontSize:12,fontWeight:600,boxShadow:"0 2px 8px rgba(110, 189, 142, 0.3)"},children:"  "}),s.jsx("div",{style:{padding:"8px 16px",borderRadius:8,background:"linear-gradient(135deg, #E9A56A 0%, #D9955A 100%)",color:"#fff",fontSize:12,fontWeight:600,boxShadow:"0 2px 8px rgba(233, 165, 106, 0.3)"},children:"  "})]})]}),s.jsx("div",{style:{display:"flex",gap:2,background:a.surface,borderRadius:a.radius,padding:3,marginBottom:24,border:`1px solid ${a.border}`},children:[{id:"student",label:"",icon:s.jsx(b.user,{size:15})},{id:"worker",label:"",icon:s.jsx(b.tool,{size:15})},{id:"admin",label:"",icon:s.jsx(b.shield,{size:15})}].map(_=>s.jsxs("button",{onClick:()=>{I(_.id),A(""),K(""),P("")},style:{flex:1,padding:"11px 8px",borderRadius:8,border:"none",cursor:"pointer",fontSize:13,fontWeight:600,fontFamily:a.font,transition:"all 0.2s",background:x===_.id?a.card:"transparent",color:x===_.id?a.text:a.textMuted,display:"flex",alignItems:"center",justifyContent:"center",gap:6,boxShadow:x===_.id?"0 1px 4px rgba(0,0,0,0.3)":"none"},children:[_.icon," ",_.label]},_.id))}),s.jsx(ne,{style:{background:a.card,backdropFilter:"blur(10px)",border:`1px solid ${a.border}`},children:x==="student"?s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[s.jsx(ye,{label:"",placeholder:": 2021001",value:N,onChange:_=>F(_.target.value),onKeyDown:_=>_.key==="Enter"&&ki()}),s.jsx(ye,{label:"",placeholder:": ",value:$,onChange:_=>W(_.target.value),onKeyDown:_=>_.key==="Enter"&&ki()}),J&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderRadius:a.radiusSm,background:a.redBg,border:`1px solid ${a.redBorder}`,color:a.red,fontSize:13},children:[s.jsx(b.alert,{size:16})," ",J]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:a.textMuted},children:[s.jsx("input",{type:"checkbox",checked:!!i,onChange:_=>o==null?void 0:o(_.target.checked),style:{width:14,height:14}}),"   "]}),s.jsx(H,{size:"lg",onClick:ki,disabled:!N||!$||ee,style:{width:"100%",justifyContent:"center",marginTop:4},children:ee?" ...":""})]}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[s.jsx(ye,{label:"",placeholder:x==="admin"?" ":" ",value:D,onChange:_=>K(_.target.value),onKeyDown:_=>_.key==="Enter"&&ki()}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase"},children:""}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:X?"text":"password",placeholder:" ",value:ie,onChange:_=>P(_.target.value),onKeyDown:_=>_.key==="Enter"&&ki(),style:{width:"100%",padding:"10px 42px 10px 14px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:14,fontFamily:a.font,outline:"none",boxSizing:"border-box",transition:"border-color 0.2s"},onFocus:_=>_.target.style.borderColor=a.accent,onBlur:_=>_.target.style.borderColor=a.border}),s.jsx("button",{onClick:()=>ce(!X),style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:a.textDim,padding:2},children:X?s.jsx(b.eyeOff,{size:16}):s.jsx(b.eye,{size:16})})]})]}),J&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderRadius:a.radiusSm,background:a.redBg,border:`1px solid ${a.redBorder}`,color:a.red,fontSize:13},children:[s.jsx(b.alert,{size:16})," ",J]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:a.textMuted},children:[s.jsx("input",{type:"checkbox",checked:!!i,onChange:_=>o==null?void 0:o(_.target.checked),style:{width:14,height:14}}),"   "]}),s.jsx(H,{size:"lg",onClick:ki,style:{width:"100%",justifyContent:"center",marginTop:4},children:x==="admin"?" ":"  "})]})})]}),x==="student"&&s.jsx("div",{style:{marginTop:16,width:"100%"},children:s.jsx(ne,{onClick:it?void 0:()=>Ee(!0),hover:!1,style:{background:it?a.card:a.surfaceHover,borderColor:a.border,cursor:it?"default":"pointer",transition:"all 0.3s ease"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[s.jsx(b.upload,{size:20,color:a.blue}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:{fontSize:13,fontWeight:700,color:a.blue},children:" "}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("div",{onClick:_=>{_.stopPropagation(),ae(!0)},style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",background:"rgba(212,93,93,0.15)",border:`1px solid ${a.red}`,borderRadius:a.radiusSm,cursor:"pointer",transition:"all 0.2s",whiteSpace:"nowrap"},onMouseEnter:_=>_.currentTarget.style.background="rgba(212,93,93,0.25)",onMouseLeave:_=>_.currentTarget.style.background="rgba(212,93,93,0.15)",children:s.jsx("span",{style:{fontSize:11,fontWeight:700,color:a.red},children:"  "})}),it&&s.jsx("button",{onClick:_=>{_.stopPropagation(),Ee(!1)},style:{background:"none",border:"none",cursor:"pointer",color:a.textDim,padding:2},children:s.jsx(b.x,{size:16})})]})]}),it?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:12,lineHeight:1.5},children:"     ."}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:j?"1fr":"1fr 1fr",gap:12},children:[s.jsx(ye,{label:"",placeholder:": 2021001",value:Ie,onChange:_=>mn(_.target.value)}),s.jsx(ye,{label:"",placeholder:": ",value:Ve,onChange:_=>Qt(_.target.value)})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:j?"1fr":"1fr 1fr",gap:12},children:[s.jsx(ye,{label:"",placeholder:": 2",value:E,onChange:_=>V(_.target.value)}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase"},children:""}),s.jsxs("select",{value:M,onChange:_=>le(_.target.value),style:{width:"100%",padding:"10px 14px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:14,fontFamily:a.font,outline:"none",boxSizing:"border-box",transition:"border-color 0.2s",height:42},onFocus:_=>_.target.style.borderColor=a.accent,onBlur:_=>_.target.style.borderColor=a.border,children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"})]})]})]}),s.jsx(ye,{label:"",placeholder:": student@school.ac.kr",value:De,onChange:_=>bt(_.target.value)}),s.jsx("input",{ref:wi,type:"file",accept:"image/*,.pdf",onChange:p1,style:{display:"none"}}),s.jsxs("button",{onClick:()=>{var _;return(_=wi.current)==null?void 0:_.click()},disabled:he,style:{display:"flex",alignItems:"center",gap:8,cursor:he?"not-allowed":"pointer",padding:"10px 16px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,fontSize:13,color:a.text,transition:"all 0.2s",fontFamily:a.font,width:"100%",justifyContent:"flex-start",opacity:he?.5:1},onMouseEnter:_=>{he||(_.currentTarget.style.borderColor=a.blue,_.currentTarget.style.background=a.surfaceHover)},onMouseLeave:_=>{he||(_.currentTarget.style.borderColor=a.border,_.currentTarget.style.background=a.surface)},children:[s.jsx(b.file,{size:16}),q?q.name:" "]}),q&&s.jsxs("button",{onClick:g1,disabled:he,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,cursor:he?"not-allowed":"pointer",padding:"12px 16px",background:a.blue,border:"none",borderRadius:a.radiusSm,fontSize:13,fontWeight:600,color:"#fff",transition:"all 0.2s",fontFamily:a.font,width:"100%",opacity:he?.5:1},onMouseEnter:_=>{he||(_.currentTarget.style.opacity="0.9")},onMouseLeave:_=>{he||(_.currentTarget.style.opacity="1")},children:[he?s.jsx(b.loading,{size:16}):s.jsx(b.upload,{size:16}),he?" ...":""]}),He&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",borderRadius:a.radiusSm,background:a.greenBg,border:`1px solid ${a.greenBorder}`,color:a.green,fontSize:12},children:[s.jsx(b.check,{size:14})," ",He]}),(d==null?void 0:d[Ie.trim()])&&Ie.trim()&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",borderRadius:a.radiusSm,background:a.accentBg,border:`1px solid ${a.accentBorder}`,color:a.accent,fontSize:11},children:[s.jsx(b.file,{size:14})," : ",d[Ie.trim()].fileName," (",new Date(d[Ie.trim()].uploadDate).toLocaleDateString(),")"]})]})]}):s.jsx("div",{style:{fontSize:12,color:a.textMuted,lineHeight:1.5},children:"   "})]})]})})}),pt&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20},onClick:()=>ae(!1),children:s.jsxs("div",{onClick:_=>_.stopPropagation(),style:{background:a.card,borderRadius:a.radius,border:"none",padding:28,maxWidth:480,width:"100%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 4px 24px rgba(0,0,0,0.15)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[s.jsx("div",{style:{fontSize:16,fontWeight:800,color:a.red},children:"   "}),s.jsx("button",{onClick:()=>ae(!1),style:{background:"none",border:"none",cursor:"pointer",color:a.textDim,padding:4},children:s.jsx(b.x,{size:18})})]}),s.jsxs("div",{style:{padding:"14px 16px",background:"rgba(212,93,93,0.12)",border:`1px solid ${a.red}`,borderRadius:a.radiusSm,marginBottom:20},children:[s.jsx("div",{style:{fontSize:15,fontWeight:800,color:a.red,marginBottom:10},children:"   "}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:["  (X)","   ","  ","","   ","    ","  "].map((_,fe)=>s.jsxs("div",{style:{fontSize:13,color:a.red,fontWeight:600,paddingLeft:8},children:["- ",_]},fe))})]}),s.jsx("div",{style:{marginBottom:16},children:s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text,marginBottom:8},children:"   !"})}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text,marginBottom:8},children:"1. "}),s.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:600,paddingLeft:12},children:"   "})]}),s.jsxs("div",{style:{marginBottom:20},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text,marginBottom:8},children:"2.  "}),s.jsxs("div",{style:{paddingLeft:12,display:"flex",flexDirection:"column",gap:10},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:600,marginBottom:4},children:"1.   (ON  )"}),s.jsx("a",{href:"https://safety.kookmin.ac.kr/UserHome/Index?LabNo=0",target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:a.blue,textDecoration:"underline",wordBreak:"break-all"},children:" : https://safety.kookmin.ac.kr/UserHome/Index?LabNo=0"})]}),s.jsx("div",{children:s.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:600},children:"2.     "})}),s.jsx("div",{children:s.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:600},children:"3.   , "})})]})]}),s.jsx(H,{variant:"secondary",size:"md",onClick:()=>ae(!1),style:{width:"100%"},children:""})]})}),ot&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease"},children:s.jsxs("div",{style:{background:a.card,borderRadius:a.radius,border:`1px solid ${a.border}`,padding:28,maxWidth:400,width:"90%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},children:[s.jsx("div",{style:{width:60,height:60,borderRadius:"50%",background:a.greenBg,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:s.jsx(b.check,{size:28,color:a.green})}),s.jsx("div",{style:{fontSize:18,fontWeight:700,color:a.text,marginBottom:12},children:" "}),s.jsx("div",{style:{fontSize:14,color:a.textMuted,lineHeight:1.6,marginBottom:24},children:"  ,      ."}),s.jsx(H,{variant:"primary",onClick:()=>Et(!1),style:{width:"100%"},children:""})]})}),s.jsx("div",{style:{marginTop:12},children:s.jsx(ne,{onClick:Ze?void 0:()=>sn(!0),hover:!1,style:{background:Ze?a.card:a.surfaceHover,borderColor:a.border,cursor:Ze?"default":"pointer",transition:"all 0.3s ease"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[s.jsx(b.file,{size:20,color:a.accent}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:{fontSize:13,fontWeight:700,color:a.accent},children:""}),Ze&&s.jsx("button",{onClick:_=>{_.stopPropagation(),sn(!1)},style:{background:"none",border:"none",cursor:"pointer",color:a.textDim,padding:2},children:s.jsx(b.x,{size:16})})]}),Ze?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:8,lineHeight:1.5},children:"     ."}),s.jsx("div",{style:{fontSize:11,color:a.yellow,marginBottom:12,padding:"8px 12px",background:a.yellowBg,borderRadius:a.radiusSm,border:`1px solid ${a.yellowBorder}`},children:'      " "  .   .'}),s.jsx("div",{style:{fontSize:11,color:a.accent,marginBottom:12,padding:"8px 12px",background:a.accentBg,borderRadius:a.radiusSm,border:`1px solid ${a.accentBorder}`},children:"      ."}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:j?"1fr":"1fr 1fr",gap:12},children:[s.jsx(ye,{label:" *",placeholder:" ",value:yn,onChange:_=>Nn(_.target.value)}),s.jsx(ye,{label:" *",placeholder:"  ",value:Wn,onChange:_=>dr(_.target.value)})]}),s.jsx(ye,{label:"",placeholder:"  ",value:on,onChange:_=>Wr(_.target.value)}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase"},children:""}),s.jsx("textarea",{placeholder:"   ",value:Rn,onChange:_=>Ur(_.target.value),style:{width:"100%",padding:"10px 14px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:14,fontFamily:a.font,outline:"none",boxSizing:"border-box",transition:"border-color 0.2s",minHeight:100,resize:"vertical"},onFocus:_=>_.target.style.borderColor=a.accent,onBlur:_=>_.target.style.borderColor=a.border})]}),s.jsx(H,{variant:"primary",onClick:f1,disabled:!on.trim()||!Rn.trim()||!yn.trim()||!Wn.trim()||ur,children:ur?" ...":" "}),Hn&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",borderRadius:a.radiusSm,background:a.greenBg,border:`1px solid ${a.greenBorder}`,color:a.green,fontSize:12},children:[s.jsx(b.check,{size:14})," ",Hn]})]})]}):s.jsx("div",{style:{fontSize:12,color:a.textMuted,lineHeight:1.5},children:'  (   " "  )'})]})]})})})]})]})}function n_({user:e,onLogout:t,reservations:n,updateReservations:r,equipRentals:i,updateEquipRentals:o,equipmentDB:l,setEquipmentDB:c,addLog:d,addNotification:u,syncReservationToSheet:h,syncPrintToSheet:p,sendEmailNotification:f,warnings:S,inquiries:y,updateInquiries:w,printRequests:j,updatePrintRequests:m,isMobile:g,isDark:x,toggleDark:I}){const[N,F]=C.useState("dashboard"),$=e.safetyTrained,W=(y==null?void 0:y.filter(A=>A.name===e.name))||[],D=(j==null?void 0:j.filter(A=>A.studentId===e.id))||[],K=new Date().toISOString().slice(0,10),ie=(n==null?void 0:n.filter(A=>A.studentId===e.id))||[],P=ie.filter(A=>A.date>=K&&A.status==="approved").sort((A,te)=>A.date.localeCompare(te.date)),X=(i==null?void 0:i.filter(A=>A.studentId===e.id))||[],ce=X.filter(A=>A.status!=="returned"),J=D.filter(A=>A.status==="pending"||A.status==="processing");return s.jsxs("div",{className:"fade-in",style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:"20px 0 16px",borderBottom:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,color:a.accent,fontWeight:600,letterSpacing:"2px",textTransform:"uppercase"},children:"Student Portal"}),s.jsxs("div",{style:{fontSize:18,fontWeight:800,marginTop:4},children:[", ",e.name,""]}),s.jsxs("div",{style:{display:"flex",gap:6,marginTop:8},children:[s.jsx(re,{color:"dim",children:e.dept}),s.jsxs(re,{color:"dim",children:[e.year,""]}),s.jsx(re,{color:$?"green":"red",children:$?"  ":"  "}),(S==null?void 0:S[e.id])&&s.jsxs(re,{color:"orange",children:[s.jsx(b.alert,{size:12,style:{marginRight:4}})," ",S[e.id].count||1,""]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:I,children:x?s.jsx(b.sun,{size:15}):s.jsx(b.moon,{size:15})}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:t,children:[s.jsx(b.logout,{size:15})," "]})]})]}),!$&&s.jsx(ne,{style:{marginTop:20,background:a.redBg,borderColor:a.redBorder},children:s.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[s.jsx(b.alert,{size:20,color:a.red}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.red},children:" "}),s.jsx("div",{style:{fontSize:13,color:a.textMuted,marginTop:4,lineHeight:1.6},children:"         .   LMS   ."})]})]})}),$&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{paddingTop:24},children:s.jsx(Ku,{tabs:[{id:"dashboard",label:"",icon:s.jsx(b.grid,{size:15})},{id:"room",label:" ",icon:s.jsx(b.door,{size:15})},{id:"equipment",label:" ",icon:s.jsx(b.tool,{size:15})},{id:"print",label:" ",icon:s.jsx(b.file,{size:15}),badge:D.filter(A=>A.status==="pending"||A.status==="processing").length},{id:"history",label:" ",icon:s.jsx(b.history,{size:15})},{id:"inquiries",label:" ",icon:s.jsx(b.file,{size:15}),badges:[{count:W.filter(A=>A.status==="pending").length,color:a.red},{count:W.filter(A=>A.status==="answered").length,color:a.green}]}],active:N,onChange:F,isMobile:g})}),N==="dashboard"&&s.jsxs("div",{style:{paddingTop:20,display:"flex",flexDirection:"column",gap:16},children:[s.jsxs(ne,{style:{padding:0,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:a.accentBg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(b.door,{size:18,color:a.accent})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:" "}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:["  ",s.jsx("span",{style:{color:a.accent,fontWeight:700},children:P.length}),""]})]})]}),s.jsx(H,{size:"sm",onClick:()=>F("room"),children:" "})]}),s.jsx("div",{style:{padding:"14px 20px"},children:P.length===0?s.jsx("div",{style:{fontSize:12,color:a.textDim,textAlign:"center",padding:"8px 0"},children:"  "}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[P.slice(0,3).map(A=>{var te,L;return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:a.surface,borderRadius:8,border:`1px solid ${a.border}`},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:13,fontWeight:600,color:a.text},children:A.roomName}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:[" ",A.date,"   ",((te=A.slotLabels)==null?void 0:te[0])||"",((L=A.slotLabels)==null?void 0:L.length)>1?`  ${A.slotLabels.length-1}`:""]})]}),s.jsx(re,{color:"green",children:""})]},A.id)}),P.length>3&&s.jsxs("div",{style:{fontSize:11,color:a.textDim,textAlign:"center"},children:[" ",P.length-3," "]})]})})]}),s.jsxs(ne,{style:{padding:0,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:a.blueBg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(b.tool,{size:18,color:a.blue})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:" "}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:["  ",s.jsx("span",{style:{color:a.blue,fontWeight:700},children:ce.length}),""]})]})]}),s.jsx(H,{size:"sm",onClick:()=>F("equipment"),children:" "})]}),s.jsx("div",{style:{padding:"14px 20px"},children:ce.length===0?s.jsx("div",{style:{fontSize:12,color:a.textDim,textAlign:"center",padding:"8px 0"},children:"   "}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[ce.slice(0,3).map(A=>{var te;return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:a.surface,borderRadius:8,border:`1px solid ${a.border}`},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:13,fontWeight:600,color:a.text},children:((te=A.items)==null?void 0:te.map(L=>`${L.icon} ${L.name}`).join(", "))||""}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:[" : ",A.returnDate||""]})]}),s.jsx(re,{color:A.status==="pending_pickup"?"yellow":"blue",children:A.status==="pending_pickup"?" ":A.status==="ready"?" ":A.status})]},A.id)}),ce.length>3&&s.jsxs("div",{style:{fontSize:11,color:a.textDim,textAlign:"center"},children:[" ",ce.length-3," "]})]})})]}),s.jsxs(ne,{style:{padding:0,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:a.greenBg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(b.file,{size:18,color:a.green})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:" "}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:["  ",s.jsx("span",{style:{color:a.green,fontWeight:700},children:J.length}),""]})]})]}),s.jsx(H,{size:"sm",onClick:()=>F("print"),children:" "})]}),s.jsx("div",{style:{padding:"14px 20px"},children:J.length===0?s.jsx("div",{style:{fontSize:12,color:a.textDim,textAlign:"center",padding:"8px 0"},children:"    "}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[J.slice(0,3).map(A=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:a.surface,borderRadius:8,border:`1px solid ${a.border}`},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:13,fontWeight:600,color:a.text},children:[A.paperSize," ",A.colorMode==="BW"?"":"","  ",A.copies,""]}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:[" ",(A.totalPrice||0).toLocaleString(),"  ",new Date(A.createdAt).toLocaleDateString("ko-KR")]})]}),s.jsx(re,{color:A.status==="pending"?"yellow":"blue",children:A.status==="pending"?"":" "})]},A.id)),J.length>3&&s.jsxs("div",{style:{fontSize:11,color:a.textDim,textAlign:"center"},children:[" ",J.length-3," "]})]})})]}),(()=>{const A=[...ie.map(te=>({...te,sortTime:te.createdAt})),...X.map(te=>({...te,sortTime:te.createdAt}))].sort((te,L)=>L.sortTime.localeCompare(te.sortTime));return s.jsxs(ne,{style:{padding:0,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:a.surface,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(b.history,{size:18,color:a.textMuted})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:" "}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:[" ",s.jsx("span",{style:{fontWeight:700},children:A.length}),""]})]})]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>F("history"),children:" "})]}),s.jsx("div",{style:{padding:"14px 20px"},children:A.length===0?s.jsx("div",{style:{fontSize:12,color:a.textDim,textAlign:"center",padding:"8px 0"},children:" "}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[A.slice(0,4).map(te=>{var L,ee,T;return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:a.surface,borderRadius:6,border:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx(re,{color:te.type==="room"?"blue":"accent",style:{fontSize:10},children:te.type==="room"?"":""}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.text},children:te.type==="room"?te.roomName:(L=te.items)==null?void 0:L.map(q=>`${q.icon} ${q.name}`).join(", ")}),s.jsx("div",{style:{fontSize:10,color:a.textMuted},children:te.type==="room"?`${te.date}  ${((ee=te.slotLabels)==null?void 0:ee[0])||""}${((T=te.slotLabels)==null?void 0:T.length)>1?`  ${te.slotLabels.length-1}`:""}`:`: ${te.returnDate||""}`})]})]}),s.jsx(re,{color:te.status==="approved"?"green":te.status==="cancelled"||te.status==="rejected"?"red":te.status==="returned"?"dim":"yellow",style:{fontSize:10},children:te.status==="approved"?"":te.status==="pending_pickup"?"":te.status==="ready"?"":te.status==="cancelled"?"":te.status==="rejected"?"":te.status==="returned"?"":""})]},te.id)}),A.length>4&&s.jsxs("div",{style:{fontSize:11,color:a.textDim,textAlign:"center",paddingTop:4},children:[" ",A.length-4," "]})]})})]})})(),s.jsxs(ne,{style:{padding:0,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:a.surface,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(b.file,{size:18,color:a.textMuted})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:" "}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted,marginTop:2},children:[" ",s.jsx("span",{style:{color:a.red,fontWeight:700},children:W.filter(A=>A.status==="pending").length}),"   ",s.jsx("span",{style:{color:a.green,fontWeight:700},children:W.filter(A=>A.status==="answered").length}),""]})]})]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>F("inquiries"),children:" "})]}),s.jsx("div",{style:{padding:"14px 20px"},children:W.length===0?s.jsx("div",{style:{fontSize:12,color:a.textDim,textAlign:"center",padding:"8px 0"},children:"  "}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[W.slice(0,4).map(A=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:a.surface,borderRadius:6,border:`1px solid ${a.border}`},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.text},children:A.title}),s.jsx("div",{style:{fontSize:10,color:a.textMuted},children:A.createdAt})]}),s.jsx(re,{color:A.status==="answered"?"green":"yellow",style:{fontSize:10},children:A.status==="answered"?"":""})]},A.id)),W.length>4&&s.jsxs("div",{style:{fontSize:11,color:a.textDim,textAlign:"center",paddingTop:4},children:[" ",W.length-4," "]})]})})]})]}),N==="room"&&s.jsx(r_,{user:e,reservations:n,updateReservations:r,addLog:d,addNotification:u,syncReservationToSheet:h,sendEmailNotification:f,isMobile:g}),N==="equipment"&&s.jsx(i_,{user:e,equipRentals:i,updateEquipRentals:o,equipmentDB:l,setEquipmentDB:c,addLog:d,addNotification:u,sendEmailNotification:f,isMobile:g}),N==="print"&&s.jsx(s_,{user:e,printRequests:D,updatePrintRequests:m,addLog:d,addNotification:u,syncPrintToSheet:p,sendEmailNotification:f,isMobile:g}),N==="history"&&s.jsx(o_,{user:e,reservations:n,equipRentals:i,updateReservations:r,sendEmailNotification:f,addLog:d,addNotification:u}),N==="inquiries"&&s.jsx(l_,{user:e,inquiries:W,updateInquiries:w})]})]})}function r_({user:e,reservations:t,updateReservations:n,addLog:r,addNotification:i,syncReservationToSheet:o,sendEmailNotification:l,isMobile:c}){var ie;const[d,u]=C.useState(null),[h,p]=C.useState(Xv()),[f,S]=C.useState([]),[y,w]=C.useState(""),[j,m]=C.useState("1"),[g,x]=C.useState(!1),[I,N]=C.useState(null),[F,$]=C.useState(""),W=P=>S(X=>X.includes(P)?X.filter(ce=>ce!==P):[...X,P]),D=C.useMemo(()=>!d||!h?new Set:new Set(t.filter(P=>P.roomId===d&&P.date===h&&!["cancelled","rejected"].includes(P.status)).flatMap(P=>P.slots)),[t,d,h]),K=()=>{if(!(!d||f.length===0)){if(f.some(P=>D.has(P))){$("    .   .");return}$(""),x(!0),setTimeout(()=>{const P=qr.find(J=>J.id===d),X=f.map(J=>{var A;return(A=_c.find(te=>te.id===J))==null?void 0:A.label}).filter(Boolean).sort(),ce={id:ss(),type:"room",studentId:e.id,studentName:e.name,studentDept:e.dept,roomId:d,roomName:P.name,date:h,slots:f,slotLabels:X,purpose:y||" ",members:parseInt(j)||1,status:"approved",createdAt:Ft(),autoApproved:!0};n(J=>[ce,...J]),r(`[] ${e.name}(${e.id})  ${P.name}  | ${h} ${X.join(", ")} | ${ce.purpose}`,"reservation",{studentId:e.id,roomId:d}),i(`  : ${e.name}  ${P.name} (${qv(h)} ${X[0]}${X.length>1?`  ${X.length-1}`:""})`,"room"),l({to:e.email||void 0,subject:`[  ] ${e.name}  ${P.name}`,body:["    .","","[ ]",`- : ${e.name} (${e.id})`,`- /: ${e.dept} ${e.year}`,`- : ${P.name}`,`- : ${h}`,`- : ${X.join(", ")}`,`- : ${y||" "}`,`- : ${parseInt(j)||1}`,"","[]","-   .","-  /     .","","  "].join(`
`)}),o==null||o(ce),N(ce),x(!1),S([]),w(""),alert(`  !

    5   .`)},800)}};return s.jsxs("div",{className:"fade-in",children:[I&&s.jsx(ne,{style:{marginBottom:20,background:a.greenBg,borderColor:a.greenBorder},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(b.check,{size:20,color:a.green}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.green},children:"  !"}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted,marginTop:2},children:[I.roomName,"  ",I.date,"  ",I.slotLabels.join(", ")]})]}),s.jsx(H,{variant:"ghost",size:"sm",style:{marginLeft:"auto"},onClick:()=>N(null),children:s.jsx(b.x,{size:14})})]})}),F&&s.jsx(ne,{style:{marginBottom:20,background:a.redBg,borderColor:a.redBorder},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(b.alert,{size:18,color:a.red}),s.jsx("div",{style:{fontSize:13,color:a.red},children:F})]})}),s.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",gap:c?16:24,minHeight:c?"auto":500},children:[s.jsxs("div",{style:{width:c?"100%":280,flexShrink:0},children:[s.jsx(ct,{icon:s.jsx(b.door,{size:16,color:a.accent}),children:" "}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:qr.map(P=>{const X=d===P.id,ce=t.filter(J=>J.roomId===P.id&&J.date===h&&!["cancelled","rejected"].includes(J.status)).length;return s.jsxs(ne,{onClick:()=>u(P.id),style:{padding:16,cursor:"pointer",borderColor:X?a.accent:a.border,background:X?a.accentBg:a.card,transition:"all 0.2s",borderLeft:X?`3px solid ${a.accent}`:"3px solid transparent"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsx("div",{style:{fontSize:15,fontWeight:700,color:X?a.accent:a.text},children:P.name}),s.jsx(re,{color:X?"accent":"dim",children:P.floor})]}),s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginTop:6},children:P.building}),s.jsxs("div",{style:{fontSize:11,color:a.textDim,marginTop:4,display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:P.equipment}),ce>0&&s.jsxs(re,{color:"yellow",style:{fontSize:10},children:[" ",ce,""]})]})]},P.id)})})]}),s.jsx("div",{style:{flex:1},children:d?s.jsxs("div",{children:[(()=>{const P=qr.find(X=>X.id===d);return s.jsx(ne,{style:{marginBottom:20,padding:20,background:a.accentBg,borderColor:a.accent},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:20,fontWeight:800,color:a.accent,marginBottom:4},children:P==null?void 0:P.name}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted},children:[P==null?void 0:P.building,"  ",P==null?void 0:P.floor]}),s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginTop:6},children:[" ",P==null?void 0:P.equipment]})]}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>u(null),children:[s.jsx(b.x,{size:14}),"  "]})]})})})(),(()=>{const P=qr.find(X=>X.id===d);return(P==null?void 0:P.rules)&&s.jsx(ne,{style:{marginBottom:20,background:a.yellowBg,borderColor:a.yellowBorder,padding:14},children:s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:13,color:a.yellow},children:[s.jsx(b.alert,{size:16})," ",s.jsx("strong",{children:" :"})," ",P.rules]})})})(),s.jsx(ct,{icon:s.jsx(b.calendar,{size:16,color:a.accent}),children:"   "}),s.jsxs(ne,{style:{marginBottom:24},children:[s.jsxs("div",{style:{display:"flex",gap:16,marginBottom:18,flexWrap:"wrap"},children:[s.jsx(ye,{label:" ",type:"date",value:h,onChange:P=>{p(P.target.value),S([])},style:{maxWidth:180}}),s.jsx(ye,{label:" ",type:"number",min:"1",max:"30",value:j,onChange:P=>m(P.target.value),style:{maxWidth:100}})]}),s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:10},children:"  ( )"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(115px, 1fr))",gap:6},children:_c.map(P=>{const X=D.has(P.id),ce=f.includes(P.id);return s.jsx("button",{disabled:X,onClick:()=>!X&&W(P.id),style:{padding:"9px 8px",borderRadius:a.radiusSm,fontSize:12,fontWeight:500,fontFamily:a.fontMono,cursor:X?"not-allowed":"pointer",border:`1px solid ${ce?a.accent:a.border}`,background:ce?a.accentBg:X?"rgba(255,255,255,0.02)":a.surface,color:ce?a.accent:X?a.textDim:a.textMuted,opacity:X?.4:1,transition:"all 0.15s",textDecoration:X?"line-through":"none"},children:P.label},P.id)})}),D.size>0&&s.jsx("div",{style:{fontSize:11,color:a.textDim,marginTop:8},children:" =   "})]}),s.jsx(ct,{icon:s.jsx(b.info,{size:16,color:a.accent}),children:" "}),s.jsx(ne,{style:{marginBottom:24},children:s.jsx(ye,{placeholder:":   ,    ",value:y,onChange:P=>w(P.target.value)})}),f.length>0&&s.jsxs(ne,{style:{marginBottom:20,background:a.surface,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:8},children:" "}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12},children:[s.jsx(re,{color:"accent",children:(ie=qr.find(P=>P.id===d))==null?void 0:ie.name}),s.jsx(re,{color:"blue",children:h}),s.jsxs(re,{color:"green",children:[f.length,""]}),s.jsxs(re,{color:"dim",children:[j,""]})]}),s.jsxs("div",{style:{fontSize:12,color:a.textDim},children:[": ",f.map(P=>{var X;return(X=_c.find(ce=>ce.id===P))==null?void 0:X.label}).filter(Boolean).sort().join(", ")]})]}),s.jsx(H,{size:"lg",onClick:K,disabled:f.length===0||!y.trim()||g,style:{width:"100%",justifyContent:"center",marginBottom:40},children:g?" ...":`  (${f.length})`})]}):s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:a.surface,borderRadius:16,border:`2px dashed ${a.border}`,padding:40},children:[s.jsx("div",{style:{fontSize:64,marginBottom:16,opacity:.5},children:""}),s.jsx("div",{style:{fontSize:16,fontWeight:600,color:a.textMuted,marginBottom:8},children:" "}),s.jsxs("div",{style:{fontSize:13,color:a.textDim,textAlign:"center"},children:["    ",s.jsx("br",{}),"    "]})]})})]})]})}function i_({user:e,equipRentals:t,updateEquipRentals:n,equipmentDB:r,setEquipmentDB:i,addLog:o,addNotification:l,sendEmailNotification:c,isMobile:d}){const[u,h]=C.useState(null),[p,f]=C.useState(Jv(3)),[S,y]=C.useState(""),[w,j]=C.useState(!1),[m,g]=C.useState(null),[x,I]=C.useState(""),N=["",...new Set(r.map(D=>D.category))],F=x===""?r:r.filter(D=>D.category===x),$=D=>h(K=>K===D?null:D),W=()=>{u&&(j(!0),setTimeout(()=>{const D=r.find(ie=>ie.id===u);if(!D)return;const K={id:ss(),type:"equipment",studentId:e.id,studentName:e.name,studentDept:e.dept,studentEmail:e.email||"",items:[{id:D.id,name:D.name,icon:D.icon}],returnDate:p,note:S||"",status:"pending_pickup",createdAt:Ft()};n(ie=>[K,...ie]),i(ie=>ie.map(P=>P.id===D.id?{...P,available:Math.max(0,P.available-1)}:P)),o(`[] ${e.name}(${e.id})  ${D.name} | : ${p}`,"equipment",{studentId:e.id}),l(`  : ${e.name}  ${D.name}`,"equipment",!0),c==null||c({to:e.email||void 0,subject:`[  ] ${e.name}  ${D.name}`,body:`   .

- : ${e.name} (${e.id})
- : ${D.icon} ${D.name}
-  : ${p}
- : ${S||""}

 .`}),g(K),j(!1),h(null),y("")},800))};return s.jsxs("div",{className:"fade-in",children:[m&&s.jsx(ne,{style:{marginBottom:20,background:a.greenBg,borderColor:a.greenBorder},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(b.check,{size:20,color:a.green}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.green},children:"  !"}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted,marginTop:2},children:[m.items.map(D=>D.name).join(", "),"   ",m.returnDate]})]}),s.jsx(H,{variant:"ghost",size:"sm",style:{marginLeft:"auto"},onClick:()=>g(null),children:s.jsx(b.x,{size:14})})]})}),s.jsx(ne,{style:{marginBottom:20,padding:14,background:a.blueBg,borderColor:a.blueBorder},children:s.jsxs("div",{style:{fontSize:13,color:a.blue,display:"flex",alignItems:"center",gap:8},children:[s.jsx(b.bell,{size:16}),"       .  ."]})}),s.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?16:24,minHeight:d?"auto":500},children:[s.jsxs("div",{style:{width:d?"100%":320,flexShrink:0},children:[s.jsx(ct,{icon:s.jsx(b.tool,{size:16,color:a.accent}),children:" "}),s.jsx("div",{style:{display:"flex",gap:6,marginBottom:16,flexWrap:"wrap"},children:N.map(D=>s.jsx("button",{onClick:()=>I(D),style:{padding:"6px 14px",borderRadius:20,border:`1px solid ${x===D?a.accent:a.border}`,background:x===D?a.accentBg:"transparent",color:x===D?a.accent:a.textMuted,fontSize:12,fontWeight:500,cursor:"pointer",fontFamily:a.font,transition:"all 0.15s"},children:D},D))}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:d?"none":450,overflowY:d?"visible":"auto",paddingRight:d?0:4},children:F.map(D=>{const K=u===D.id,ie=D.available===0;return s.jsxs(ne,{onClick:()=>!ie&&$(D.id),style:{padding:14,cursor:ie?"not-allowed":"pointer",opacity:ie?.4:1,borderColor:K?a.accent:a.border,background:K?a.accentBg:a.card,borderLeft:K?`3px solid ${a.accent}`:"3px solid transparent",display:"flex",alignItems:"center",gap:12,transition:"all 0.2s"},children:[s.jsx("div",{style:{fontSize:28,width:40,textAlign:"center"},children:D.icon}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:14,fontWeight:600,color:K?a.accent:a.text},children:D.name}),s.jsxs("div",{style:{display:"flex",gap:6,marginTop:4,flexWrap:"wrap"},children:[s.jsxs(re,{color:D.available>0?"dim":"red",style:{fontSize:10},children:[" ",D.available,"/",D.total]}),s.jsxs(re,{color:"dim",style:{fontSize:10},children:[" ",D.maxDays,""]})]})]}),K&&s.jsx("div",{style:{color:a.accent},children:s.jsx(b.check,{size:20})})]},D.id)})})]}),s.jsx("div",{style:{flex:1},children:u?(()=>{const D=r.find(K=>K.id===u);return D?s.jsxs("div",{children:[s.jsx(ct,{icon:s.jsx(b.info,{size:16,color:a.accent}),children:"  "}),s.jsx(ne,{style:{marginBottom:20},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,padding:12,background:a.surface,borderRadius:8},children:[s.jsx("div",{style:{fontSize:32,width:50,textAlign:"center"},children:D.icon}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:15,fontWeight:600,color:a.text,marginBottom:4},children:D.name}),s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[s.jsxs(re,{color:"dim",children:[" ",D.available,"/",D.total]}),s.jsxs(re,{color:"blue",children:[" ",D.maxDays," "]}),D.deposit&&s.jsx(re,{color:"yellow",children:" "})]})]})]})}),s.jsx(ct,{icon:s.jsx(b.calendar,{size:16,color:a.accent}),children:" "}),s.jsx(ne,{style:{marginBottom:24},children:s.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[s.jsx(ye,{label:" ",type:"date",value:p,onChange:K=>f(K.target.value),style:{maxWidth:180}}),s.jsx("div",{style:{flex:1,minWidth:200},children:s.jsx(ye,{label:" ()",placeholder:": ,  ",value:S,onChange:K=>y(K.target.value)})})]})}),s.jsxs(ne,{style:{marginBottom:20,background:a.surface,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:8},children:" "}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12},children:[s.jsxs(re,{color:"accent",children:[D.icon," ",D.name]}),s.jsxs(re,{color:"blue",children:[": ",p]})]})]}),s.jsx(H,{size:"lg",onClick:W,disabled:w,style:{width:"100%",justifyContent:"center",marginBottom:40},children:w?" ...":`${D.name}  `})]}):null})():s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:a.surface,borderRadius:16,border:`2px dashed ${a.border}`,padding:40},children:[s.jsx("div",{style:{fontSize:64,marginBottom:16,opacity:.5},children:""}),s.jsx("div",{style:{fontSize:16,fontWeight:600,color:a.textMuted,marginBottom:8},children:" "}),s.jsxs("div",{style:{fontSize:13,color:a.textDim,textAlign:"center"},children:["    ",s.jsx("br",{}),"    "]})]})})]})]})}const wc={A4_BW:50,A4_COLOR:200,A3_BW:100,A3_COLOR:500,A2_BW:500,A2_COLOR:1500,A1_BW:1e3,A1_COLOR:3e3,A0_BW:2e3,A0_COLOR:5e3},Jh="3333-12-3456789";function s_({user:e,printRequests:t,updatePrintRequests:n,addLog:r,addNotification:i,syncPrintToSheet:o,sendEmailNotification:l,isMobile:c}){const[d,u]=C.useState("A4"),[h,p]=C.useState("BW"),[f,S]=C.useState(1),[y,w]=C.useState(null),[j,m]=C.useState(null),[g,x]=C.useState(!1),[I,N]=C.useState(""),[F,$]=C.useState(!1),[W,D]=C.useState(!1),K=C.useRef(null),ie=C.useRef(null),P=`${d}_${h}`,X=wc[P]||50,ce=X*f,J=T=>{var ue;const q=(ue=T.target.files)==null?void 0:ue[0];if(q){const he=new FileReader;he.onload=()=>{w({name:q.name,size:q.size,type:q.type,data:he.result})},he.readAsDataURL(q)}},A=T=>{var ue;const q=(ue=T.target.files)==null?void 0:ue[0];if(q){const he=new FileReader;he.onload=()=>{m({name:q.name,size:q.size,type:q.type,data:he.result})},he.readAsDataURL(q)}},te=async()=>{if(!y){alert("  .");return}if(!j){alert("   .");return}x(!0);const T={id:ss(),studentId:e.id,studentName:e.name,studentDept:e.dept,studentEmail:e.email||"",paperSize:d,colorMode:h,copies:f,unitPrice:X,totalPrice:ce,printFile:y,paymentProof:j,note:I.trim(),urgentPickup:F,status:"pending",createdAt:Ft(),completedAt:null};n(q=>[T,...q]),r(` : ${d} ${h==="BW"?"":""} ${f}`,"print",{studentId:e.id}),i(`   : ${e.name} - ${d} ${f}`,"info",!0),await(o==null?void 0:o(T)),l==null||l({to:e.email||void 0,subject:`[  ] ${e.name}  ${d} ${f}`,body:`  .

- : ${e.name} (${e.id})
- : ${d}
- : ${h==="BW"?"":""}
- : ${f}
- : ${ce.toLocaleString()}
- : ${I.trim()||""}

   .`}),w(null),m(null),S(1),N(""),$(!1),x(!1),alert("  !    .")},L={pending:"",processing:"",completed:"",cancelled:""},ee={pending:"yellow",processing:"blue",completed:"green",cancelled:"red"};return s.jsxs("div",{style:{paddingTop:20},children:[s.jsxs(ne,{style:{marginBottom:20,background:a.surface},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[s.jsx(b.file,{size:20,color:a.accent}),s.jsx("div",{style:{fontSize:15,fontWeight:700,color:a.text},children:"    "})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:c?"repeat(3, 1fr)":"repeat(5, 1fr)",gap:8,marginBottom:16},children:["A4","A3","A2","A1","A0"].map(T=>s.jsxs("div",{style:{background:a.card,padding:10,borderRadius:8,textAlign:"center",border:`1px solid ${a.border}`},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.accent,marginBottom:6},children:T}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted},children:[" ",wc[`${T}_BW`],""]}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted},children:[" ",wc[`${T}_COLOR`],""]})]},T))}),s.jsxs("div",{style:{fontSize:12,color:a.textMuted,lineHeight:1.6},children:[" ",s.jsx("strong",{children:" :"}),"  ",Jh,s.jsx("br",{})," ",s.jsx("strong",{children:":"}),"  10:00~17:00 ( 12:00~13:00 )",s.jsx("br",{})," ",s.jsx("strong",{children:":"}),"   ( 6)"]}),s.jsxs("button",{onClick:()=>D(!0),style:{width:"100%",marginTop:16,padding:"14px 16px",borderRadius:10,background:`linear-gradient(135deg, ${a.accentBg} 0%, ${a.surface} 100%)`,border:`1px solid ${a.accent}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s",fontFamily:a.font},onMouseOver:T=>T.currentTarget.style.transform="translateY(-2px)",onMouseOut:T=>T.currentTarget.style.transform="translateY(0)",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("span",{style:{fontSize:18},children:""}),s.jsx("span",{style:{fontSize:14,fontWeight:600,color:a.text},children:"   "})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.length>0?s.jsx(s.Fragment,{children:s.jsxs("span",{style:{fontSize:12,color:a.textMuted},children:[t.filter(T=>T.status==="pending").length>0&&s.jsxs(re,{color:"yellow",style:{marginRight:6},children:[" ",t.filter(T=>T.status==="pending").length]}),t.filter(T=>T.status==="processing").length>0&&s.jsxs(re,{color:"blue",style:{marginRight:6},children:[" ",t.filter(T=>T.status==="processing").length]}),t.filter(T=>T.status==="completed").length>0&&s.jsxs(re,{color:"green",children:[" ",t.filter(T=>T.status==="completed").length]})]})}):s.jsx("span",{style:{fontSize:12,color:a.textDim},children:"  "}),s.jsx("span",{style:{fontSize:16,color:a.accent},children:""})]})]})]}),W&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>D(!1),children:s.jsxs("div",{style:{background:a.card,borderRadius:16,width:"100%",maxWidth:500,maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontSize:16,fontWeight:700,color:a.text},children:"    "}),s.jsx("button",{onClick:()=>D(!1),style:{width:32,height:32,borderRadius:8,border:"none",background:a.surface,color:a.textMuted,fontSize:16,cursor:"pointer",fontFamily:a.font},children:""})]}),s.jsx("div",{style:{padding:20,overflowY:"auto",flex:1},children:t.length===0?s.jsxs("div",{style:{textAlign:"center",padding:40,color:a.textDim},children:[s.jsx("div",{style:{fontSize:48,marginBottom:12},children:""}),s.jsx("div",{style:{fontSize:14},children:"   "})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:t.map(T=>{var q,ue,he,Re;return s.jsxs("div",{style:{padding:16,background:a.surface,borderRadius:12,border:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10},children:[s.jsxs("div",{children:[s.jsx("span",{style:{fontSize:15,fontWeight:600,color:a.text},children:T.paperSize}),s.jsx("span",{style:{fontSize:12,marginLeft:8,padding:"2px 8px",borderRadius:4,background:T.colorMode==="BW"?a.surface:"linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3)",color:T.colorMode==="BW"?a.textMuted:"#fff",border:`1px solid ${a.border}`},children:T.colorMode==="BW"?"":""}),s.jsxs("span",{style:{fontSize:13,color:a.textMuted,marginLeft:8},children:[" ",T.copies,""]})]}),s.jsx(re,{color:ee[T.status],children:L[T.status]})]}),s.jsxs("div",{style:{fontSize:12,color:a.textMuted,marginBottom:6},children:[" ",((q=T.printFile)==null?void 0:q.name)||"  "]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("span",{style:{fontSize:11,color:a.textDim},children:[": ",(ue=T.createdAt)==null?void 0:ue.slice(0,10)," ",(he=T.createdAt)==null?void 0:he.slice(11,16)]}),s.jsxs("span",{style:{fontSize:14,fontWeight:700,color:a.accent},children:[(Re=T.totalPrice)==null?void 0:Re.toLocaleString(),""]})]}),T.urgentPickup&&s.jsx("div",{style:{fontSize:11,color:a.red,marginTop:6},children:"   "}),T.note&&s.jsxs("div",{style:{fontSize:11,color:a.textDim,marginTop:4,padding:"6px 8px",background:a.card,borderRadius:6},children:[" ",T.note]})]},T.id)})})}),s.jsx("div",{style:{padding:"12px 20px",borderTop:`1px solid ${a.border}`,background:a.surface},children:s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>D(!1),style:{width:"100%",justifyContent:"center"},children:""})})]})}),s.jsxs(ne,{style:{marginBottom:20},children:[s.jsx("div",{style:{fontSize:15,fontWeight:700,marginBottom:16,color:a.text},children:"  "}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:8},children:" "}),s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["A4","A3","A2","A1","A0"].map(T=>s.jsx("button",{onClick:()=>u(T),style:{padding:"10px 20px",borderRadius:8,border:`1px solid ${d===T?a.accent:a.border}`,background:d===T?a.accentBg:"transparent",color:d===T?a.accent:a.textMuted,fontSize:14,fontWeight:600,cursor:"pointer",fontFamily:a.font},children:T},T))})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:8},children:""}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{onClick:()=>p("BW"),style:{padding:"10px 24px",borderRadius:8,border:`1px solid ${h==="BW"?a.accent:a.border}`,background:h==="BW"?a.accentBg:"transparent",color:h==="BW"?a.accent:a.textMuted,fontSize:14,fontWeight:600,cursor:"pointer",fontFamily:a.font},children:" "}),s.jsx("button",{onClick:()=>p("COLOR"),style:{padding:"10px 24px",borderRadius:8,border:`1px solid ${h==="COLOR"?a.accent:a.border}`,background:h==="COLOR"?a.accentBg:"transparent",color:h==="COLOR"?a.accent:a.textMuted,fontSize:14,fontWeight:600,cursor:"pointer",fontFamily:a.font},children:" "})]})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:8},children:""}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("button",{onClick:()=>S(Math.max(1,f-1)),style:{width:36,height:36,borderRadius:8,border:`1px solid ${a.border}`,background:a.surface,color:a.text,fontSize:18,cursor:"pointer",fontFamily:a.font},children:"-"}),s.jsx("input",{type:"number",value:f,onChange:T=>S(Math.max(1,parseInt(T.target.value)||1)),min:1,style:{width:60,padding:"8px 12px",borderRadius:8,border:`1px solid ${a.border}`,background:a.surface,color:a.text,fontSize:16,fontWeight:600,textAlign:"center",fontFamily:a.font}}),s.jsx("button",{onClick:()=>S(f+1),style:{width:36,height:36,borderRadius:8,border:`1px solid ${a.border}`,background:a.surface,color:a.text,fontSize:18,cursor:"pointer",fontFamily:a.font},children:"+"}),s.jsxs("span",{style:{fontSize:13,color:a.textMuted,marginLeft:8},children:[" ",X,""]})]})]}),s.jsxs("div",{style:{padding:16,background:a.accentBg,borderRadius:8,marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:14,fontWeight:600,color:a.text},children:"  "}),s.jsxs("span",{style:{fontSize:24,fontWeight:800,color:a.accent},children:[ce.toLocaleString(),""]})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsxs("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:8},children:["   ",s.jsx("span",{style:{color:a.red},children:"*"})]}),s.jsx("input",{type:"file",ref:K,onChange:J,accept:".pdf,.jpg,.jpeg,.png,.ai,.psd,.dwg",style:{display:"none"}}),s.jsx("button",{onClick:()=>{var T;return(T=K.current)==null?void 0:T.click()},style:{width:"100%",padding:16,borderRadius:8,border:`2px dashed ${y?a.green:a.border}`,background:y?a.greenBg:"transparent",color:y?a.green:a.textMuted,fontSize:13,cursor:"pointer",fontFamily:a.font,textAlign:"center"},children:y?` ${y.name}`:"   (PDF, JPG, PNG, AI, PSD, DWG)"})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsxs("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:8},children:["   ",s.jsx("span",{style:{color:a.red},children:"*"})]}),s.jsxs("div",{style:{fontSize:11,color:a.yellow,marginBottom:8,padding:"8px 12px",background:a.yellowBg,borderRadius:6},children:["  ",Jh," ",ce.toLocaleString(),"   "]}),s.jsx("input",{type:"file",ref:ie,onChange:A,accept:".jpg,.jpeg,.png",style:{display:"none"}}),s.jsx("button",{onClick:()=>{var T;return(T=ie.current)==null?void 0:T.click()},style:{width:"100%",padding:16,borderRadius:8,border:`2px dashed ${j?a.green:a.border}`,background:j?a.greenBg:"transparent",color:j?a.green:a.textMuted,fontSize:13,cursor:"pointer",fontFamily:a.font,textAlign:"center"},children:j?` ${j.name}`:"    "})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:8},children:" ()"}),s.jsx("textarea",{value:I,onChange:T=>N(T.target.value),placeholder:":  /   /   ",style:{width:"100%",padding:12,borderRadius:8,border:`1px solid ${a.border}`,background:a.surface,color:a.text,fontSize:13,fontFamily:a.font,resize:"none",minHeight:60}})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:F,onChange:T=>$(T.target.checked),style:{width:18,height:18}}),s.jsx("span",{style:{fontSize:13,color:a.text},children:"    (   )"})]}),s.jsx(H,{size:"lg",onClick:te,disabled:g||!y||!j,style:{width:"100%",justifyContent:"center"},children:g?" ...":" "})]})]})}function o_({user:e,reservations:t,equipRentals:n,updateReservations:r,sendEmailNotification:i,addLog:o,addNotification:l}){const[c,d]=C.useState(null),[u,h]=C.useState(!1),p=t.filter(j=>j.studentId===e.id),f=n.filter(j=>j.studentId===e.id),S=[...p.map(j=>({...j,sortTime:j.createdAt})),...f.map(j=>({...j,sortTime:j.createdAt}))].sort((j,m)=>m.sortTime.localeCompare(j.sortTime)),y=j=>{if(j.type!=="room"||["cancelled","rejected","completed"].includes(j.status))return!1;const m=new Date().toISOString().slice(0,10);return j.date>=m},w=j=>{h(!0),setTimeout(()=>{var m,g;r(x=>x.map(I=>I.id===j.id?{...I,status:"cancelled",cancelledAt:new Date().toISOString().replace("T"," ").slice(0,19)}:I)),o==null||o(`[] ${e.name}(${e.id})  ${j.roomName} | ${j.date} ${(m=j.slotLabels)==null?void 0:m.join(", ")}  .`,"reservation",{studentId:e.id,roomId:j.roomId}),l==null||l(`  : ${e.name}  ${j.roomName} (${j.date})`,"room"),i==null||i({to:e.email||void 0,subject:`[  ] ${e.name}  ${j.roomName}`,body:["    .","","[  ]",`- : ${e.name} (${e.id})`,`- /: ${e.dept} ${e.year}`,`- : ${j.roomName}`,`- : ${j.date}`,`- : ${(g=j.slotLabels)==null?void 0:g.join(", ")}`,`- : ${j.purpose||" "}`,"","[]","-         .","-       .","","  "].join(`
`)}),h(!1),d(null),alert(`  .
  .`)},500)};return s.jsxs("div",{className:"fade-in",children:[s.jsxs(ct,{icon:s.jsx(b.history,{size:16,color:a.accent}),children:[" ",s.jsxs(re,{color:"dim",children:[S.length,""]})]}),S.length===0?s.jsx(Jt,{icon:s.jsx(b.calendar,{size:32}),text:"   "}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:S.map(j=>{var m,g;return s.jsxs(ne,{style:{padding:16},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx(re,{color:j.type==="room"?"blue":"accent",children:j.type==="room"?"":""}),s.jsx(re,{color:j.status==="approved"?"green":j.status==="ready"?"blue":j.status==="cancelled"||j.status==="rejected"?"red":"yellow",children:j.status==="approved"?"":j.status==="ready"?"":j.status==="cancelled"?"":j.status==="rejected"?"":j.status==="returned"?"":""})]}),j.type==="room"?s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:600},children:j.roomName}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted,marginTop:4},children:[j.date,"  ",(m=j.slotLabels)==null?void 0:m.join(", ")]}),j.purpose&&s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginTop:2},children:[": ",j.purpose]}),y(j)&&s.jsx("div",{style:{marginTop:12,display:"flex",gap:8},children:c===j.id?s.jsxs(s.Fragment,{children:[s.jsx("span",{style:{fontSize:13,color:a.red},children:" ?"}),s.jsx(H,{variant:"primary",size:"sm",style:{background:a.red},onClick:()=>w(j),disabled:u,children:u?" ...":", "}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>d(null),children:""})]}):s.jsxs(H,{variant:"ghost",size:"sm",style:{color:a.red,borderColor:a.red},onClick:()=>d(j.id),children:[s.jsx(b.x,{size:14}),"  "]})})]}):s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:14,fontWeight:600},children:(g=j.items)==null?void 0:g.map(x=>`${x.icon} ${x.name}`).join(", ")}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted,marginTop:4},children:[": ",j.returnDate]})]}),s.jsx("div",{style:{fontSize:11,color:a.textDim,marginTop:8},children:j.createdAt})]},j.id)})})]})}function l_({user:e,inquiries:t,updateInquiries:n}){const[r,i]=C.useState(null),[o,l]=C.useState(!1),[c,d]=C.useState(""),[u,h]=C.useState(""),[p,f]=C.useState(!1),[S,y]=C.useState(""),w=()=>{if(!c.trim()||!u.trim())return;f(!0);const j={id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:c.trim(),content:u.trim(),name:e.name,contact:e.id,createdAt:new Date().toISOString().replace("T"," ").slice(0,19),status:"pending",answer:null,isLoggedIn:!0};n(m=>[j,...m]),d(""),h(""),f(!1),l(!1),y(" !"),setTimeout(()=>y(""),3e3)};return s.jsxs("div",{className:"fade-in",children:[s.jsxs(ct,{icon:s.jsx(b.file,{size:16,color:a.accent}),children:["  ",s.jsxs(re,{color:"dim",children:[t.length,""]}),s.jsx(H,{variant:"primary",size:"sm",style:{marginLeft:"auto"},onClick:()=>l(!o),children:o?"":"+  "})]}),S&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"10px 14px",borderRadius:a.radiusSm,background:a.greenBg,border:`1px solid ${a.greenBorder}`,color:a.green,fontSize:13,marginBottom:16},children:[s.jsx(b.check,{size:16})," ",S]}),o&&s.jsxs(ne,{style:{marginBottom:16,background:a.accentBg,borderColor:a.accentBorder},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.accent,marginBottom:12},children:"  "}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[s.jsx(ye,{label:"",placeholder:"  ",value:c,onChange:j=>d(j.target.value)}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase"},children:""}),s.jsx("textarea",{placeholder:"   ",value:u,onChange:j=>h(j.target.value),style:{width:"100%",padding:"10px 14px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:14,fontFamily:a.font,outline:"none",boxSizing:"border-box",transition:"border-color 0.2s",minHeight:100,resize:"vertical"},onFocus:j=>j.target.style.borderColor=a.accent,onBlur:j=>j.target.style.borderColor=a.border})]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx(H,{variant:"ghost",onClick:()=>l(!1),children:""}),s.jsx(H,{variant:"primary",onClick:w,disabled:!c.trim()||!u.trim()||p,children:p?" ...":" "})]})]})]}),t.length===0&&!o?s.jsx(Jt,{icon:s.jsx(b.file,{size:32}),text:"  "}):t.length>0&&s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:t.map(j=>{var m,g,x;return s.jsxs(ne,{style:{padding:16,cursor:"pointer"},hover:!0,onClick:()=>i(j),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx("div",{style:{fontSize:14,fontWeight:600},children:j.title}),s.jsx(re,{color:j.status==="answered"?"green":"yellow",children:j.status==="answered"?"":""})]}),s.jsx("div",{style:{fontSize:13,color:a.textMuted,lineHeight:1.5},children:j.content.length>80?j.content.slice(0,80)+"...":j.content}),s.jsx("div",{style:{fontSize:11,color:a.textDim,marginTop:8},children:j.createdAt}),j.status==="answered"&&s.jsxs("div",{style:{marginTop:10,padding:"10px 12px",background:a.greenBg,borderRadius:a.radiusSm,border:`1px solid ${a.greenBorder}`},children:[s.jsx("div",{style:{fontSize:11,fontWeight:600,color:a.green,marginBottom:4},children:" "}),s.jsx("div",{style:{fontSize:12,color:a.text,lineHeight:1.5},children:((g=(m=j.answer)==null?void 0:m.text)==null?void 0:g.length)>60?j.answer.text.slice(0,60)+"...":(x=j.answer)==null?void 0:x.text})]})]},j.id)})}),r&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>i(null),children:s.jsxs("div",{style:{background:a.card,borderRadius:a.radius,padding:24,maxWidth:500,width:"100%",maxHeight:"80vh",overflow:"auto",border:`1px solid ${a.border}`},onClick:j=>j.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[s.jsx("div",{style:{fontSize:16,fontWeight:700},children:r.title}),s.jsx("button",{onClick:()=>i(null),style:{background:"none",border:"none",cursor:"pointer",color:a.textDim},children:s.jsx(b.x,{size:20})})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsxs("div",{style:{fontSize:11,color:a.textDim,marginBottom:8},children:[r.createdAt,"  ",r.contact]}),s.jsx("div",{style:{fontSize:14,color:a.text,lineHeight:1.7,whiteSpace:"pre-wrap"},children:r.content})]}),r.status==="answered"&&r.answer&&s.jsxs("div",{style:{padding:16,background:a.greenBg,borderRadius:a.radiusSm,border:`1px solid ${a.greenBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.green},children:" "}),s.jsxs("div",{style:{fontSize:11,color:a.textDim},children:[r.answer.answeredAt,"  ",r.answer.answeredBy]})]}),s.jsx("div",{style:{fontSize:13,color:a.text,lineHeight:1.6,whiteSpace:"pre-wrap"},children:r.answer.text})]}),r.status==="pending"&&s.jsx("div",{style:{padding:12,background:a.yellowBg,borderRadius:a.radiusSm,border:`1px solid ${a.yellowBorder}`,textAlign:"center"},children:s.jsx("div",{style:{fontSize:12,color:a.yellow},children:"   .  ."})})]})})]})}function a_({user:e,onLogout:t,reservations:n,updateReservations:r,equipRentals:i,updateEquipRentals:o,logs:l,addLog:c,notifications:d,markNotifRead:u,markAllNotifsRead:h,unreadCount:p,sendEmailNotification:f,inquiries:S,updateInquiries:y,printRequests:w,updatePrintRequests:j,visitCount:m,isMobile:g,isDark:x,toggleDark:I}){var D,K;const[N,F]=C.useState("dashboard"),$=((D=S==null?void 0:S.filter(ie=>ie.status==="pending"))==null?void 0:D.length)||0,W=((K=w==null?void 0:w.filter(ie=>ie.status==="pending"||ie.status==="processing"))==null?void 0:K.length)||0;return s.jsxs("div",{className:"fade-in",style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:"20px 0 16px",borderBottom:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,color:a.accent,fontWeight:600,letterSpacing:"2px",textTransform:"uppercase"},children:"Worker Portal"}),s.jsx("div",{style:{fontSize:18,fontWeight:800,marginTop:4},children:" "}),s.jsxs("div",{style:{display:"flex",gap:6,marginTop:8},children:[s.jsx(re,{color:"accent",children:e.name}),s.jsx(re,{color:"dim",children:e.shift})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:I,children:x?s.jsx(b.sun,{size:15}):s.jsx(b.moon,{size:15})}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:t,children:[s.jsx(b.logout,{size:15})," "]})]})]}),s.jsx("div",{style:{paddingTop:24},children:s.jsx(Ku,{tabs:[{id:"dashboard",label:"",icon:s.jsx(b.home,{size:15}),badge:p},{id:"print",label:" ",icon:s.jsx(b.file,{size:15}),badge:W},{id:"inquiries",label:"",icon:s.jsx(b.file,{size:15}),badge:$},{id:"logs",label:"",icon:s.jsx(b.log,{size:15})}],active:N,onChange:F,isMobile:g})}),N==="dashboard"&&s.jsx(u_,{reservations:n,updateReservations:r,equipRentals:i,updateEquipRentals:o,notifications:d,markNotifRead:u,markAllNotifsRead:h,unreadCount:p,addLog:c,workerName:e.name,sendEmailNotification:f,printRequests:w,visitCount:m,isMobile:g}),N==="print"&&s.jsx(c_,{printRequests:w,updatePrintRequests:j,addLog:c,workerName:e.name,sendEmailNotification:f}),N==="inquiries"&&s.jsx(d_,{inquiries:S,updateInquiries:y,workerName:e.name,addLog:c}),N==="logs"&&s.jsx(f_,{logs:l,addLog:c})]})}function c_({printRequests:e,updatePrintRequests:t,addLog:n,workerName:r,sendEmailNotification:i}){const[o,l]=C.useState("pending"),[c,d]=C.useState(null),u=(e||[]).filter(w=>o==="pending"?w.status==="pending":o==="processing"?w.status==="processing":o==="completed"?w.status==="completed"||w.status==="cancelled":!0),h=(w,j)=>{const m=(e||[]).find(g=>g.id===w);t(g=>g.map(x=>x.id===w?{...x,status:j,completedAt:j==="completed"?Ft():x.completedAt,processedBy:r}:x)),n(`  : ${j}`,"print",{requestId:w}),j==="completed"&&(m!=null&&m.studentEmail)&&(i==null||i({to:m.studentEmail,subject:`[ ] ${m.studentName}  ${m.paperSize} ${m.copies}`,body:` .

- : ${m.paperSize}
- : ${m.colorMode==="BW"?"":""}
- : ${m.copies}
- : ${(m.totalPrice||0).toLocaleString()}

 ( 6) .`}))},p=(e||[]).filter(w=>w.status==="pending").length,f=(e||[]).filter(w=>w.status==="processing").length,S={pending:"",processing:"",completed:"",cancelled:""},y={pending:"yellow",processing:"blue",completed:"green",cancelled:"red"};return s.jsxs("div",{style:{paddingTop:20},children:[p>0&&s.jsx(ne,{style:{marginBottom:16,background:a.yellowBg,borderColor:a.yellowBorder},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("span",{style:{fontSize:20},children:""}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:14,fontWeight:700,color:a.yellow},children:["   ",p,""]}),s.jsx("div",{style:{fontSize:12,color:a.textMuted},children:"   "})]})]})}),s.jsx("div",{style:{display:"flex",gap:8,marginBottom:16},children:[{id:"pending",label:` (${p})`},{id:"processing",label:` (${f})`},{id:"completed",label:""},{id:"all",label:""}].map(w=>s.jsx("button",{onClick:()=>l(w.id),style:{padding:"8px 16px",borderRadius:8,border:`1px solid ${o===w.id?a.accent:a.border}`,background:o===w.id?a.accentBg:"transparent",color:o===w.id?a.accent:a.textMuted,fontSize:13,fontWeight:500,cursor:"pointer",fontFamily:a.font},children:w.label},w.id))}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:u.length===0?s.jsx("div",{style:{textAlign:"center",padding:40,color:a.textDim},children:"  "}):u.map(w=>{var j,m,g,x,I;return s.jsxs(ne,{style:{padding:16,cursor:"pointer",borderColor:w.urgentPickup?a.red:w.status==="pending"?a.yellow:a.border,background:w.urgentPickup?a.redBg:a.card},onClick:()=>d((c==null?void 0:c.id)===w.id?null:w),children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[w.urgentPickup&&s.jsx("span",{style:{fontSize:16},children:""}),s.jsx("span",{style:{fontSize:15,fontWeight:700,color:a.text},children:w.studentName}),s.jsx(re,{color:"dim",children:w.studentDept}),s.jsx(re,{color:y[w.status],children:S[w.status]})]}),s.jsxs("div",{style:{display:"flex",gap:12,fontSize:13,color:a.textMuted},children:[s.jsxs("span",{children:[" ",w.paperSize," ",w.colorMode==="BW"?"":""]}),s.jsxs("span",{children:[" ",w.copies,""]}),s.jsxs("span",{children:[" ",(j=w.totalPrice)==null?void 0:j.toLocaleString(),""]})]}),s.jsxs("div",{style:{fontSize:11,color:a.textDim,marginTop:6},children:[": ",(m=w.createdAt)==null?void 0:m.slice(5,16).replace("T"," ")]}),w.note&&s.jsxs("div",{style:{fontSize:12,color:a.accent,marginTop:6},children:[" ",w.note]})]})}),(c==null?void 0:c.id)===w.id&&s.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{marginBottom:12},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:6},children:" "}),s.jsxs("div",{style:{padding:10,background:a.surface,borderRadius:6,fontSize:12,color:a.text},children:[" ",(g=w.printFile)==null?void 0:g.name,((x=w.printFile)==null?void 0:x.data)&&s.jsx("a",{href:w.printFile.data,download:w.printFile.name,style:{marginLeft:12,color:a.accent,textDecoration:"none"},children:" "})]})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,marginBottom:6},children:" "}),((I=w.paymentProof)==null?void 0:I.data)&&s.jsx("img",{src:w.paymentProof.data,alt:" ",style:{maxWidth:200,borderRadius:8,border:`1px solid ${a.border}`}})]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[w.status==="pending"&&s.jsx(H,{size:"sm",onClick:N=>{N.stopPropagation(),h(w.id,"processing")},children:"  "}),w.status==="processing"&&s.jsx(H,{size:"sm",onClick:N=>{N.stopPropagation(),h(w.id,"completed")},children:"  "}),(w.status==="pending"||w.status==="processing")&&s.jsx(H,{size:"sm",variant:"ghost",onClick:N=>{N.stopPropagation(),h(w.id,"cancelled")},children:" "})]})]})]},w.id)})})]})}function d_({inquiries:e,updateInquiries:t,workerName:n,addLog:r}){const[i,o]=C.useState("all"),[l,c]=C.useState(null),[d,u]=C.useState(""),h=(e||[]).filter(y=>i==="pending"?y.status==="pending":i==="answered"?y.status==="answered":!0),p=y=>{d.trim()&&(t(w=>w.map(j=>j.id===y?{...j,status:"answered",answer:{text:d.trim(),answeredBy:n,answeredAt:Ft()}}:j)),r(`[] "${l==null?void 0:l.title}"   (${n})`,"inquiry"),u(""),c(null))},f=y=>{t(w=>w.map(j=>j.id===y?{...j,status:"answered",answer:{text:"   ",answeredBy:n,answeredAt:Ft()}}:j)),r(`[] "${l==null?void 0:l.title}"    (${n})`,"inquiry"),c(null)},S=y=>{confirm("  ?")&&(t(w=>w.filter(j=>j.id!==y)),c(null))};return s.jsxs("div",{className:"fade-in",style:{paddingTop:24},children:[s.jsxs(ct,{icon:s.jsx(b.file,{size:16,color:a.accent}),children:[" ",s.jsxs(re,{color:"accent",children:[(e||[]).filter(y=>y.status==="pending").length," "]})]}),s.jsx("div",{style:{display:"flex",gap:8,marginBottom:16},children:[{id:"all",label:""},{id:"pending",label:""},{id:"answered",label:""}].map(y=>s.jsx("button",{onClick:()=>o(y.id),style:{padding:"6px 12px",borderRadius:a.radiusSm,border:`1px solid ${i===y.id?a.accent:a.border}`,background:i===y.id?a.accentBg:"transparent",color:i===y.id?a.accent:a.textMuted,fontSize:12,fontWeight:600,cursor:"pointer",fontFamily:a.font},children:y.label},y.id))}),h.length===0?s.jsx(Jt,{icon:s.jsx(b.file,{size:32}),text:" "}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:h.map(y=>s.jsxs(ne,{style:{padding:16,cursor:"pointer"},hover:!0,onClick:()=>c(y),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[s.jsx("div",{style:{fontSize:14,fontWeight:600,color:a.text},children:y.title}),s.jsx(re,{color:y.status==="pending"?"yellow":"green",children:y.status==="pending"?"":""})]}),s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:8,lineHeight:1.5},children:y.content.length>100?y.content.slice(0,100)+"...":y.content}),s.jsxs("div",{style:{display:"flex",gap:12,fontSize:11,color:a.textDim},children:[s.jsxs("span",{children:[": ",y.name]}),y.contact&&s.jsxs("span",{children:[": ",y.contact]}),s.jsx("span",{children:y.createdAt})]})]},y.id))}),l&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},onClick:()=>c(null),children:s.jsxs("div",{style:{background:a.card,borderRadius:a.radius,padding:24,maxWidth:500,width:"100%",maxHeight:"80vh",overflow:"auto",border:`1px solid ${a.border}`},onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:16,fontWeight:700,color:a.text,marginBottom:8},children:l.title}),s.jsx("div",{style:{display:"flex",gap:8},children:s.jsx(re,{color:l.status==="pending"?"yellow":"green",children:l.status==="pending"?"":""})})]}),s.jsx("button",{onClick:()=>c(null),style:{background:"none",border:"none",cursor:"pointer",color:a.textDim,padding:4},children:s.jsx(b.x,{size:18})})]}),s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginBottom:16},children:[": ",l.name," | : ",l.contact||""," | ",l.createdAt]}),s.jsx("div",{style:{padding:16,background:a.surface,borderRadius:a.radiusSm,marginBottom:16,fontSize:14,color:a.text,lineHeight:1.6,whiteSpace:"pre-wrap"},children:l.content}),l.status==="answered"&&s.jsxs("div",{style:{padding:16,background:a.greenBg,border:`1px solid ${a.greenBorder}`,borderRadius:a.radiusSm,marginBottom:16},children:[s.jsxs("div",{style:{fontSize:12,fontWeight:600,color:a.green,marginBottom:8},children:[" (",l.answeredBy,"  ",l.answeredAt,")"]}),s.jsx("div",{style:{fontSize:14,color:a.text,lineHeight:1.6,whiteSpace:"pre-wrap"},children:l.answer})]}),l.status==="pending"&&l.isLoggedIn!==!1&&s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:6},children:" "}),s.jsx("textarea",{placeholder:" ",value:d,onChange:y=>u(y.target.value),style:{width:"100%",padding:"10px 14px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:14,fontFamily:a.font,outline:"none",boxSizing:"border-box",minHeight:100,resize:"vertical"}})]}),l.status==="pending"&&l.isLoggedIn===!1&&s.jsxs("div",{style:{padding:16,background:a.yellowBg,border:`1px solid ${a.yellowBorder}`,borderRadius:a.radiusSm,marginBottom:16},children:[s.jsx("div",{style:{fontSize:13,color:a.yellow,fontWeight:600,marginBottom:6},children:"  "}),s.jsxs("div",{style:{fontSize:12,color:a.textMuted,lineHeight:1.5,marginBottom:12},children:["    .",s.jsx("br",{}),": ",s.jsx("strong",{style:{color:a.text},children:l.contact||""})]}),s.jsx(H,{variant:"primary",onClick:()=>f(l.id),children:"   "})]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[l.status==="pending"&&l.isLoggedIn!==!1&&s.jsx(H,{variant:"primary",onClick:()=>p(l.id),disabled:!d.trim(),children:" "}),s.jsx(H,{variant:"ghost",onClick:()=>S(l.id),style:{color:a.red},children:""}),s.jsx(H,{variant:"ghost",onClick:()=>c(null),children:""})]})]})})]})}function u_({reservations:e,updateReservations:t,equipRentals:n,updateEquipRentals:r,notifications:i,markNotifRead:o,markAllNotifsRead:l,unreadCount:c,addLog:d,workerName:u,sendEmailNotification:h,printRequests:p,visitCount:f,isMobile:S}){const[y,w]=C.useState(!1),[j,m]=C.useState(null),[g,x]=C.useState(!1),[I,N]=C.useState({});C.useEffect(()=>{const E=`roomCleanup_${Yi()}`;de.get(E).then(V=>{V&&N(V)})},[]);const F=E=>{N(V=>{const M={...V,[E]:!V[E]};return de.set(`roomCleanup_${Yi()}`,M),M})},$=e.filter(E=>E.status==="approved"),W=e.filter(E=>E.status==="pending");n.filter(E=>E.status==="pending_pickup");const D=n.filter(E=>E.status==="pending_pickup"||E.status==="ready"),K=(p||[]).filter(E=>E.status==="pending"||E.status==="processing").length,ie=Yi(),P=qr.filter(E=>e.some(V=>V.roomId===E.id&&V.date===ie&&V.status==="approved")),X=P.length===0||P.every(E=>I[E.id]),ce=[{key:"pending",label:"   ",icon:s.jsx(b.calendar,{size:16}),count:W.length,done:W.length===0},{key:"rental",label:" / ",icon:s.jsx(b.package,{size:16}),count:D.length,done:D.length===0},{key:"print",label:"  ",icon:s.jsx(b.file,{size:16}),count:K,done:K===0},{key:"cleanup",label:"  ",icon:s.jsx(b.check,{size:16}),count:P.filter(E=>!I[E.id]).length,done:X}],J=ce.filter(E=>E.done).length,A=e.length,te=e.filter(E=>E.status==="approved"||E.status==="completed").length,L=e.filter(E=>E.status==="cancelled"||E.status==="rejected").length,ee=n.length;n.filter(E=>E.status==="returned").length;const T=qr.map(E=>({name:E.name.replace(" ",""),count:e.filter(V=>V.roomId===E.id&&V.status==="approved").length})),q=Math.max(...T.map(E=>E.count),1),ue=Array.from({length:7},(E,V)=>{const M=new Date;return M.setDate(M.getDate()-(6-V)),M.toISOString().slice(0,10)}),he=ue.map(E=>({date:E,day:["","","","","","",""][new Date(E).getDay()],count:e.filter(V=>V.date===E&&V.status==="approved").length})),Re=Math.max(...he.map(E=>E.count),20),He=({data:E,size:V=120,strokeWidth:M=16})=>{const le=E.reduce((Ee,pt)=>Ee+pt.value,0)||1,De=(V-M)/2,bt=2*Math.PI*De;let it=0;return s.jsxs("svg",{width:V,height:V,style:{transform:"rotate(-90deg)"},children:[s.jsx("circle",{cx:V/2,cy:V/2,r:De,fill:"none",stroke:a.surface,strokeWidth:M}),E.map((Ee,pt)=>{const ae=Ee.value/le*bt,Ze=s.jsx("circle",{cx:V/2,cy:V/2,r:De,fill:"none",stroke:Ee.color,strokeWidth:M,strokeDasharray:`${ae} ${bt-ae}`,strokeDashoffset:-it,style:{transition:"stroke-dasharray 0.5s, stroke-dashoffset 0.5s"}},pt);return it+=ae,Ze})]})},rt=E=>{r(M=>M.map(le=>le.id===E?{...le,status:"ready",returnChecklist:le.returnChecklist||Me.equipmentReturnChecklist.map(De=>({label:De,done:!1}))}:le));const V=n.find(M=>M.id===E);V&&(d(`[] ${V.studentName}     ${V.items.map(M=>M.name).join(", ")}`,"equipment"),V.studentEmail&&(h==null||h({to:V.studentEmail,subject:`[  ] ${V.studentName}  ${V.items.map(M=>M.name).join(", ")}`,body:`   .

- : ${V.items.map(M=>`${M.icon} ${M.name}`).join(", ")}
-  : ${V.returnDate||""}

 .`})))},Ie=E=>{r(M=>M.map(le=>le.id===E?{...le,status:"returned",returnedAt:Ft()}:le));const V=n.find(M=>M.id===E);V&&d(`[] ${V.studentName}     ${V.items.map(M=>M.name).join(", ")}`,"equipment")},mn=(E,V)=>{r(M=>M.map(le=>{if(le.id!==E)return le;const bt=(le.returnChecklist||Me.equipmentReturnChecklist.map(it=>({label:it,done:!1}))).map((it,Ee)=>Ee===V?{...it,done:!it.done}:it);return{...le,returnChecklist:bt}}))},Ve=E=>{var M;t(le=>le.map(De=>De.id===E?{...De,status:"approved",approvedAt:Ft(),approvedBy:u}:De));const V=e.find(le=>le.id===E);V&&d(`[] ${V.studentName}(${V.studentId})  ${V.roomName} | ${V.date} ${(M=V.slotLabels)==null?void 0:M.join(", ")}`,"reservation",{studentId:V.studentId,roomId:V.roomId})},Qt=E=>{var le;const V=window.prompt("  ()")||"";t(De=>De.map(bt=>bt.id===E?{...bt,status:"rejected",rejectedAt:Ft(),rejectedBy:u,rejectedReason:V}:bt));const M=e.find(De=>De.id===E);M&&d(`[] ${M.studentName}(${M.studentId})  ${M.roomName} | ${M.date} ${(le=M.slotLabels)==null?void 0:le.join(", ")}${V?` | : ${V}`:""}`,"reservation",{studentId:M.studentId,roomId:M.roomId})};return s.jsxs("div",{className:"fade-in",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{fontSize:22,fontWeight:800,margin:0,color:a.text},children:" "}),s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginTop:4},children:new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"})})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{width:8,height:8,borderRadius:4,background:a.green}}),s.jsx("span",{style:{fontSize:12,color:a.textMuted},children:""})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsxs("button",{onClick:()=>w(!y),style:{width:40,height:40,borderRadius:"50%",border:"none",background:y?a.accent:a.surface,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",transition:"all 0.2s"},children:[s.jsx(b.bell,{size:18,color:y?"#fff":a.textMuted}),c>0&&s.jsx("span",{style:{position:"absolute",top:-2,right:-2,minWidth:18,height:18,borderRadius:9,background:a.red,color:"#fff",fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 4px",border:`2px solid ${a.bg}`},children:c>99?"99+":c})]}),y&&s.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,width:360,maxHeight:400,background:a.card,borderRadius:a.radius,border:`1px solid ${a.border}`,boxShadow:"0 10px 40px rgba(0,0,0,0.4)",zIndex:1e3,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"14px 16px",borderBottom:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:14,fontWeight:700,color:a.text},children:""}),c>0&&s.jsx(re,{color:"red",children:c})]}),c>0&&s.jsx("button",{onClick:E=>{E.stopPropagation(),l()},style:{background:"none",border:"none",cursor:"pointer",fontSize:12,color:a.accent,fontWeight:600,fontFamily:a.font},children:" "})]}),s.jsx("div",{style:{maxHeight:320,overflowY:"auto"},children:i.length===0?s.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[s.jsx(b.bell,{size:32,color:a.textDim}),s.jsx("div",{style:{fontSize:13,color:a.textMuted,marginTop:12},children:" "})]}):i.slice(0,15).map((E,V)=>s.jsx("div",{onClick:()=>o(E.id),style:{padding:"12px 16px",cursor:"pointer",transition:"background 0.15s",borderBottom:V<Math.min(i.length,15)-1?`1px solid ${a.border}`:"none",background:E.read?"transparent":E.urgent?"rgba(212,93,93,0.06)":"rgba(212,160,83,0.06)",opacity:E.read?.6:1},onMouseEnter:M=>M.currentTarget.style.background=a.surfaceHover,onMouseLeave:M=>M.currentTarget.style.background=E.read?"transparent":E.urgent?"rgba(212,93,93,0.06)":"rgba(212,160,83,0.06)",children:s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"flex-start"},children:[!E.read&&s.jsx("div",{style:{width:8,height:8,borderRadius:4,background:E.urgent?a.red:a.accent,marginTop:5,flexShrink:0}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:13,color:a.text,lineHeight:1.5},children:E.text}),s.jsx("div",{style:{fontSize:11,color:a.textDim,marginTop:4},children:E.time})]})]})},E.id))})]})]})]})]}),s.jsxs(ne,{style:{padding:0,marginBottom:20,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(b.shield,{size:18,color:J===4?a.green:a.accent}),s.jsx("span",{style:{fontSize:16,fontWeight:800,color:a.text},children:"  "})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("div",{style:{width:80,height:6,borderRadius:3,background:a.surface,overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",width:`${J/4*100}%`,background:J===4?a.green:a.accent,borderRadius:3,transition:"width 0.3s"}})}),s.jsxs("span",{style:{fontSize:13,fontWeight:700,color:J===4?a.green:a.accent,fontFamily:a.fontMono},children:[J,"/4"]})]})]}),ce.map((E,V)=>s.jsxs("div",{children:[s.jsxs("div",{onClick:()=>m(j===E.key?null:E.key),style:{padding:"14px 20px",cursor:"pointer",transition:"background 0.15s",borderBottom:V<ce.length-1||j===E.key?`1px solid ${a.border}`:"none",display:"flex",alignItems:"center",gap:12},onMouseEnter:M=>M.currentTarget.style.background=a.surfaceHover,onMouseLeave:M=>M.currentTarget.style.background="transparent",children:[s.jsx("div",{style:{width:28,height:28,borderRadius:"50%",flexShrink:0,background:E.done?a.greenBg:a.surface,border:`2px solid ${E.done?a.green:a.border}`,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:E.done&&s.jsx(b.check,{size:14,color:a.green})}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[s.jsx("span",{style:{color:E.done?a.green:a.textMuted},children:E.icon}),s.jsx("span",{style:{fontSize:14,fontWeight:600,color:E.done?a.green:a.text,textDecoration:E.done?"line-through":"none",opacity:E.done?.7:1},children:E.label})]}),E.done?s.jsx(re,{color:"green",children:""}):s.jsxs(re,{color:E.count>0?"yellow":"dim",children:[E.count," "]}),s.jsx("span",{style:{fontSize:11,color:a.textDim,transition:"transform 0.2s",transform:j===E.key?"rotate(180deg)":"rotate(0deg)"},children:""})]}),s.jsx("div",{style:{maxHeight:j===E.key?600:0,overflow:"hidden",transition:"max-height 0.3s ease-in-out",background:"rgba(0,0,0,0.15)"},children:s.jsxs("div",{style:{padding:"12px 20px"},children:[E.key==="pending"&&(W.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:a.textDim,fontSize:13},children:[s.jsx(b.check,{size:24,color:a.green}),s.jsx("div",{style:{marginTop:8},children:"  "})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:W.map(M=>{var le;return s.jsxs("div",{style:{padding:14,background:a.card,borderRadius:a.radiusSm,border:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[s.jsxs("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:[M.studentName," ",s.jsxs("span",{style:{color:a.textMuted,fontWeight:400},children:["(",M.studentId,")"]})]}),s.jsx(re,{color:"yellow",children:""})]}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted,marginBottom:4},children:[M.roomName,"  ",M.date,"  ",(le=M.slotLabels)==null?void 0:le.join(", ")]}),M.purpose&&s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginBottom:8},children:[": ",M.purpose]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx(H,{size:"sm",onClick:()=>Ve(M.id),children:""}),s.jsx(H,{size:"sm",variant:"danger",onClick:()=>Qt(M.id),children:""})]})]},M.id)})})),E.key==="rental"&&(D.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:a.textDim,fontSize:13},children:[s.jsx(b.check,{size:24,color:a.green}),s.jsx("div",{style:{marginTop:8},children:"   "})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:D.map(M=>s.jsxs("div",{style:{padding:14,background:a.card,borderRadius:a.radiusSm,border:`1px solid ${a.border}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[s.jsxs("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:[M.studentName," ",s.jsxs("span",{style:{color:a.textMuted,fontWeight:400},children:["(",M.studentId,")"]})]}),s.jsxs("div",{style:{display:"flex",gap:6},children:[M.returnDate&&M.returnDate<ie&&s.jsx(re,{color:"red",children:""}),s.jsx(re,{color:M.status==="ready"?"blue":"yellow",children:M.status==="ready"?"":" "})]})]}),s.jsx("div",{style:{fontSize:13,color:a.textMuted,marginBottom:6},children:M.items.map(le=>`${le.icon} ${le.name}`).join("    ")}),s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginBottom:8},children:[": ",M.returnDate]}),M.status==="ready"&&s.jsxs("div",{style:{marginBottom:8},children:[s.jsx("div",{style:{fontSize:11,fontWeight:600,color:a.textMuted,marginBottom:6},children:" "}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:(M.returnChecklist||Me.equipmentReturnChecklist.map(le=>({label:le,done:!1}))).map((le,De)=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:a.textMuted,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:!!le.done,onChange:()=>mn(M.id,De)}),le.label]},De))})]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[M.status==="pending_pickup"&&s.jsx(H,{size:"sm",onClick:()=>rt(M.id),children:"  "}),M.status==="ready"&&s.jsx(H,{size:"sm",variant:"success",onClick:()=>Ie(M.id),disabled:(M.returnChecklist||[]).some(le=>!le.done),children:"  "})]})]},M.id))})),E.key==="print"&&(K===0?s.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:a.textDim,fontSize:13},children:[s.jsx(b.check,{size:24,color:a.green}),s.jsx("div",{style:{marginTop:8},children:"   "})]}):s.jsxs("div",{style:{padding:14,background:a.card,borderRadius:a.radiusSm,border:`1px solid ${a.yellowBorder}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13,color:a.yellow},children:[s.jsx(b.alert,{size:16}),s.jsxs("span",{style:{fontWeight:600},children:[K,"    ."]})]}),s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginTop:6},children:"   ."})]})),E.key==="cleanup"&&(P.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:a.textDim,fontSize:13},children:[s.jsx(b.check,{size:24,color:a.green}),s.jsx("div",{style:{marginTop:8},children:"   "})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:P.map(M=>s.jsxs("label",{onClick:le=>{le.stopPropagation(),F(M.id)},style:{display:"flex",alignItems:"center",gap:10,padding:"10px 14px",cursor:"pointer",background:I[M.id]?a.greenBg:a.card,borderRadius:a.radiusSm,border:`1px solid ${I[M.id]?a.greenBorder:a.border}`,transition:"all 0.2s"},children:[s.jsx("input",{type:"checkbox",checked:!!I[M.id],readOnly:!0,style:{accentColor:a.green}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:13,fontWeight:600,color:I[M.id]?a.green:a.text},children:M.name}),s.jsxs("div",{style:{fontSize:11,color:a.textDim},children:[M.floor,"  ",M.building]})]}),I[M.id]&&s.jsx(re,{color:"green",children:""})]},M.id))}))]})})]},E.key))]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:S?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:10,marginBottom:20},children:[{label:" ",value:$.filter(E=>E.date===ie).length,icon:s.jsx(b.calendar,{size:15,color:a.accent}),color:a.accent},{label:" ",value:A,icon:s.jsx(b.list,{size:15,color:a.blue}),color:a.blue},{label:" ",value:ee,icon:s.jsx(b.package,{size:15,color:a.yellow}),color:a.yellow},{label:"",value:f||0,icon:s.jsx(b.users,{size:15,color:a.green}),color:a.green}].map((E,V)=>s.jsxs(ne,{style:{padding:"14px 16px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[E.icon,s.jsx("span",{style:{fontSize:11,color:a.textMuted},children:E.label})]}),s.jsx("div",{style:{fontSize:24,fontWeight:800,color:E.color,fontFamily:a.fontMono},children:E.value})]},V))}),s.jsxs("div",{style:{marginBottom:20},children:[s.jsxs("div",{onClick:()=>x(!g),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",marginBottom:g?12:0,padding:"8px 0"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:14,fontWeight:700,color:a.text},children:[s.jsx(b.grid,{size:16,color:a.accent}),"Analytics"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{fontSize:11,color:a.textDim},children:g?"":""}),s.jsx("span",{style:{fontSize:11,color:a.textDim,transition:"transform 0.2s",display:"inline-block",transform:g?"rotate(180deg)":"rotate(0deg)"},children:""})]})]}),s.jsx("div",{style:{maxHeight:g?800:0,overflow:"hidden",transition:"max-height 0.4s ease-in-out"},children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"1fr 1fr",gap:12,marginBottom:12},children:[s.jsxs(ne,{style:{padding:18},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:"  "}),s.jsxs("div",{style:{fontSize:11,color:a.textMuted},children:[ue[0]," ~ ",ue[6]]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:140,position:"relative"},children:[s.jsxs("div",{style:{position:"absolute",left:0,top:0,bottom:24,display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:10,color:a.textDim},children:[s.jsx("span",{children:Re}),s.jsx("span",{children:Math.round(Re/2)}),s.jsx("span",{children:"0"})]}),s.jsx("div",{style:{flex:1,display:"flex",alignItems:"flex-end",justifyContent:"space-around",marginLeft:24},children:he.map((E,V)=>s.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,height:"100%"},children:s.jsx("div",{style:{flex:1,display:"flex",alignItems:"flex-end",width:"100%",justifyContent:"center"},children:s.jsx("div",{style:{width:"70%",height:`${Math.max(E.count/Re*100,5)}%`,background:E.date===ie?a.accent:a.blue,borderRadius:"4px 4px 0 0",transition:"height 0.3s",minHeight:4}})})},V))}),s.jsx("div",{style:{display:"flex",justifyContent:"space-around",marginLeft:24,marginTop:8},children:he.map((E,V)=>s.jsx("span",{style:{flex:1,textAlign:"center",fontSize:10,color:E.date===ie?a.accent:a.textDim},children:E.day},V))})]})]}),s.jsxs(ne,{style:{padding:18},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text},children:" "})}),s.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",marginBottom:16},children:[s.jsx(He,{data:[{value:te,color:a.green},{value:W.length,color:a.yellow},{value:L,color:a.red}],size:60,strokeWidth:8}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11},children:[s.jsx("span",{style:{width:8,height:8,borderRadius:4,background:a.green}}),s.jsxs("span",{style:{color:a.textMuted},children:[" ",te]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11},children:[s.jsx("span",{style:{width:8,height:8,borderRadius:4,background:a.yellow}}),s.jsxs("span",{style:{color:a.textMuted},children:[" ",W.length]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11},children:[s.jsx("span",{style:{width:8,height:8,borderRadius:4,background:a.red}}),s.jsxs("span",{style:{color:a.textMuted},children:[" ",L]})]})]})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:T.slice(0,5).map((E,V)=>s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[s.jsx("span",{style:{fontSize:11,color:a.textMuted},children:E.name}),s.jsx("span",{style:{fontSize:11,fontWeight:600,color:a.text},children:E.count})]}),s.jsx("div",{style:{height:4,background:a.surface,borderRadius:2,overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",width:`${E.count/q*100}%`,background:`linear-gradient(90deg, ${a.accent}, ${a.yellow})`,borderRadius:2,transition:"width 0.3s"}})})]},V))})]})]})})]}),s.jsx(ct,{icon:s.jsx(b.calendar,{size:16,color:a.accent}),children:" "}),s.jsx(ne,{style:{padding:0,overflow:"hidden",maxHeight:350,overflowY:"auto"},children:$.length===0?s.jsx(Jt,{icon:s.jsx(b.calendar,{size:28}),text:"  "}):$.map((E,V)=>{var M;return s.jsxs("div",{style:{padding:"14px 18px",borderBottom:V<$.length-1?`1px solid ${a.border}`:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("span",{style:{fontSize:14,fontWeight:600},children:E.studentName}),s.jsx("span",{style:{fontSize:12,color:a.textMuted,marginLeft:8},children:E.studentDept})]}),s.jsx(re,{color:"green",children:E.autoApproved?"":""})]}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted,marginTop:4},children:[E.roomName,"  ",E.date,"  ",(M=E.slotLabels)==null?void 0:M.join(", ")]}),E.purpose&&s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginTop:2},children:[": ",E.purpose]})]},E.id)})})]})}function f_({logs:e}){const[t,n]=C.useState("all"),[r,i]=C.useState(""),o={all:"",reservation:" ",equipment:" "},l={reservation:a.blue,equipment:a.yellow},c=e.filter(h=>!(t!=="all"&&h.type!==t||r&&!h.action.toLowerCase().includes(r.toLowerCase()))),d=()=>{const h=`,,
`,p=c.map(j=>`"${j.time}","${j.type}","${j.action.replace(/"/g,'""')}"`).join(`
`),f="\uFEFF"+h+p,S=new Blob([f],{type:"text/csv;charset=utf-8"}),y=URL.createObjectURL(S),w=document.createElement("a");w.href=y,w.download=`_${Yi()}.csv`,w.click(),URL.revokeObjectURL(y)},u=()=>{const h=`   
 : ${Ft()}
${"".repeat(60)}

`,p=c.map(w=>`[${w.time}] ${w.action}`).join(`
`),f=new Blob([h+p],{type:"text/plain;charset=utf-8"}),S=URL.createObjectURL(f),y=document.createElement("a");y.href=S,y.download=`_${Yi()}.txt`,y.click(),URL.revokeObjectURL(S)};return s.jsxs("div",{className:"fade-in",children:[s.jsx(ne,{style:{marginBottom:20,background:a.greenBg,borderColor:a.greenBorder,padding:14},children:s.jsxs("div",{style:{fontSize:13,color:a.green,display:"flex",alignItems:"center",gap:8},children:[s.jsx(b.check,{size:16}),"      .    ."]})}),s.jsxs("div",{style:{display:"flex",gap:10,marginBottom:16,flexWrap:"wrap",alignItems:"center"},children:[s.jsx("div",{style:{display:"flex",gap:4},children:Object.entries(o).map(([h,p])=>s.jsx("button",{onClick:()=>n(h),style:{padding:"6px 12px",borderRadius:6,border:`1px solid ${t===h?a.accent:a.border}`,background:t===h?a.accentBg:"transparent",color:t===h?a.accent:a.textMuted,fontSize:12,fontWeight:500,cursor:"pointer",fontFamily:a.font},children:p},h))}),s.jsx("div",{style:{flex:1,minWidth:150},children:s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{value:r,onChange:h=>i(h.target.value),placeholder:"...",style:{width:"100%",padding:"7px 12px 7px 32px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:a.radiusSm,color:a.text,fontSize:13,fontFamily:a.font,outline:"none",boxSizing:"border-box"}}),s.jsx("div",{style:{position:"absolute",left:10,top:"50%",transform:"translateY(-50%)",color:a.textDim},children:s.jsx(b.search,{size:14})})]})}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsxs(H,{variant:"secondary",size:"sm",onClick:d,children:[s.jsx(b.download,{size:14})," CSV"]}),s.jsxs(H,{variant:"secondary",size:"sm",onClick:u,children:[s.jsx(b.download,{size:14})," TXT"]})]})]}),s.jsxs("div",{style:{fontSize:12,color:a.textMuted,marginBottom:12},children:[" ",c.length," ",t!=="all"&&`(${o[t]})`]}),s.jsx(ne,{style:{padding:0,overflow:"hidden"},children:c.length===0?s.jsx(Jt,{icon:s.jsx(b.log,{size:28}),text:" "}):s.jsx("div",{style:{maxHeight:500,overflowY:"auto"},children:c.map((h,p)=>s.jsx("div",{className:p<3?"slide-in":"",style:{padding:"12px 18px",borderBottom:`1px solid ${a.border}`,borderLeft:`3px solid ${l[h.type]||a.textDim}`,animationDelay:`${p*.05}s`},children:s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"flex-start"},children:[s.jsx("code",{style:{fontSize:11,color:a.textDim,fontFamily:a.fontMono,whiteSpace:"nowrap",marginTop:1},children:h.time}),s.jsx("div",{style:{fontSize:13,color:a.text,lineHeight:1.5},children:h.action})]})},h.id))})})]})}function h_({onLogout:e,reservations:t,updateReservations:n,workers:r,updateWorkers:i,logs:o,addLog:l,sheetConfig:c,updateSheetConfig:d,warnings:u,updateWarnings:h,blacklist:p,updateBlacklist:f,certificates:S,updateCertificates:y,sendEmailNotification:w,communityPosts:j,setCommunityPosts:m,exhibitionPosts:g,setExhibitionPosts:x,equipmentDB:I,setEquipmentDB:N,isMobile:F,isDark:$,toggleDark:W}){var vn;const[D,K]=C.useState("accounts"),[ie,P]=C.useState(!1),[X,ce]=C.useState(null),[J,A]=C.useState({name:"",username:"",password:"",shift:""}),[te,L]=C.useState(""),[ee,T]=C.useState(null),[q,ue]=C.useState({}),[he,Re]=C.useState((c==null?void 0:c.reservationWebhookUrl)||""),[He,rt]=C.useState({studentId:"",name:"",reason:""}),[Ie,mn]=C.useState({studentId:"",name:"",reason:""}),[Ve,Qt]=C.useState(null),[E,V]=C.useState(null),[M,le]=C.useState(!1),[De,bt]=C.useState(!1),it=async v=>{Qt(v),V(null),le(!0);const z=v.data||await de.get(`certFile_${v.studentId}`);V(z),le(!1)},[Ee,pt]=C.useState({title:"",description:"",dates:"",location:"",instagramUrl:"",posterUrl:""}),[ae,Ze]=C.useState(!1),[sn,on]=C.useState(null),[Wr,Rn]=C.useState(null),[Ur,yn]=C.useState(null),[Nn,Wn]=C.useState(!1),dr=C.useRef(null),[ur,Un]=C.useState(null),[Hn,Si]=C.useState(null),[wi,vt]=C.useState(null),[at,st]=C.useState({name:"",category:"",available:0,total:0,deposit:!1,maxDays:1,icon:""}),[Vn,ln]=C.useState(null),[fr,Nt]=C.useState(null),[vs,k]=C.useState(!1),[G,U]=C.useState({}),Y=()=>{st({name:"",category:"",available:0,total:0,deposit:!1,maxDays:1,icon:""}),ln(null),k(!1)},_e=v=>{var ot;const z=(ot=v.target.files)==null?void 0:ot[0];if(!z)return;if(z.size>5*1024*1024){alert("  5MB .    .");return}Wn(!0);const Z=new FileReader;Z.onload=()=>{pt(Et=>({...Et,posterUrl:Z.result})),yn(z),Wn(!1)},Z.onerror=()=>{alert("  "),Wn(!1)},Z.readAsDataURL(z)},Le=S?Object.keys(S).length:0;C.useEffect(()=>{Re((c==null?void 0:c.reservationWebhookUrl)||"")},[c]);const Se=()=>{A({name:"",username:"",password:"",shift:""}),L(""),ce(null),P(!1)},be=()=>J.name.trim()?J.username.trim()?J.username.trim().length<3?" 3  .":J.password?J.password.length<4?" 4  .":J.shift.trim()?r.find(z=>z.username===J.username.trim()&&z.id!==X)?"  .":J.username.trim()===Dd.username?"   .":null:" .":" .":" .":" .",Ce=()=>{const v=be();if(v){L(v);return}if(X)i(z=>z.map(Z=>Z.id===X?{...Z,name:J.name.trim(),username:J.username.trim(),password:J.password,shift:J.shift.trim()}:Z)),l(`[]   : ${J.name} (${J.username})`,"admin");else{const z={id:`W${Date.now()}`,name:J.name.trim(),username:J.username.trim(),password:J.password,shift:J.shift.trim()};i(Z=>[...Z,z]),l(`[]   : ${J.name} (${J.username})`,"admin")}Se()},_t=v=>{A({name:v.name,username:v.username,password:v.password,shift:v.shift}),ce(v.id),P(!0),L("")},It=v=>{const z=r.find(Z=>Z.id===v);i(Z=>Z.filter(ot=>ot.id!==v)),l(`[]   : ${z==null?void 0:z.name} (${z==null?void 0:z.username})`,"admin"),T(null)},Kn=v=>ue(z=>({...z,[v]:!z[v]})),Wt=()=>{d(v=>({...v,reservationWebhookUrl:he.trim()})),l("[]   URL ","admin")},xn=o.filter(v=>v.type==="admin");(t||[]).filter(v=>v.status==="pending");const _s=()=>{He.studentId.trim()&&(h(v=>{const z=v[He.studentId]||{count:0};return{...v,[He.studentId]:{studentId:He.studentId.trim(),name:He.name.trim()||z.name||"",count:(z.count||0)+1,reason:He.reason.trim()||z.reason||"",updatedAt:Ft()}}}),l(`[]  : ${He.studentId} ${He.name} ${He.reason?`| ${He.reason}`:""}`,"admin"),rt({studentId:"",name:"",reason:""}))},ji=v=>{h(z=>{const Z={...z};return delete Z[v],Z}),l(`[]  : ${v}`,"admin")},Ss=()=>{Ie.studentId.trim()&&(f(v=>({...v,[Ie.studentId.trim()]:{studentId:Ie.studentId.trim(),name:Ie.name.trim()||"",reason:Ie.reason.trim()||"",updatedAt:Ft()}})),l(`[]  : ${Ie.studentId} ${Ie.name} ${Ie.reason?`| ${Ie.reason}`:""}`,"admin"),mn({studentId:"",name:"",reason:""}))},Hr=v=>{f(z=>{const Z={...z};return delete Z[v],Z}),l(`[]  : ${v}`,"admin")},ws=async v=>{var z,Z,ot,Et;bt(!0);try{const pe=(Z=(z=Me.safetySheet)==null?void 0:z.url)==null?void 0:Z.trim();if(pe){const _n={action:"add_safety_student",studentId:v.studentId,studentName:v.studentName||"",studentYear:v.studentYear||"",studentMajor:v.studentMajor||"",studentEmail:v.studentEmail||"",sheetName:((ot=Me.safetySheet)==null?void 0:ot.sheetName)||"",columns:((Et=Me.safetySheet)==null?void 0:Et.columns)||{}};try{await fetch(pe,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(_n)})}catch{const Sn=new URLSearchParams(_n);await fetch(`${pe}?${Sn.toString()}`,{method:"GET"})}}y(_n=>{const Ne={..._n};return delete Ne[v.studentId],Ne}),de.set(`certFile_${v.studentId}`,null),v.studentEmail&&w&&w({to:v.studentEmail,subject:"[ ]    ",body:`, ${v.studentName}.

    .

      .

.
  `}),l(`[]  : ${v.studentName}(${v.studentId})`,"admin"),Qt(null),bt(!1)}catch(pe){bt(!1),alert("  : "+((pe==null?void 0:pe.message)||"   "))}},Ci=v=>{y(z=>{const Z={...z};return delete Z[v.studentId],Z}),de.set(`certFile_${v.studentId}`,null),l(`[]  : ${v.studentName}(${v.studentId})`,"admin"),Qt(null)};return s.jsxs("div",{className:"fade-in",style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:"20px 0 16px",borderBottom:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,color:a.red,fontWeight:600,letterSpacing:"2px",textTransform:"uppercase"},children:"Admin Portal"}),s.jsx("div",{style:{fontSize:18,fontWeight:800,marginTop:4},children:" "}),s.jsx(re,{color:"red",style:{marginTop:8},children:""})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:W,children:$?s.jsx(b.sun,{size:15}):s.jsx(b.moon,{size:15})}),s.jsxs(H,{variant:"ghost",size:"sm",onClick:e,children:[s.jsx(b.logout,{size:15})," "]})]})]}),s.jsx("div",{style:{paddingTop:24},children:s.jsx(Ku,{tabs:[{id:"accounts",label:" ",icon:s.jsx(b.users,{size:15})},{id:"discipline",label:"/",icon:s.jsx(b.alert,{size:15})},{id:"certificates",label:" ",icon:s.jsx(b.file,{size:15}),badge:Le},{id:"equipment",label:" ",icon:s.jsx(b.tool,{size:15}),badge:I.length},{id:"community",label:"/",icon:s.jsx(b.edit,{size:15}),badge:(j==null?void 0:j.length)||0},{id:"adminLog",label:" ",icon:s.jsx(b.log,{size:15})},{id:"integration",label:" ",icon:s.jsx(b.refresh,{size:15})}],active:D,onChange:K,isMobile:F})}),D==="accounts"&&s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[s.jsxs("div",{style:{fontSize:13,color:a.textMuted},children:[" : ",s.jsxs("strong",{style:{color:a.text},children:[r.length,""]})]}),s.jsxs(H,{size:"sm",onClick:()=>{Se(),P(!0)},children:[s.jsx(b.plus,{size:14}),"  "]})]}),ie&&s.jsxs(ne,{style:{marginBottom:20,borderColor:a.accentBorder},children:[s.jsx(ct,{icon:X?s.jsx(b.edit,{size:16,color:a.accent}):s.jsx(b.plus,{size:16,color:a.accent}),children:X?" ":"  "}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr":"1fr 1fr",gap:14,marginBottom:14},children:[s.jsx(ye,{label:"",placeholder:": ",value:J.name,onChange:v=>A(z=>({...z,name:v.target.value}))}),s.jsx(ye,{label:"",placeholder:":  (0913)",value:J.shift,onChange:v=>A(z=>({...z,shift:v.target.value}))})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr":"1fr 1fr",gap:14,marginBottom:14},children:[s.jsx(ye,{label:" ",placeholder:": worker4 (3 )",value:J.username,onChange:v=>A(z=>({...z,username:v.target.value}))}),s.jsx(ye,{label:"",placeholder:"4 ",value:J.password,onChange:v=>A(z=>({...z,password:v.target.value}))})]}),te&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderRadius:a.radiusSm,background:a.redBg,border:`1px solid ${a.redBorder}`,color:a.red,fontSize:13,marginBottom:14},children:[s.jsx(b.alert,{size:16})," ",te]}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx(H,{onClick:Ce,children:X?" ":" "}),s.jsx(H,{variant:"ghost",onClick:Se,children:""})]})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:r.map(v=>s.jsx(ne,{style:{padding:16},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[s.jsx("div",{style:{width:38,height:38,borderRadius:10,background:a.accentBg,border:`1px solid ${a.accentBorder}`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(b.user,{size:18,color:a.accent})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:15,fontWeight:700,color:a.text},children:v.name}),s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginTop:1},children:v.shift})]})]}),s.jsxs("div",{style:{display:"flex",gap:12,marginTop:10,paddingLeft:48},children:[s.jsxs("div",{style:{fontSize:12},children:[s.jsx("span",{style:{color:a.textDim},children:": "}),s.jsx("code",{style:{color:a.accent,background:a.accentBg,padding:"1px 6px",borderRadius:3,fontSize:12},children:v.username})]}),s.jsxs("div",{style:{fontSize:12,display:"flex",alignItems:"center",gap:4},children:[s.jsx("span",{style:{color:a.textDim},children:": "}),s.jsx("code",{style:{color:a.text,background:a.surface,padding:"1px 6px",borderRadius:3,fontSize:12,fontFamily:a.fontMono},children:q[v.id]?v.password:""}),s.jsx("button",{onClick:()=>Kn(v.id),style:{background:"none",border:"none",cursor:"pointer",color:a.textDim,padding:2},children:q[v.id]?s.jsx(b.eyeOff,{size:13}):s.jsx(b.eye,{size:13})})]})]})]}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>_t(v),children:s.jsx(b.edit,{size:14})}),ee===v.id?s.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[s.jsx(H,{variant:"danger",size:"sm",onClick:()=>It(v.id),children:""}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>T(null),children:""})]}):s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>T(v.id),children:s.jsx(b.trash,{size:14})})]})]})},v.id))}),r.length===0&&s.jsx(Jt,{icon:s.jsx(b.users,{size:32}),text:"   "})]}),D==="discipline"&&s.jsxs("div",{children:[s.jsx(ct,{icon:s.jsx(b.alert,{size:16,color:a.red}),children:" "}),s.jsxs(ne,{style:{marginBottom:16},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr":"1fr 1fr",gap:12,marginBottom:12},children:[s.jsx(ye,{label:"",value:He.studentId,onChange:v=>rt(z=>({...z,studentId:v.target.value}))}),s.jsx(ye,{label:"",value:He.name,onChange:v=>rt(z=>({...z,name:v.target.value}))})]}),s.jsx(ye,{label:" ()",value:He.reason,onChange:v=>rt(z=>({...z,reason:v.target.value}))}),s.jsx("div",{style:{marginTop:12},children:s.jsx(H,{size:"sm",onClick:_s,children:" "})})]}),s.jsx(ne,{style:{padding:0,overflow:"hidden",marginBottom:24},children:Object.keys(u||{}).length===0?s.jsx(Jt,{icon:s.jsx(b.alert,{size:28}),text:"  "}):Object.values(u).map((v,z)=>s.jsx("div",{style:{padding:"12px 18px",borderBottom:`1px solid ${a.border}`},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:13,fontWeight:600},children:[v.name||"( )"," ",s.jsxs("span",{style:{color:a.textMuted},children:["(",v.studentId,")"]})]}),s.jsxs("div",{style:{fontSize:12,color:a.textDim,marginTop:4},children:[": ",v.count," ",v.reason?` ${v.reason}`:""]})]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>ji(v.studentId),children:""})]})},v.studentId))}),s.jsx(ct,{icon:s.jsx(b.shield,{size:16,color:a.red}),children:""}),s.jsxs(ne,{style:{marginBottom:16},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr":"1fr 1fr",gap:12,marginBottom:12},children:[s.jsx(ye,{label:"",value:Ie.studentId,onChange:v=>mn(z=>({...z,studentId:v.target.value}))}),s.jsx(ye,{label:"",value:Ie.name,onChange:v=>mn(z=>({...z,name:v.target.value}))})]}),s.jsx(ye,{label:" ()",value:Ie.reason,onChange:v=>mn(z=>({...z,reason:v.target.value}))}),s.jsx("div",{style:{marginTop:12},children:s.jsx(H,{size:"sm",variant:"danger",onClick:Ss,children:" "})})]}),s.jsx(ne,{style:{padding:0,overflow:"hidden"},children:Object.keys(p||{}).length===0?s.jsx(Jt,{icon:s.jsx(b.shield,{size:28}),text:" "}):Object.values(p).map((v,z)=>s.jsx("div",{style:{padding:"12px 18px",borderBottom:`1px solid ${a.border}`},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:13,fontWeight:600},children:[v.name||"( )"," ",s.jsxs("span",{style:{color:a.textMuted},children:["(",v.studentId,")"]})]}),s.jsx("div",{style:{fontSize:12,color:a.textDim,marginTop:4},children:v.reason||" "})]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Hr(v.studentId),children:""})]})},v.studentId))})]}),D==="equipment"&&s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[s.jsxs("div",{style:{fontSize:13,color:a.textMuted},children:[" : ",s.jsxs("strong",{style:{color:a.text},children:[I.length,""]})]}),s.jsxs(H,{size:"sm",onClick:()=>{Y(),k(!0)},children:[s.jsx(b.plus,{size:14}),"  "]})]}),vs&&s.jsxs(ne,{style:{marginBottom:20,borderColor:a.accentBorder},children:[s.jsx(ct,{icon:Vn?s.jsx(b.edit,{size:16,color:a.accent}):s.jsx(b.plus,{size:16,color:a.accent}),children:Vn?" ":"  "}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr":"1fr 1fr",gap:14,marginBottom:14},children:[s.jsx(ye,{label:"",placeholder:": 3D ",value:at.name,onChange:v=>st(z=>({...z,name:v.target.value}))}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[s.jsx("label",{style:{fontSize:11,fontWeight:600,color:a.text,letterSpacing:"0.5px",textTransform:"uppercase"},children:""}),s.jsx("select",{value:at.category,onChange:v=>st(z=>({...z,category:v.target.value})),style:{padding:"8px 12px",borderRadius:8,border:`1px solid ${a.border}`,background:a.surface,color:a.text,fontSize:13,fontFamily:a.font},children:["","","",""].map(v=>s.jsx("option",{value:v,children:v},v))})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr 1fr":"1fr 1fr 1fr 1fr",gap:14,marginBottom:14},children:[s.jsx(ye,{label:" ()",placeholder:"",value:at.icon,onChange:v=>st(z=>({...z,icon:v.target.value}))}),s.jsx(ye,{label:" ",type:"number",value:at.total,onChange:v=>st(z=>({...z,total:Math.max(0,parseInt(v.target.value)||0)}))}),s.jsx(ye,{label:" ",type:"number",value:at.available,onChange:v=>st(z=>({...z,available:Math.max(0,parseInt(v.target.value)||0)}))}),s.jsx(ye,{label:" ",type:"number",value:at.maxDays,onChange:v=>st(z=>({...z,maxDays:Math.max(1,parseInt(v.target.value)||1)}))})]}),s.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:14},children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,color:a.text,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:at.deposit,onChange:v=>st(z=>({...z,deposit:v.target.checked}))})," "]})}),s.jsxs("div",{style:{display:"flex",gap:10},children:[s.jsx(H,{size:"sm",disabled:!at.name.trim()||!at.icon.trim()||at.total<=0,onClick:()=>{if(Vn)N(v=>v.map(z=>z.id===Vn?{...z,...at}:z)),l(`[]  : "${at.name}"`,"admin");else{const v={...at,id:`E${Date.now()}`};N(z=>[...z,v]),l(`[]  : "${at.name}"`,"admin")}Y()},children:Vn?" ":""}),s.jsx(H,{variant:"ghost",size:"sm",onClick:Y,children:""})]})]}),(()=>{const v=[...new Set(I.map(Z=>Z.category))],z=Z=>U(ot=>({...ot,[Z]:!ot[Z]}));return v.length===0?s.jsx(Jt,{icon:s.jsx(b.tool,{size:32}),text:"  "}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:v.map(Z=>{const ot=I.filter(pe=>pe.category===Z),Et=!!G[Z];return s.jsxs("div",{children:[s.jsxs("div",{onClick:()=>z(Z),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 18px",background:a.surface,borderRadius:a.radius,border:`1px solid ${Et?a.accent:a.border}`,cursor:"pointer",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:Et?a.accent:a.text},children:Z}),s.jsxs(re,{color:Et?"accent":"dim",style:{fontSize:10},children:[ot.length,""]})]}),s.jsx("span",{style:{fontSize:12,color:a.textDim,transition:"transform 0.2s",transform:Et?"rotate(180deg)":"rotate(0deg)"},children:""})]}),Et&&s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,marginTop:8,paddingLeft:12},children:ot.map(pe=>s.jsx(ne,{style:{padding:14},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[s.jsx("div",{style:{fontSize:28,width:40,textAlign:"center"},children:pe.icon}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:14,fontWeight:700,color:a.text,marginBottom:4},children:pe.name}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsxs(re,{color:pe.available>0?"green":"red",style:{fontSize:10},children:[" ",pe.available,"/",pe.total]}),s.jsxs(re,{color:"blue",style:{fontSize:10},children:[" ",pe.maxDays,""]}),pe.deposit&&s.jsx(re,{color:"yellow",style:{fontSize:10},children:""})]})]}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{st({name:pe.name,category:pe.category,available:pe.available,total:pe.total,deposit:pe.deposit,maxDays:pe.maxDays,icon:pe.icon}),ln(pe.id),k(!0)},children:s.jsx(b.edit,{size:14})}),fr===pe.id?s.jsxs(s.Fragment,{children:[s.jsx(H,{size:"sm",style:{background:a.red,color:"#fff"},onClick:()=>{N(_n=>_n.filter(Ne=>Ne.id!==pe.id)),l(`[]  : "${pe.name}"`,"admin"),Nt(null)},children:""}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Nt(null),children:""})]}):s.jsx(H,{variant:"ghost",size:"sm",style:{color:a.red},onClick:()=>Nt(pe.id),children:s.jsx(b.x,{size:14})})]})]})},pe.id))})]},Z)})})})()]}),D==="community"&&s.jsxs("div",{children:[s.jsx(ct,{icon:s.jsx(b.edit,{size:16,color:a.accent}),children:"  "}),s.jsxs(ne,{style:{marginBottom:20},children:[s.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.accent,marginBottom:12},children:sn?" ":"  "}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"1fr":"1fr 1fr",gap:14,marginBottom:14},children:[s.jsx(ye,{label:" ",value:Ee.title||"",onChange:v=>pt(z=>({...z,title:v.target.value}))}),s.jsx(ye,{label:"",value:Ee.location||"",onChange:v=>pt(z=>({...z,location:v.target.value}))}),s.jsx(ye,{label:"",placeholder:": 2026.02.05 ~ 02.09",value:Ee.dates||"",onChange:v=>pt(z=>({...z,dates:v.target.value}))}),s.jsx(ye,{label:"Instagram URL",value:Ee.instagramUrl||"",onChange:v=>pt(z=>({...z,instagramUrl:v.target.value}))})]}),s.jsx(ye,{label:"",value:Ee.description||"",onChange:v=>pt(z=>({...z,description:v.target.value}))}),s.jsx("input",{ref:dr,type:"file",accept:"image/*",onChange:_e,style:{display:"none"}}),s.jsxs("div",{style:{marginTop:14},children:[s.jsx("div",{style:{fontSize:11,fontWeight:600,color:a.textMuted,letterSpacing:"0.5px",textTransform:"uppercase",marginBottom:6},children:" "}),s.jsxs("button",{onClick:()=>{var v;return(v=dr.current)==null?void 0:v.click()},disabled:Nn,style:{display:"flex",alignItems:"center",gap:8,cursor:Nn?"not-allowed":"pointer",padding:"10px 16px",background:a.surface,border:`1px solid ${a.border}`,borderRadius:8,fontSize:13,color:a.text,transition:"all 0.2s",fontFamily:a.font,width:"100%",justifyContent:"flex-start",opacity:Nn?.5:1},onMouseEnter:v=>{Nn||(v.currentTarget.style.borderColor=a.accent)},onMouseLeave:v=>{Nn||(v.currentTarget.style.borderColor=a.border)},children:[s.jsx(b.upload,{size:16}),Ur?Ur.name:Ee.posterUrl?Ee.posterUrl.startsWith("data:")?"  ( )":Ee.posterUrl:"  "]}),Ee.posterUrl&&s.jsx("div",{style:{marginTop:10,borderRadius:8,overflow:"hidden",border:`1px solid ${a.border}`,maxHeight:200},children:s.jsx("img",{src:Ee.posterUrl,alt:" ",style:{width:"100%",height:"auto",display:"block",maxHeight:200,objectFit:"cover"}})})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:14,alignItems:"center"},children:[s.jsx(H,{size:"sm",onClick:()=>{var v;if((v=Ee.title)!=null&&v.trim()){if(sn)x(z=>z.map(Z=>Z.id===sn?{...Z,...Ee}:Z)),l(`[]  : "${Ee.title}"`,"admin");else{const z={...Ee,id:`exh${Date.now()}`,createdAt:new Date().toISOString()};x(Z=>[z,...Z]),l(`[]  : "${Ee.title}"`,"admin")}pt({title:"",description:"",dates:"",location:"",instagramUrl:"",posterUrl:""}),on(null),yn(null),Ze(!0),setTimeout(()=>Ze(!1),2e3)}},children:sn?" ":""}),sn&&s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>{pt({title:"",description:"",dates:"",location:"",instagramUrl:"",posterUrl:""}),on(null),yn(null)},children:""}),ae&&s.jsx("span",{style:{fontSize:12,color:a.green,fontWeight:600},children:""})]})]}),s.jsxs(ne,{style:{marginBottom:20},children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:14,lineHeight:1.6},children:"  .    ."}),g!=null&&g.length?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:0},children:g.map((v,z)=>s.jsxs("div",{style:{padding:"14px 16px",borderBottom:z<g.length-1?`1px solid ${a.border}`:"none",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[s.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",gap:12},children:[v.posterUrl&&s.jsx("img",{src:v.posterUrl,alt:"",style:{width:50,height:50,objectFit:"cover",borderRadius:6,flexShrink:0},onError:Z=>{Z.currentTarget.style.display="none"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:600,marginBottom:4},children:v.title}),s.jsxs("div",{style:{fontSize:11,color:a.textDim},children:[" ",v.dates||"","   ",v.location||""]})]})]}),s.jsxs("div",{style:{flexShrink:0,display:"flex",gap:4},children:[s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>{pt({title:v.title||"",description:v.description||"",dates:v.dates||"",location:v.location||"",instagramUrl:v.instagramUrl||"",posterUrl:v.posterUrl||""}),on(v.id),yn(null)},children:[s.jsx(b.edit,{size:14})," "]}),Wr===v.id?s.jsxs("div",{style:{display:"flex",gap:4},children:[s.jsx(H,{size:"sm",variant:"danger",onClick:()=>{x(Z=>Z.filter(ot=>ot.id!==v.id)),Rn(null),l(`[]  : "${v.title}"`,"admin")},children:""}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Rn(null),children:""})]}):s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>Rn(v.id),style:{color:a.red},children:[s.jsx(b.trash,{size:14})," "]})]})]},v.id))}):s.jsx(Jt,{icon:s.jsx(b.list,{size:28}),text:"  "})]}),s.jsx(ct,{icon:s.jsx(b.list,{size:16,color:a.accent}),children:"  "}),s.jsxs(ne,{children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:14,lineHeight:1.6},children:"       .      ."}),j!=null&&j.length?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:0},children:j.map((v,z)=>{var Z,ot,Et,pe,_n;return s.jsxs("div",{style:{borderBottom:z<j.length-1?`1px solid ${a.border}`:"none"},children:[s.jsxs("div",{style:{padding:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,cursor:((Z=v.comments)==null?void 0:Z.length)>0?"pointer":"default",background:Hn===v.id?"rgba(212, 160, 83, 0.05)":"transparent",transition:"background 0.2s"},onClick:()=>{var Ne;((Ne=v.comments)==null?void 0:Ne.length)>0&&(Si(Hn===v.id?null:v.id),vt(null))},children:[s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontSize:13,color:a.text,lineHeight:1.5,marginBottom:6,wordBreak:"break-word"},children:v.content}),s.jsxs("div",{style:{display:"flex",gap:12,fontSize:11,color:a.textDim},children:[s.jsx("span",{children:new Date(v.createdAt).toLocaleString("ko-KR")}),s.jsxs("span",{style:{color:((ot=v.comments)==null?void 0:ot.length)>0?a.accent:a.textDim},children:["  ",((Et=v.comments)==null?void 0:Et.length)||0," ",((pe=v.comments)==null?void 0:pe.length)>0?Hn===v.id?"":"":""]})]})]}),s.jsx("div",{style:{flexShrink:0},onClick:Ne=>Ne.stopPropagation(),children:ur===v.id?s.jsxs("div",{style:{display:"flex",gap:4},children:[s.jsx(H,{size:"sm",variant:"danger",onClick:()=>{m(Ne=>Ne.filter(Sn=>Sn.id!==v.id)),Un(null),l(`[]   : "${v.content.slice(0,20)}..."`,"admin")},children:""}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Un(null),children:""})]}):s.jsxs(H,{size:"sm",variant:"ghost",onClick:()=>Un(v.id),style:{color:a.red},children:[s.jsx(b.trash,{size:14})," "]})})]}),Hn===v.id&&((_n=v.comments)==null?void 0:_n.length)>0&&s.jsx("div",{style:{padding:"0 16px 14px 32px",background:"rgba(0,0,0,0.15)"},children:v.comments.map(Ne=>s.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsxs("div",{style:{fontSize:12,color:a.text,lineHeight:1.4,marginBottom:3},children:[" ",Ne.content]}),s.jsx("div",{style:{fontSize:10,color:a.textDim},children:new Date(Ne.createdAt).toLocaleString("ko-KR")})]}),s.jsx("div",{style:{flexShrink:0},children:wi===Ne.id?s.jsxs("div",{style:{display:"flex",gap:4},children:[s.jsx(H,{size:"sm",variant:"danger",onClick:()=>{m(Sn=>Sn.map(Gn=>Gn.id===v.id?{...Gn,comments:Gn.comments.filter(Ko=>Ko.id!==Ne.id)}:Gn)),vt(null),l(`[]  : "${Ne.content.slice(0,20)}..."`,"admin")},children:""}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>vt(null),children:""})]}):s.jsxs("button",{onClick:()=>vt(Ne.id),style:{padding:"3px 8px",border:"none",borderRadius:3,background:"transparent",color:a.textDim,fontSize:10,cursor:"pointer",fontFamily:a.font,display:"flex",alignItems:"center",gap:4},onMouseEnter:Sn=>Sn.currentTarget.style.color=a.red,onMouseLeave:Sn=>Sn.currentTarget.style.color=a.textDim,children:[s.jsx(b.trash,{size:12})," "]})})]},Ne.id))})]},v.id)})}):s.jsx(Jt,{icon:s.jsx(b.list,{size:28}),text:"  "})]})]}),D==="adminLog"&&s.jsxs("div",{children:[s.jsx(ct,{icon:s.jsx(b.log,{size:16,color:a.accent}),children:"  "}),s.jsx(ne,{style:{padding:0,overflow:"hidden"},children:xn.length===0?s.jsx(Jt,{icon:s.jsx(b.log,{size:28}),text:"  "}):s.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:xn.map(v=>s.jsx("div",{style:{padding:"12px 18px",borderBottom:`1px solid ${a.border}`,borderLeft:`3px solid ${a.red}`},children:s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"flex-start"},children:[s.jsx("code",{style:{fontSize:11,color:a.textDim,fontFamily:a.fontMono,whiteSpace:"nowrap",marginTop:1},children:v.time}),s.jsx("div",{style:{fontSize:13,color:a.text,lineHeight:1.5},children:v.action})]})},v.id))})})]}),D==="certificates"&&s.jsxs("div",{children:[s.jsx(ct,{icon:s.jsx(b.file,{size:16,color:a.blue}),children:" "}),s.jsxs(ne,{children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:14,lineHeight:1.6},children:"     ."}),Object.keys(S||{}).length?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(S).map(([v,z])=>s.jsx(ne,{style:{background:a.surface,padding:14,cursor:"pointer"},hover:!0,onClick:()=>it(z),children:s.jsxs("div",{style:{display:"flex",gap:14,alignItems:"flex-start"},children:[s.jsx("div",{style:{padding:12,background:a.blueBg,borderRadius:a.radiusSm,border:`1px solid ${a.blueBorder}`},children:s.jsx(b.file,{size:24,color:a.blue})}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[s.jsx("span",{style:{fontSize:14,fontWeight:700,color:a.text},children:z.studentName||v}),s.jsx(re,{color:"blue",children:""})]}),s.jsxs("div",{style:{fontSize:12,color:a.textMuted,marginBottom:6},children:[": ",v,"  : ",z.fileName]}),s.jsxs("div",{style:{display:"flex",gap:12,fontSize:11,color:a.textDim},children:[s.jsxs("span",{children:[": ",(z.fileSize/1024).toFixed(1)," KB"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[": ",new Date(z.uploadDate).toLocaleString("ko-KR")]})]})]}),s.jsx("div",{style:{fontSize:11,color:a.blue,fontWeight:600},children:"  "})]})},v))}):s.jsx(Jt,{icon:s.jsx(b.file,{size:28}),text:"  "})]})]}),D==="integration"&&s.jsxs("div",{children:[s.jsx(ct,{icon:s.jsx(b.refresh,{size:16,color:a.accent}),children:"  "}),s.jsxs(ne,{style:{marginBottom:14},children:[s.jsx("div",{style:{fontSize:12,color:a.textMuted,marginBottom:10,lineHeight:1.6},children:"      . Google Apps Script  URL ."}),s.jsx(ye,{label:"Google Apps Script Web App URL",placeholder:"https://script.google.com/macros/s/XXX/exec",value:he,onChange:v=>Re(v.target.value)}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[s.jsx(H,{size:"sm",onClick:Wt,disabled:!he.trim(),children:""}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Re(""),children:""})]})]}),s.jsx(ne,{style:{background:a.blueBg,borderColor:a.blueBorder,padding:14},children:s.jsx("div",{style:{fontSize:12,color:a.blue,lineHeight:1.6},children:"  :  , , /, , , . CORS  POST     ."})})]}),Ve&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20},onClick:()=>Qt(null),children:s.jsxs("div",{style:{background:a.card,borderRadius:a.radius,border:`1px solid ${a.border}`,maxWidth:900,width:"100%",maxHeight:"90vh",overflow:"auto",padding:24},onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:16,fontWeight:700,color:a.text,marginBottom:4},children:"  "}),s.jsxs("div",{style:{fontSize:13,color:a.textMuted},children:[Ve.studentName||" "," (",Ve.studentId,")"]})]}),s.jsx("button",{onClick:()=>Qt(null),style:{background:"none",border:"none",color:a.textMuted,cursor:"pointer",fontSize:24,padding:4},children:s.jsx(b.x,{size:20})})]}),s.jsx("div",{style:{background:a.surface,borderRadius:a.radiusSm,padding:16,marginBottom:20,maxHeight:"60vh",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"center"},children:M?s.jsx("div",{style:{textAlign:"center",padding:40,color:a.textMuted},children:s.jsx("div",{style:{fontSize:14},children:"  ..."})}):E?(vn=Ve.fileType)!=null&&vn.startsWith("image/")?s.jsx("img",{src:E,alt:"",style:{maxWidth:"100%",maxHeight:"60vh",objectFit:"contain"}}):Ve.fileType==="application/pdf"?s.jsx("iframe",{src:E,style:{width:"100%",height:"60vh",border:"none"},title:"PDF "}):s.jsxs("div",{style:{textAlign:"center",padding:40,color:a.textMuted},children:[s.jsx(b.file,{size:48,style:{opacity:.5,marginBottom:12}}),s.jsx("div",{style:{fontSize:14},children:"    "}),s.jsx("div",{style:{fontSize:12,marginTop:8},children:Ve.fileName})]}):s.jsxs("div",{style:{textAlign:"center",padding:40,color:a.textMuted},children:[s.jsx(b.file,{size:48,style:{opacity:.5,marginBottom:12}}),s.jsx("div",{style:{fontSize:14},children:"   "})]})}),s.jsxs("div",{style:{display:"flex",gap:12,fontSize:12,color:a.textDim,marginBottom:20,padding:"12px 16px",background:a.surface,borderRadius:a.radiusSm},children:[s.jsxs("span",{children:[": ",Ve.fileName]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[": ",(Ve.fileSize/1024).toFixed(1)," KB"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[": ",new Date(Ve.uploadDate).toLocaleString("ko-KR")]})]}),s.jsxs("div",{style:{display:"flex",gap:10,justifyContent:"flex-end"},children:[s.jsxs(H,{variant:"ghost",onClick:()=>{if(!E)return;const v=document.createElement("a");v.href=E,v.download=Ve.fileName,v.click()},children:[s.jsx(b.download,{size:16})," "]}),s.jsxs(H,{variant:"success",onClick:()=>ws(Ve),disabled:De,children:[s.jsx(b.check,{size:16})," ",De?" ...":" ()"]}),s.jsxs(H,{variant:"danger",onClick:()=>{window.confirm(`${Ve.studentName}(${Ve.studentId})  ?`)&&Ci(Ve)},children:[s.jsx(b.x,{size:16})," "]}),s.jsx(H,{variant:"ghost",onClick:()=>Qt(null),children:""})]})]})})]})}const p_=()=>{};var qh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(e,t){if(!e)throw gs(t)},gs=function(e){return new Error("Firebase Database ("+py.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},g_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],l=e[n++],c=e[n++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(d>>10)),t[r++]=String.fromCharCode(56320+(d&1023))}else{const o=e[n++],l=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return t.join("")},Gu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],l=i+1<e.length,c=l?e[i+1]:0,d=i+2<e.length,u=d?e[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4;let f=(c&15)<<2|u>>6,S=u&63;d||(S=64,l||(f=64)),r.push(n[h],n[p],n[f],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gy(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):g_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],c=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const p=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||c==null||u==null||p==null)throw new m_;const f=o<<2|c>>4;if(r.push(f),u!==64){const S=c<<4&240|u>>2;if(r.push(S),p!==64){const y=u<<6&192|p;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class m_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const my=function(e){const t=gy(e);return Gu.encodeByteArray(t,!0)},Xl=function(e){return my(e).replace(/\./g,"")},zd=function(e){try{return Gu.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(e){return yy(void 0,e)}function yy(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!x_(n)||(e[n]=yy(e[n],t[n]));return e}function x_(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=()=>v_().__FIREBASE_DEFAULTS__,S_=()=>{if(typeof process>"u"||typeof qh>"u")return;const e=qh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},w_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&zd(e[1]);return t&&JSON.parse(t)},xy=()=>{try{return p_()||__()||S_()||w_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},j_=e=>{var t,n;return(n=(t=xy())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},C_=e=>{const t=j_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},vy=()=>{var e;return(e=xy())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Xl(JSON.stringify(n)),Xl(JSON.stringify(l)),""].join(".")}const Js={};function I_(){const e={prod:[],emulator:[]};for(const t of Object.keys(Js))Js[t]?e.emulator.push(t):e.prod.push(t);return e}function E_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Zh=!1;function T_(e,t){if(typeof window>"u"||typeof document>"u"||!Yu(window.location.host)||Js[e]===t||Js[e]||Zh)return;Js[e]=t;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",o=I_().prod.length>0;function l(){const f=document.getElementById(r);f&&f.remove()}function c(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function d(f,S){f.setAttribute("width","24"),f.setAttribute("id",S),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Zh=!0,l()},f}function h(f,S){f.setAttribute("id",S),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function p(){const f=E_(r),S=n("text"),y=document.getElementById(S)||document.createElement("span"),w=n("learnmore"),j=document.getElementById(w)||document.createElement("a"),m=n("preprendIcon"),g=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const x=f.element;c(x),h(j,w);const I=u();d(g,m),x.append(g,y,j,I),document.body.appendChild(x)}o?(y.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D_())}function z_(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function R_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N_(){return py.NODE_ADMIN===!0}function Sy(){try{return typeof indexedDB=="object"}catch{return!1}}function wy(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)==null?void 0:o.message)||"")}}catch(n){t(n)}})}function M_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="FirebaseError";class xi extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=A_,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Da.prototype.create)}}class Da{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],l=o?P_(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new xi(i,c,r)}}function P_(e,t){return e.replace(F_,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const F_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(e){return JSON.parse(e)}function ft(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=So(zd(o[0])||""),n=So(zd(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},O_=function(e){const t=jy(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},L_=function(e){const t=jy(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function os(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function ep(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Jl(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function wo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],l=t[i];if(tp(o)&&tp(l)){if(!wo(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tp(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let p=0;p<16;p++)r[p]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let p=16;p<80;p++){const f=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],d=this.chain_[4],u,h;for(let p=0;p<80;p++){p<40?p<20?(u=c^o&(l^c),h=1518500249):(u=o^l^c,h=1859775393):p<60?(u=o&l|c&(o|l),h=2400959708):(u=o^l^c,h=3395469782);const f=(i<<5|i>>>27)+u+d+h+r[p]&4294967295;d=c,c=l,l=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let l=this.inbuf_;for(;i<n;){if(l===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[l]=t.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}else for(;i<n;)if(o[l]=t[i],++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}}function za(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,B(r<e.length,"Surrogate pair missing trail surrogate.");const l=e.charCodeAt(r)-56320;i=65536+(o<<10)+l}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Ra=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=1e3,H_=2,V_=4*60*60*1e3,K_=.5;function np(e,t=U_,n=H_){const r=t*Math.pow(n,e),i=Math.round(K_*r*(Math.random()-.5)*2);return Math.min(V_,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(e){return e&&e._delegate?e._delegate:e}class sr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Oo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Q_(t))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Xr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xr){return this.instances.has(t)}getOptions(t=Xr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y_(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xr){return this.component?this.component.multipleInstances?t:Xr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y_(e){return e===Xr?void 0:e}function Q_(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new G_(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Pe||(Pe={}));const J_={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},q_=Pe.INFO,Z_={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},eS=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Z_[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qu{constructor(t){this.name=t,this._logLevel=q_,this._logHandler=eS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?J_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const tS=(e,t)=>t.some(n=>e instanceof n);let rp,ip;function nS(){return rp||(rp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rS(){return ip||(ip=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cy=new WeakMap,Rd=new WeakMap,ky=new WeakMap,jc=new WeakMap,Xu=new WeakMap;function iS(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{n(Tr(e.result)),i()},l=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&Cy.set(n,e)}).catch(()=>{}),Xu.set(t,e),t}function sS(e){if(Rd.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});Rd.set(e,t)}let Nd={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Rd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ky.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function oS(e){Nd=e(Nd)}function lS(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Cc(this),t,...n);return ky.set(r,t.sort?t.sort():[t]),Tr(r)}:rS().includes(e)?function(...t){return e.apply(Cc(this),t),Tr(Cy.get(this))}:function(...t){return Tr(e.apply(Cc(this),t))}}function aS(e){return typeof e=="function"?lS(e):(e instanceof IDBTransaction&&sS(e),tS(e,nS())?new Proxy(e,Nd):e)}function Tr(e){if(e instanceof IDBRequest)return iS(e);if(jc.has(e))return jc.get(e);const t=aS(e);return t!==e&&(jc.set(e,t),Xu.set(t,e)),t}const Cc=e=>Xu.get(e);function by(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(e,t),c=Tr(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Tr(l.result),d.oldVersion,d.newVersion,Tr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const cS=["get","getKey","getAll","getAllKeys","count"],dS=["put","add","delete","clear"],kc=new Map;function sp(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(kc.get(t))return kc.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=dS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cS.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let u=d.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),i&&d.done]))[0]};return kc.set(t,o),o}oS(e=>({...e,get:(t,n,r)=>sp(t,n)||e.get(t,n,r),has:(t,n)=>!!sp(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fS(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Md="@firebase/app",op="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Qu("@firebase/app"),hS="@firebase/app-compat",pS="@firebase/analytics-compat",gS="@firebase/analytics",mS="@firebase/app-check-compat",yS="@firebase/app-check",xS="@firebase/auth",vS="@firebase/auth-compat",_S="@firebase/database",SS="@firebase/data-connect",wS="@firebase/database-compat",jS="@firebase/functions",CS="@firebase/functions-compat",kS="@firebase/installations",bS="@firebase/installations-compat",IS="@firebase/messaging",ES="@firebase/messaging-compat",TS="@firebase/performance",DS="@firebase/performance-compat",zS="@firebase/remote-config",RS="@firebase/remote-config-compat",NS="@firebase/storage",MS="@firebase/storage-compat",AS="@firebase/firestore",PS="@firebase/ai",FS="@firebase/firestore-compat",OS="firebase",LS="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",BS={[Md]:"fire-core",[hS]:"fire-core-compat",[gS]:"fire-analytics",[pS]:"fire-analytics-compat",[yS]:"fire-app-check",[mS]:"fire-app-check-compat",[xS]:"fire-auth",[vS]:"fire-auth-compat",[_S]:"fire-rtdb",[SS]:"fire-data-connect",[wS]:"fire-rtdb-compat",[jS]:"fire-fn",[CS]:"fire-fn-compat",[kS]:"fire-iid",[bS]:"fire-iid-compat",[IS]:"fire-fcm",[ES]:"fire-fcm-compat",[TS]:"fire-perf",[DS]:"fire-perf-compat",[zS]:"fire-rc",[RS]:"fire-rc-compat",[NS]:"fire-gcs",[MS]:"fire-gcs-compat",[AS]:"fire-fst",[FS]:"fire-fst-compat",[PS]:"fire-vertex","fire-js":"fire-js",[OS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,$S=new Map,Pd=new Map;function lp(e,t){try{e.container.addComponent(t)}catch(n){or.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ar(e){const t=e.name;if(Pd.has(t))return or.debug(`There were multiple attempts to register component ${t}.`),!1;Pd.set(t,e);for(const n of ql.values())lp(n,e);for(const n of $S.values())lp(n,e);return!0}function Lo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function WS(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new Da("app","Firebase",US);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=LS;function Iy(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:Ad,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw Dr.create("bad-app-name",{appName:String(i)});if(n||(n=vy()),!n)throw Dr.create("no-options");const o=ql.get(i);if(o){if(wo(n,o.options)&&wo(r,o.config))return o;throw Dr.create("duplicate-app",{appName:i})}const l=new X_(i);for(const d of Pd.values())l.addComponent(d);const c=new HS(n,r,l);return ql.set(i,c),c}function Ey(e=Ad){const t=ql.get(e);if(!t&&e===Ad&&vy())return Iy();if(!t)throw Dr.create("no-app",{appName:e});return t}function Ln(e,t,n){let r=BS[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${t}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Ar(new sr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="firebase-heartbeat-database",GS=1,jo="firebase-heartbeat-store";let bc=null;function Ty(){return bc||(bc=by(KS,GS,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(jo)}catch(n){console.warn(n)}}}}).catch(e=>{throw Dr.create("idb-open",{originalErrorMessage:e.message})})),bc}async function YS(e){try{const n=(await Ty()).transaction(jo),r=await n.objectStore(jo).get(Dy(e));return await n.done,r}catch(t){if(t instanceof xi)or.warn(t.message);else{const n=Dr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});or.warn(n.message)}}}async function ap(e,t){try{const r=(await Ty()).transaction(jo,"readwrite");await r.objectStore(jo).put(t,Dy(e)),await r.done}catch(n){if(n instanceof xi)or.warn(n.message);else{const r=Dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function Dy(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=1024,XS=30;class JS{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cp();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>XS){const l=ew(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cp(),{heartbeatsToSend:r,unsentEntries:i}=qS(this._heartbeatsCache.heartbeats),o=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return or.warn(n),""}}}function cp(){return new Date().toISOString().substring(0,10)}function qS(e,t=QS){const n=[];let r=e.slice();for(const i of e){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),dp(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dp(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sy()?wy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ap(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ap(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function dp(e){return Xl(JSON.stringify({version:2,heartbeats:e})).length}function ew(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(e){Ar(new sr("platform-logger",t=>new uS(t),"PRIVATE")),Ar(new sr("heartbeat",t=>new JS(t),"PRIVATE")),Ln(Md,op,e),Ln(Md,op,"esm2020"),Ln("fire-js","")}tw("");var nw="firebase",rw="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(nw,rw,"app");var up={};const fp="@firebase/database",hp="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zy="";function iw(e){zy=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ft(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:So(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Bn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sw(t)}}catch{}return new ow},ni=Ry("localStorage"),lw=Ry("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Qu("@firebase/database"),aw=function(){let e=1;return function(){return e++}}(),Ny=function(e){const t=W_(e),n=new $_;n.update(t);const r=n.digest();return Gu.encodeByteArray(r)},Bo=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Bo.apply(null,r):typeof r=="object"?t+=ft(r):t+=r,t+=" "}return t};let qs=null,pp=!0;const cw=function(e,t){B(!0,"Can't turn on custom loggers persistently."),Qi.logLevel=Pe.VERBOSE,qs=Qi.log.bind(Qi)},wt=function(...e){if(pp===!0&&(pp=!1,qs===null&&lw.get("logging_enabled")===!0&&cw()),qs){const t=Bo.apply(null,e);qs(t)}},$o=function(e){return function(...t){wt(e,...t)}},Fd=function(...e){const t="FIREBASE INTERNAL ERROR: "+Bo(...e);Qi.error(t)},lr=function(...e){const t=`FIREBASE FATAL ERROR: ${Bo(...e)}`;throw Qi.error(t),new Error(t)},Ot=function(...e){const t="FIREBASE WARNING: "+Bo(...e);Qi.warn(t)},dw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ju=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},uw=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ls="[MIN_NAME]",ui="[MAX_NAME]",vi=function(e,t){if(e===t)return 0;if(e===ls||t===ui)return-1;if(t===ls||e===ui)return 1;{const n=gp(e),r=gp(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},fw=function(e,t){return e===t?0:e<t?-1:1},Ms=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ft(t))},qu=function(e){if(typeof e!="object"||e===null)return ft(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=ft(t[r]),n+=":",n+=qu(e[t[r]]);return n+="}",n},My=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function kt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ay=function(e){B(!Ju(e),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let i,o,l,c,d;e===0?(o=0,l=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=c+r,l=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,l=Math.round(e/Math.pow(2,1-r-n))));const u=[];for(d=n;d;d-=1)u.push(l%2?1:0),l=Math.floor(l/2);for(d=t;d;d-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const h=u.join("");let p="";for(d=0;d<64;d+=8){let f=parseInt(h.substr(d,8),2).toString(16);f.length===1&&(f="0"+f),p=p+f}return p.toLowerCase()},hw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},pw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function gw(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}const mw=new RegExp("^-?(0*)\\d{1,10}$"),yw=-2147483648,xw=2147483647,gp=function(e){if(mw.test(e)){const t=Number(e);if(t>=yw&&t<=xw)return t}return null},ms=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Ot("Exception was thrown by user callback.",n),t},Math.floor(0))}},vw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zs=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,WS(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(t)}}class kl{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}kl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="5",Py="v",Fy="s",Oy="r",Ly="f",By=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$y="ls",Wy="p",Od="ac",Uy="websocket",Hy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(t,n,r,i,o=!1,l="",c=!1,d=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ni.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ni.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function ww(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Ky(e,t,n){B(typeof t=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let r;if(t===Uy)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Hy)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);ww(e)&&(n.ns=e.namespace);const i=[];return kt(n,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.counters_={}}incrementCounter(t,n=1){Bn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return y_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={},Ec={};function ef(e){const t=e.toString();return Ic[t]||(Ic[t]=new jw),Ic[t]}function Cw(e,t){const n=e.toString();return Ec[n]||(Ec[n]=t()),Ec[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ms(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="start",bw="close",Iw="pLPCommand",Ew="pRTLPCB",Gy="id",Yy="pw",Qy="ser",Tw="cb",Dw="seg",zw="ts",Rw="d",Nw="dframe",Xy=1870,Jy=30,Mw=Xy-Jy,Aw=25e3,Pw=3e4;class $i{constructor(t,n,r,i,o,l,c){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$o(t),this.stats_=ef(n),this.urlFn=d=>(this.appCheckToken&&(d[Od]=this.appCheckToken),Ky(n,Hy,d))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new kw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Pw)),uw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tf((...o)=>{const[l,c,d,u,h]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===mp)this.id=c,this.password=d;else if(l===bw)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[mp]="t",r[Qy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Tw]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Py]=Zu,this.transportSessionId&&(r[Fy]=this.transportSessionId),this.lastSessionId&&(r[$y]=this.lastSessionId),this.applicationId&&(r[Wy]=this.applicationId),this.appCheckToken&&(r[Od]=this.appCheckToken),typeof location<"u"&&location.hostname&&By.test(location.hostname)&&(r[Oy]=Ly);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$i.forceAllow_=!0}static forceDisallow(){$i.forceDisallow_=!0}static isAvailable(){return $i.forceAllow_?!0:!$i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hw()&&!pw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=ft(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=my(n),i=My(r,Mw);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Nw]="t",r[Gy]=t,r[Yy]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=ft(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class tf{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=aw(),window[Iw+this.uniqueCallbackIdentifier]=t,window[Ew+this.uniqueCallbackIdentifier]=n,this.myIFrame=tf.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){wt("frame writing exception"),c.stack&&wt(c.stack),wt(c)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||wt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Gy]=this.myID,t[Yy]=this.myPW,t[Qy]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Jy+r.length<=Xy;){const l=this.pendingSegs.shift();r=r+"&"+Dw+i+"="+l.seg+"&"+zw+i+"="+l.ts+"&"+Rw+i+"="+l.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Aw)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{wt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=16384,Ow=45e3;let Zl=null;typeof MozWebSocket<"u"?Zl=MozWebSocket:typeof WebSocket<"u"&&(Zl=WebSocket);class bn{constructor(t,n,r,i,o,l,c){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$o(this.connId),this.stats_=ef(n),this.connURL=bn.connectionURL_(n,l,c,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,i,o){const l={};return l[Py]=Zu,typeof location<"u"&&location.hostname&&By.test(location.hostname)&&(l[Oy]=Ly),n&&(l[Fy]=n),r&&(l[$y]=r),i&&(l[Od]=i),o&&(l[Wy]=o),Ky(t,Uy,l)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ni.set("previous_websocket_failure",!0);try{let r;N_(),this.mySock=new Zl(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){bn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Zl!==null&&!bn.forceDisallow_}static previouslyFailed(){return ni.isInMemoryStorage||ni.get("previous_websocket_failure")===!0}markConnectionHealthy(){ni.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=So(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(B(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=ft(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=My(n,Fw);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ow))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}bn.responsesRequiredToBeHealthy=2;bn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static get ALL_TRANSPORTS(){return[$i,bn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=bn&&bn.isAvailable();let r=n&&!bn.previouslyFailed();if(t.webSocketOnly&&(n||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[bn];else{const i=this.transports_=[];for(const o of Co.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);Co.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Co.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=6e4,Bw=5e3,$w=10*1024,Ww=100*1024,Tc="t",yp="d",Uw="s",xp="r",Hw="e",vp="o",_p="a",Sp="n",wp="p",Vw="h";class Kw{constructor(t,n,r,i,o,l,c,d,u,h){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=d,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$o("c:"+this.id+":"),this.transportManager_=new Co(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ww?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$w?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Tc in t){const n=t[Tc];n===_p?this.upgradeIfSecondaryHealthy_():n===xp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===vp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Ms("t",t),r=Ms("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:wp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_p,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Ms("t",t),r=Ms("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Ms(Tc,t);if(yp in t){const r=t[yp];if(n===Vw){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Sp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Uw?this.onConnectionShutdown_(r):n===xp?this.onReset_(r):n===Hw?Fd("Server Error: "+r):n===vp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fd("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Zu!==r&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Lw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Bw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:wp,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t){this.allowedEvents_=t,this.listeners_={},B(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){B(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Zy{static getInstance(){return new ea}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_y()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return B(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=32,Cp=768;class ze{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function je(){return new ze("")}function ge(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Pr(e){return e.pieces_.length-e.pieceNum_}function Fe(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ze(e.pieces_,t)}function nf(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Gw(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function ko(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ex(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ze(t,0)}function Je(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ze)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ze(n,0)}function xe(e){return e.pieceNum_>=e.pieces_.length}function At(e,t){const n=ge(e),r=ge(t);if(n===null)return t;if(n===r)return At(Fe(e),Fe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Yw(e,t){const n=ko(e,0),r=ko(t,0);for(let i=0;i<n.length&&i<r.length;i++){const o=vi(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function rf(e,t){if(Pr(e)!==Pr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function un(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Pr(e)>Pr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Qw{constructor(t,n){this.errorPrefix_=n,this.parts_=ko(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ra(this.parts_[r]);tx(this)}}function Xw(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ra(t),tx(e)}function Jw(e){const t=e.parts_.pop();e.byteLength_-=Ra(t),e.parts_.length>0&&(e.byteLength_-=1)}function tx(e){if(e.byteLength_>Cp)throw new Error(e.errorPrefix_+"has a key path longer than "+Cp+" bytes ("+e.byteLength_+").");if(e.parts_.length>jp)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jp+") or object contains a cycle "+Jr(e))}function Jr(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Zy{static getInstance(){return new sf}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return B(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=1e3,qw=60*5*1e3,kp=30*1e3,Zw=1.3,ej=3e4,tj="server_kill",bp=3;class er extends qy{constructor(t,n,r,i,o,l,c,d){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=er.nextPersistentConnectionId_++,this.log_=$o("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=As,this.maxReconnectDelay_=qw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sf.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ea.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const i=++this.requestNumber_,o={r:i,a:t,b:n};this.log_(ft(o)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(t){this.initConnection_();const n=new Oo,i={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,r,i){this.initConnection_();const o=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:n,query:t,tag:r};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const o={p:r},l="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(l,o,c=>{const d=c.d,u=c.s;er.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,i),t.onComplete&&t.onComplete(u,d))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Bn(t,"w")){const r=os(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||L_(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=kp)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=O_(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const o=i.s,l=i.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,t._queryObject,n)}sendUnlisten_(t,n,r,i){this.log_("Unlisten on "+t+" for "+n);const o={p:t},l="n";i&&(o.q=r,o.t=i),this.sendRequest(l,o)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,i){const o={p:n,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,l=>{i&&setTimeout(()=>{i(l.s,l.d)},Math.floor(0))})}put(t,n,r,i){this.putInternal("p",t,n,r,i)}merge(t,n,r,i){this.putInternal("m",t,n,r,i)}putInternal(t,n,r,i,o){this.initConnection_();const l={p:n,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:t,request:l,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ft(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Fd("Unrecognized action received from server: "+ft(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=As,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=As,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ej&&(this.reconnectDelay_=As),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Zw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+er.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,r())},u=function(p){B(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:d,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);l?wt("getToken() completed but was canceled"):(wt("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=f&&f.token,c=new Kw(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,S=>{Ot(S+" ("+this.repoInfo_.toString()+")"),this.interrupt(tj)},o))}catch(p){this.log_("Failed to get token: "+p),l||(this.repoInfo_.nodeAdmin&&Ot(p),d())}}}interrupt(t){wt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){wt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ep(this.interruptReasons_)&&(this.reconnectDelay_=As,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(o=>qu(o)).join("$"):r="default";const i=this.removeListen_(t,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,n){const r=new ze(t).toString();let i;if(this.listens.has(r)){const o=this.listens.get(r);i=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(t,n){wt("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bp&&(this.reconnectDelay_=kp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){wt("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+zy.replace(/\./g,"-")]=1,_y()?t["framework.cordova"]=1:R_()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ea.getInstance().currentlyOnline();return ep(this.interruptReasons_)&&t}}er.nextPersistentConnectionId_=0;er.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new me(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new me(ls,t),i=new me(ls,n);return this.compare(r,i)!==0}minPost(){return me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul;class nx extends Na{static get __EMPTY_NODE(){return ul}static set __EMPTY_NODE(t){ul=t}compare(t,n){return vi(t.name,n.name)}isDefinedOn(t){throw gs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return me.MIN}maxPost(){return new me(ui,ul)}makePost(t,n){return B(typeof t=="string","KeyIndex indexValue must always be a string."),new me(t,ul)}toString(){return".key"}}const Xi=new nx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=n?r(t.key,n):1,i&&(l*=-1),l<0)this.isReverse_?t=t.left:t=t.right;else if(l===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class yt{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??yt.RED,this.left=i??Vt.EMPTY_NODE,this.right=o??Vt.EMPTY_NODE}copy(t,n,r,i,o){return new yt(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Vt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}yt.RED=!0;yt.BLACK=!1;class nj{copy(t,n,r,i,o){return this}insert(t,n,r){return new yt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Vt{constructor(t,n=Vt.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new Vt(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,yt.BLACK,null,null))}remove(t){return new Vt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,yt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new fl(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new fl(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new fl(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new fl(this.root_,null,this.comparator_,!0,t)}}Vt.EMPTY_NODE=new nj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(e,t){return vi(e.name,t.name)}function of(e,t){return vi(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld;function ij(e){Ld=e}const rx=function(e){return typeof e=="number"?"number:"+Ay(e):"string:"+e},ix=function(e){if(e.isLeafNode()){const t=e.val();B(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Bn(t,".sv"),"Priority must be a string or number.")}else B(e===Ld||e.isEmpty(),"priority of unexpected type.");B(e===Ld||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ip;class gt{static set __childrenNodeConstructor(t){Ip=t}static get __childrenNodeConstructor(){return Ip}constructor(t,n=gt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ix(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new gt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xe(t)?this:ge(t)===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:gt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=ge(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||Pr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,gt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rx(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=Ay(this.value_):t+=this.value_,this.lazyHash_=Ny(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===gt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof gt.__childrenNodeConstructor?-1:(B(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=gt.VALUE_TYPE_ORDER.indexOf(n),o=gt.VALUE_TYPE_ORDER.indexOf(r);return B(i>=0,"Unknown leaf type: "+n),B(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}gt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sx,ox;function sj(e){sx=e}function oj(e){ox=e}class lj extends Na{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?vi(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return me.MIN}maxPost(){return new me(ui,new gt("[PRIORITY-POST]",ox))}makePost(t,n){const r=sx(t);return new me(n,new gt("[PRIORITY-POST]",r))}toString(){return".priority"}}const qe=new lj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=Math.log(2);class cj{constructor(t){const n=o=>parseInt(Math.log(o)/aj,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const ta=function(e,t,n,r){e.sort(t);const i=function(d,u){const h=u-d;let p,f;if(h===0)return null;if(h===1)return p=e[d],f=n?n(p):p,new yt(f,p.node,yt.BLACK,null,null);{const S=parseInt(h/2,10)+d,y=i(d,S),w=i(S+1,u);return p=e[S],f=n?n(p):p,new yt(f,p.node,yt.BLACK,y,w)}},o=function(d){let u=null,h=null,p=e.length;const f=function(y,w){const j=p-y,m=p;p-=y;const g=i(j+1,m),x=e[j],I=n?n(x):x;S(new yt(I,x.node,w,null,g))},S=function(y){u?(u.left=y,u=y):(h=y,u=y)};for(let y=0;y<d.count;++y){const w=d.nextBitIsOne(),j=Math.pow(2,d.count-(y+1));w?f(j,yt.BLACK):(f(j,yt.BLACK),f(j,yt.RED))}return h},l=new cj(e.length),c=o(l);return new Vt(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc;const Ii={};class qn{static get Default(){return B(Ii&&qe,"ChildrenNode.ts has not been loaded"),Dc=Dc||new qn({".priority":Ii},{".priority":qe}),Dc}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=os(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Vt?n:null}hasIndex(t){return Bn(this.indexSet_,t.toString())}addIndex(t,n){B(t!==Xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(me.Wrap);let l=o.getNext();for(;l;)i=i||t.isDefinedOn(l.node),r.push(l),l=o.getNext();let c;i?c=ta(r,t.getCompare()):c=Ii;const d=t.toString(),u={...this.indexSet_};u[d]=t;const h={...this.indexes_};return h[d]=c,new qn(h,u)}addToIndexes(t,n){const r=Jl(this.indexes_,(i,o)=>{const l=os(this.indexSet_,o);if(B(l,"Missing index implementation for "+o),i===Ii)if(l.isDefinedOn(t.node)){const c=[],d=n.getIterator(me.Wrap);let u=d.getNext();for(;u;)u.name!==t.name&&c.push(u),u=d.getNext();return c.push(t),ta(c,l.getCompare())}else return Ii;else{const c=n.get(t.name);let d=i;return c&&(d=d.remove(new me(t.name,c))),d.insert(t,t.node)}});return new qn(r,this.indexSet_)}removeFromIndexes(t,n){const r=Jl(this.indexes_,i=>{if(i===Ii)return i;{const o=n.get(t.name);return o?i.remove(new me(t.name,o)):i}});return new qn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ps;class oe{static get EMPTY_NODE(){return Ps||(Ps=new oe(new Vt(of),null,qn.Default))}constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ix(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ps}updatePriority(t){return this.children_.isEmpty()?this:new oe(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Ps:n}}getChild(t){const n=ge(t);return n===null?this:this.getImmediateChild(n).getChild(Fe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(B(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new me(t,n);let i,o;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));const l=i.isEmpty()?Ps:this.priorityNode_;return new oe(i,l,o)}}updateChild(t,n){const r=ge(t);if(r===null)return n;{B(ge(t)!==".priority"||Pr(t)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Fe(t),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,o=!0;if(this.forEachChild(qe,(l,c)=>{n[l]=c.val(t),r++,o&&oe.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):o=!1}),!t&&o&&i<2*r){const l=[];for(const c in n)l[c]=n[c];return l}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+rx(this.getPriority().val())+":"),this.forEachChild(qe,(n,r)=>{const i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":Ny(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const i=this.resolveIndex_(r);if(i){const o=i.getPredecessorKey(new me(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new me(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new me(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,i=>i);{const i=this.children_.getIteratorFrom(t.name,me.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,i=>i);{const i=this.children_.getReverseIteratorFrom(t.name,me.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)>0;)i.getNext(),o=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Wo?-1:0}withIndex(t){if(t===Xi||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new oe(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Xi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(qe),i=n.getIterator(qe);let o=r.getNext(),l=i.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=i.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(t){return t===Xi?null:this.indexMap_.get(t.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class dj extends oe{constructor(){super(new Vt(of),oe.EMPTY_NODE,qn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return oe.EMPTY_NODE}isEmpty(){return!1}}const Wo=new dj;Object.defineProperties(me,{MIN:{value:new me(ls,oe.EMPTY_NODE)},MAX:{value:new me(ui,Wo)}});nx.__EMPTY_NODE=oe.EMPTY_NODE;gt.__childrenNodeConstructor=oe;ij(Wo);oj(Wo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=!0;function ut(e,t=null){if(e===null)return oe.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),B(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new gt(n,ut(t))}if(!(e instanceof Array)&&uj){const n=[];let r=!1;if(kt(e,(l,c)=>{if(l.substring(0,1)!=="."){const d=ut(c);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),n.push(new me(l,d)))}}),n.length===0)return oe.EMPTY_NODE;const o=ta(n,rj,l=>l.name,of);if(r){const l=ta(n,qe.getCompare());return new oe(o,ut(t),new qn({".priority":l},{".priority":qe}))}else return new oe(o,ut(t),qn.Default)}else{let n=oe.EMPTY_NODE;return kt(e,(r,i)=>{if(Bn(e,r)&&r.substring(0,1)!=="."){const o=ut(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ut(t))}}sj(ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj extends Na{constructor(t){super(),this.indexPath_=t,B(!xe(t)&&ge(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?vi(t.name,n.name):o}makePost(t,n){const r=ut(t),i=oe.EMPTY_NODE.updateChild(this.indexPath_,r);return new me(n,i)}maxPost(){const t=oe.EMPTY_NODE.updateChild(this.indexPath_,Wo);return new me(ui,t)}toString(){return ko(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj extends Na{compare(t,n){const r=t.node.compareTo(n.node);return r===0?vi(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(t,n){const r=ut(t);return new me(n,r)}toString(){return".value"}}const pj=new hj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(e){return{type:"value",snapshotNode:e}}function as(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function bo(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Io(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function gj(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t){this.index_=t}updateChild(t,n,r,i,o,l){B(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?t.hasChild(n)?l.trackChildChange(bo(n,c)):B(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(as(n,r)):l.trackChildChange(Io(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(qe,(i,o)=>{n.hasChild(i)||r.trackChildChange(bo(i,o))}),n.isLeafNode()||n.forEachChild(qe,(i,o)=>{if(t.hasChild(i)){const l=t.getImmediateChild(i);l.equals(o)||r.trackChildChange(Io(i,o,l))}else r.trackChildChange(as(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?oe.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this.indexedFilter_=new lf(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Eo.getStartPost_(t),this.endPost_=Eo.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,l){return this.matches(new me(n,r))||(r=oe.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,l)}updateFullNode(t,n,r){n.isLeafNode()&&(n=oe.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(oe.EMPTY_NODE);const o=this;return n.forEachChild(qe,(l,c)=>{o.matches(new me(l,c))||(i=i.updateImmediateChild(l,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Eo(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,l){return this.rangedFilter_.matches(new me(n,r))||(r=oe.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,l):this.fullLimitUpdateChild_(t,n,r,o,l)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=oe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))i=i.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(oe.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let l=0;for(;o.hasNext();){const c=o.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:i=i.updateImmediateChild(c.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let l;if(this.reverse_){const p=this.index_.getCompare();l=(f,S)=>p(S,f)}else l=this.index_.getCompare();const c=t;B(c.numChildren()===this.limit_,"");const d=new me(n,r),u=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),h=this.rangedFilter_.matches(d);if(c.hasChild(n)){const p=c.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||c.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const S=f==null?1:l(f,d);if(h&&!r.isEmpty()&&S>=0)return o!=null&&o.trackChildChange(Io(n,r,p)),c.updateImmediateChild(n,r);{o!=null&&o.trackChildChange(bo(n,p));const w=c.updateImmediateChild(n,oe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o!=null&&o.trackChildChange(as(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?t:h&&l(u,d)>=0?(o!=null&&(o.trackChildChange(bo(u.name,u.node)),o.trackChildChange(as(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(u.name,oe.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ls}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ui}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qe}copy(){const t=new af;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function yj(e){return e.loadsAllData()?new lf(e.getIndex()):e.hasLimit()?new mj(e):new Eo(e)}function Ep(e){const t={};if(e.isDefault())return t;let n;if(e.index_===qe?n="$priority":e.index_===pj?n="$value":e.index_===Xi?n="$key":(B(e.index_ instanceof fj,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ft(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=ft(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+ft(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=ft(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+ft(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Tp(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==qe&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends qy{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(B(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$o("p:rest:"),this.listens_={}}listen(t,n,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const l=na.getListenId_(t,r),c={};this.listens_[l]=c;const d=Ep(t._queryParams);this.restRequest_(o+".json",d,(u,h)=>{let p=h;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(o,p,!1,r),os(this.listens_,l)===c){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(t,n){const r=na.getListenId_(t,n);delete this.listens_[r]}get(t){const n=Ep(t._queryParams),r=t._path.toString(),i=new Oo;return this.restRequest_(r+".json",n,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+B_(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=So(c.responseText)}catch{Ot("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,d)}else c.status!==401&&c.status!==404&&Ot("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(){return{value:null,children:new Map}}function ax(e,t,n){if(xe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const r=ge(t);e.children.has(r)||e.children.set(r,ra());const i=e.children.get(r);t=Fe(t),ax(i,t,n)}}function Bd(e,t,n){e.value!==null?n(t,e.value):vj(e,(r,i)=>{const o=new ze(t.toString()+"/"+r);Bd(i,o,n)})}function vj(e,t){e.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n={...t};return this.last_&&kt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=10*1e3,Sj=30*1e3,wj=5*60*1e3;class jj{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _j(t);const r=Dp+(Sj-Dp)*Math.random();Zs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;kt(t,(i,o)=>{o>0&&Bn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Zs(this.reportStats_.bind(this),Math.floor(Math.random()*2*wj))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(In||(In={}));function cf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function df(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uf(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=In.ACK_USER_WRITE,this.source=cf()}operationForChild(t){if(xe(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ze(t));return new ia(je(),n,this.revert)}}else return B(ge(this.path)===t,"operationForChild called for unrelated child."),new ia(Fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n){this.source=t,this.path=n,this.type=In.LISTEN_COMPLETE}operationForChild(t){return xe(this.path)?new To(this.source,je()):new To(this.source,Fe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=In.OVERWRITE}operationForChild(t){return xe(this.path)?new fi(this.source,je(),this.snap.getImmediateChild(t)):new fi(this.source,Fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=In.MERGE}operationForChild(t){if(xe(this.path)){const n=this.children.subtree(new ze(t));return n.isEmpty()?null:n.value?new fi(this.source,je(),n.value):new cs(this.source,je(),n)}else return B(ge(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new cs(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(xe(t))return this.isFullyInitialized()&&!this.filtered_;const n=ge(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function kj(e,t,n,r){const i=[],o=[];return t.forEach(l=>{l.type==="child_changed"&&e.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(gj(l.childName,l.snapshotNode))}),Fs(e,i,"child_removed",t,r,n),Fs(e,i,"child_added",t,r,n),Fs(e,i,"child_moved",o,r,n),Fs(e,i,"child_changed",t,r,n),Fs(e,i,"value",t,r,n),i}function Fs(e,t,n,r,i,o){const l=r.filter(c=>c.type===n);l.sort((c,d)=>Ij(e,c,d)),l.forEach(c=>{const d=bj(e,c,o);i.forEach(u=>{u.respondsTo(c.type)&&t.push(u.createEvent(d,e.query_))})})}function bj(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Ij(e,t,n){if(t.childName==null||n.childName==null)throw gs("Should only compare child_ events.");const r=new me(t.childName,t.snapshotNode),i=new me(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(e,t){return{eventCache:e,serverCache:t}}function eo(e,t,n,r){return Ma(new Fr(t,n,r),e.serverCache)}function cx(e,t,n,r){return Ma(e.eventCache,new Fr(t,n,r))}function sa(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function hi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc;const Ej=()=>(zc||(zc=new Vt(fw)),zc);class Ae{static fromObject(t){let n=new Ae(null);return kt(t,(r,i)=>{n=n.set(new ze(r),i)}),n}constructor(t,n=Ej()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:je(),value:this.value};if(xe(t))return null;{const r=ge(t),i=this.children.get(r);if(i!==null){const o=i.findRootMostMatchingPathAndValue(Fe(t),n);return o!=null?{path:Je(new ze(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(xe(t))return this;{const n=ge(t),r=this.children.get(n);return r!==null?r.subtree(Fe(t)):new Ae(null)}}set(t,n){if(xe(t))return new Ae(n,this.children);{const r=ge(t),o=(this.children.get(r)||new Ae(null)).set(Fe(t),n),l=this.children.insert(r,o);return new Ae(this.value,l)}}remove(t){if(xe(t))return this.children.isEmpty()?new Ae(null):new Ae(null,this.children);{const n=ge(t),r=this.children.get(n);if(r){const i=r.remove(Fe(t));let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new Ae(null):new Ae(this.value,o)}else return this}}get(t){if(xe(t))return this.value;{const n=ge(t),r=this.children.get(n);return r?r.get(Fe(t)):null}}setTree(t,n){if(xe(t))return n;{const r=ge(t),o=(this.children.get(r)||new Ae(null)).setTree(Fe(t),n);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new Ae(this.value,l)}}fold(t){return this.fold_(je(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Je(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,je(),n)}findOnPath_(t,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(xe(t))return null;{const o=ge(t),l=this.children.get(o);return l?l.findOnPath_(Fe(t),Je(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,je(),n)}foreachOnPath_(t,n,r){if(xe(t))return this;{this.value&&r(n,this.value);const i=ge(t),o=this.children.get(i);return o?o.foreachOnPath_(Fe(t),Je(n,i),r):new Ae(null)}}foreach(t){this.foreach_(je(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Je(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.writeTree_=t}static empty(){return new Dn(new Ae(null))}}function to(e,t,n){if(xe(t))return new Dn(new Ae(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){const i=r.path;let o=r.value;const l=At(i,t);return o=o.updateChild(l,n),new Dn(e.writeTree_.set(i,o))}else{const i=new Ae(n),o=e.writeTree_.setTree(t,i);return new Dn(o)}}}function $d(e,t,n){let r=e;return kt(n,(i,o)=>{r=to(r,Je(t,i),o)}),r}function zp(e,t){if(xe(t))return Dn.empty();{const n=e.writeTree_.setTree(t,new Ae(null));return new Dn(n)}}function Wd(e,t){return _i(e,t)!=null}function _i(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(At(n.path,t)):null}function Rp(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(qe,(r,i)=>{t.push(new me(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new me(r,i.value))}),t}function zr(e,t){if(xe(t))return e;{const n=_i(e,t);return n!=null?new Dn(new Ae(n)):new Dn(e.writeTree_.subtree(t))}}function Ud(e){return e.writeTree_.isEmpty()}function ds(e,t){return dx(je(),e.writeTree_,t)}function dx(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(B(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=dx(Je(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Je(e,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(e,t){return px(t,e)}function Tj(e,t,n,r,i){B(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=to(e.visibleWrites,t,n)),e.lastWriteId=r}function Dj(e,t,n,r){B(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=$d(e.visibleWrites,t,n),e.lastWriteId=r}function zj(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}function Rj(e,t){const n=e.allWrites.findIndex(c=>c.writeId===t);B(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,l=e.allWrites.length-1;for(;i&&l>=0;){const c=e.allWrites[l];c.visible&&(l>=n&&Nj(c,r.path)?i=!1:un(r.path,c.path)&&(o=!0)),l--}if(i){if(o)return Mj(e),!0;if(r.snap)e.visibleWrites=zp(e.visibleWrites,r.path);else{const c=r.children;kt(c,d=>{e.visibleWrites=zp(e.visibleWrites,Je(r.path,d))})}return!0}else return!1}function Nj(e,t){if(e.snap)return un(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&un(Je(e.path,n),t))return!0;return!1}function Mj(e){e.visibleWrites=ux(e.allWrites,Aj,je()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Aj(e){return e.visible}function ux(e,t,n){let r=Dn.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const l=o.path;let c;if(o.snap)un(n,l)?(c=At(n,l),r=to(r,c,o.snap)):un(l,n)&&(c=At(l,n),r=to(r,je(),o.snap.getChild(c)));else if(o.children){if(un(n,l))c=At(n,l),r=$d(r,c,o.children);else if(un(l,n))if(c=At(l,n),xe(c))r=$d(r,je(),o.children);else{const d=os(o.children,ge(c));if(d){const u=d.getChild(Fe(c));r=to(r,je(),u)}}}else throw gs("WriteRecord should have .snap or .children")}}return r}function fx(e,t,n,r,i){if(!r&&!i){const o=_i(e.visibleWrites,t);if(o!=null)return o;{const l=zr(e.visibleWrites,t);if(Ud(l))return n;if(n==null&&!Wd(l,je()))return null;{const c=n||oe.EMPTY_NODE;return ds(l,c)}}}else{const o=zr(e.visibleWrites,t);if(!i&&Ud(o))return n;if(!i&&n==null&&!Wd(o,je()))return null;{const l=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(un(u.path,t)||un(t,u.path))},c=ux(e.allWrites,l,t),d=n||oe.EMPTY_NODE;return ds(c,d)}}}function Pj(e,t,n){let r=oe.EMPTY_NODE;const i=_i(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(qe,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(n){const o=zr(e.visibleWrites,t);return n.forEachChild(qe,(l,c)=>{const d=ds(zr(o,new ze(l)),c);r=r.updateImmediateChild(l,d)}),Rp(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=zr(e.visibleWrites,t);return Rp(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function Fj(e,t,n,r,i){B(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Je(t,n);if(Wd(e.visibleWrites,o))return null;{const l=zr(e.visibleWrites,o);return Ud(l)?i.getChild(n):ds(l,i.getChild(n))}}function Oj(e,t,n,r){const i=Je(t,n),o=_i(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){const l=zr(e.visibleWrites,i);return ds(l,r.getNode().getImmediateChild(n))}else return null}function Lj(e,t){return _i(e.visibleWrites,t)}function Bj(e,t,n,r,i,o,l){let c;const d=zr(e.visibleWrites,t),u=_i(d,je());if(u!=null)c=u;else if(n!=null)c=ds(d,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const h=[],p=l.getCompare(),f=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let S=f.getNext();for(;S&&h.length<i;)p(S,r)!==0&&h.push(S),S=f.getNext();return h}else return[]}function $j(){return{visibleWrites:Dn.empty(),allWrites:[],lastWriteId:-1}}function oa(e,t,n,r){return fx(e.writeTree,e.treePath,t,n,r)}function ff(e,t){return Pj(e.writeTree,e.treePath,t)}function Np(e,t,n,r){return Fj(e.writeTree,e.treePath,t,n,r)}function la(e,t){return Lj(e.writeTree,Je(e.treePath,t))}function Wj(e,t,n,r,i,o){return Bj(e.writeTree,e.treePath,t,n,r,i,o)}function hf(e,t,n){return Oj(e.writeTree,e.treePath,t,n)}function hx(e,t){return px(Je(e.treePath,t),e.writeTree)}function px(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Io(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,bo(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,as(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Io(r,t.snapshotNode,i.oldSnap));else throw gs("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const gx=new Hj;class pf{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hf(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:hi(this.viewCache_),o=Wj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(e){return{filter:e}}function Kj(e,t){B(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),B(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Gj(e,t,n,r,i){const o=new Uj;let l,c;if(n.type===In.OVERWRITE){const u=n;u.source.fromUser?l=Hd(e,t,u.path,u.snap,r,i,o):(B(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered()&&!xe(u.path),l=aa(e,t,u.path,u.snap,r,i,c,o))}else if(n.type===In.MERGE){const u=n;u.source.fromUser?l=Qj(e,t,u.path,u.children,r,i,o):(B(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered(),l=Vd(e,t,u.path,u.children,r,i,c,o))}else if(n.type===In.ACK_USER_WRITE){const u=n;u.revert?l=qj(e,t,u.path,r,i,o):l=Xj(e,t,u.path,u.affectedTree,r,i,o)}else if(n.type===In.LISTEN_COMPLETE)l=Jj(e,t,n.path,r,o);else throw gs("Unknown operation type: "+n.type);const d=o.getChanges();return Yj(t,l,d),{viewCache:l,changes:d}}function Yj(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=sa(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(lx(sa(t)))}}function mx(e,t,n,r,i,o){const l=t.eventCache;if(la(r,n)!=null)return t;{let c,d;if(xe(n))if(B(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=hi(t),h=u instanceof oe?u:oe.EMPTY_NODE,p=ff(r,h);c=e.filter.updateFullNode(t.eventCache.getNode(),p,o)}else{const u=oa(r,hi(t));c=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const u=ge(n);if(u===".priority"){B(Pr(n)===1,"Can't have a priority with additional path components");const h=l.getNode();d=t.serverCache.getNode();const p=Np(r,n,h,d);p!=null?c=e.filter.updatePriority(h,p):c=l.getNode()}else{const h=Fe(n);let p;if(l.isCompleteForChild(u)){d=t.serverCache.getNode();const f=Np(r,n,l.getNode(),d);f!=null?p=l.getNode().getImmediateChild(u).updateChild(h,f):p=l.getNode().getImmediateChild(u)}else p=hf(r,u,t.serverCache);p!=null?c=e.filter.updateChild(l.getNode(),u,p,h,i,o):c=l.getNode()}}return eo(t,c,l.isFullyInitialized()||xe(n),e.filter.filtersNodes())}}function aa(e,t,n,r,i,o,l,c){const d=t.serverCache;let u;const h=l?e.filter:e.filter.getIndexedFilter();if(xe(n))u=h.updateFullNode(d.getNode(),r,null);else if(h.filtersNodes()&&!d.isFiltered()){const S=d.getNode().updateChild(n,r);u=h.updateFullNode(d.getNode(),S,null)}else{const S=ge(n);if(!d.isCompleteForPath(n)&&Pr(n)>1)return t;const y=Fe(n),j=d.getNode().getImmediateChild(S).updateChild(y,r);S===".priority"?u=h.updatePriority(d.getNode(),j):u=h.updateChild(d.getNode(),S,j,y,gx,null)}const p=cx(t,u,d.isFullyInitialized()||xe(n),h.filtersNodes()),f=new pf(i,p,o);return mx(e,p,n,i,f,c)}function Hd(e,t,n,r,i,o,l){const c=t.eventCache;let d,u;const h=new pf(i,t,o);if(xe(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,l),d=eo(t,u,!0,e.filter.filtersNodes());else{const p=ge(n);if(p===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),r),d=eo(t,u,c.isFullyInitialized(),c.isFiltered());else{const f=Fe(n),S=c.getNode().getImmediateChild(p);let y;if(xe(f))y=r;else{const w=h.getCompleteChild(p);w!=null?nf(f)===".priority"&&w.getChild(ex(f)).isEmpty()?y=w:y=w.updateChild(f,r):y=oe.EMPTY_NODE}if(S.equals(y))d=t;else{const w=e.filter.updateChild(c.getNode(),p,y,f,h,l);d=eo(t,w,c.isFullyInitialized(),e.filter.filtersNodes())}}}return d}function Mp(e,t){return e.eventCache.isCompleteForChild(t)}function Qj(e,t,n,r,i,o,l){let c=t;return r.foreach((d,u)=>{const h=Je(n,d);Mp(t,ge(h))&&(c=Hd(e,c,h,u,i,o,l))}),r.foreach((d,u)=>{const h=Je(n,d);Mp(t,ge(h))||(c=Hd(e,c,h,u,i,o,l))}),c}function Ap(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Vd(e,t,n,r,i,o,l,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d=t,u;xe(n)?u=r:u=new Ae(null).setTree(n,r);const h=t.serverCache.getNode();return u.children.inorderTraversal((p,f)=>{if(h.hasChild(p)){const S=t.serverCache.getNode().getImmediateChild(p),y=Ap(e,S,f);d=aa(e,d,new ze(p),y,i,o,l,c)}}),u.children.inorderTraversal((p,f)=>{const S=!t.serverCache.isCompleteForChild(p)&&f.value===null;if(!h.hasChild(p)&&!S){const y=t.serverCache.getNode().getImmediateChild(p),w=Ap(e,y,f);d=aa(e,d,new ze(p),w,i,o,l,c)}}),d}function Xj(e,t,n,r,i,o,l){if(la(i,n)!=null)return t;const c=t.serverCache.isFiltered(),d=t.serverCache;if(r.value!=null){if(xe(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return aa(e,t,n,d.getNode().getChild(n),i,o,c,l);if(xe(n)){let u=new Ae(null);return d.getNode().forEachChild(Xi,(h,p)=>{u=u.set(new ze(h),p)}),Vd(e,t,n,u,i,o,c,l)}else return t}else{let u=new Ae(null);return r.foreach((h,p)=>{const f=Je(n,h);d.isCompleteForPath(f)&&(u=u.set(h,d.getNode().getChild(f)))}),Vd(e,t,n,u,i,o,c,l)}}function Jj(e,t,n,r,i){const o=t.serverCache,l=cx(t,o.getNode(),o.isFullyInitialized()||xe(n),o.isFiltered());return mx(e,l,n,r,gx,i)}function qj(e,t,n,r,i,o){let l;if(la(r,n)!=null)return t;{const c=new pf(r,t,i),d=t.eventCache.getNode();let u;if(xe(n)||ge(n)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=oa(r,hi(t));else{const p=t.serverCache.getNode();B(p instanceof oe,"serverChildren would be complete if leaf node"),h=ff(r,p)}h=h,u=e.filter.updateFullNode(d,h,o)}else{const h=ge(n);let p=hf(r,h,t.serverCache);p==null&&t.serverCache.isCompleteForChild(h)&&(p=d.getImmediateChild(h)),p!=null?u=e.filter.updateChild(d,h,p,Fe(n),c,o):t.eventCache.getNode().hasChild(h)?u=e.filter.updateChild(d,h,oe.EMPTY_NODE,Fe(n),c,o):u=d,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=oa(r,hi(t)),l.isLeafNode()&&(u=e.filter.updateFullNode(u,l,o)))}return l=t.serverCache.isFullyInitialized()||la(r,je())!=null,eo(t,u,l,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new lf(r.getIndex()),o=yj(r);this.processor_=Vj(o);const l=n.serverCache,c=n.eventCache,d=i.updateFullNode(oe.EMPTY_NODE,l.getNode(),null),u=o.updateFullNode(oe.EMPTY_NODE,c.getNode(),null),h=new Fr(d,l.isFullyInitialized(),i.filtersNodes()),p=new Fr(u,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ma(p,h),this.eventGenerator_=new Cj(this.query_)}get query(){return this.query_}}function eC(e){return e.viewCache_.serverCache.getNode()}function tC(e){return sa(e.viewCache_)}function nC(e,t){const n=hi(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!xe(t)&&!n.getImmediateChild(ge(t)).isEmpty())?n.getChild(t):null}function Pp(e){return e.eventRegistrations_.length===0}function rC(e,t){e.eventRegistrations_.push(t)}function Fp(e,t,n){const r=[];if(n){B(t==null,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,i);l&&r.push(l)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const l=e.eventRegistrations_[o];if(!l.matches(t))i.push(l);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function Op(e,t,n,r){t.type===In.MERGE&&t.source.queryId!==null&&(B(hi(e.viewCache_),"We should always have a full cache before handling merges"),B(sa(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=Gj(e.processor_,i,t,n,r);return Kj(e.processor_,o.viewCache),B(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,yx(e,o.changes,o.viewCache.eventCache.getNode(),null)}function iC(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qe,(o,l)=>{r.push(as(o,l))}),n.isFullyInitialized()&&r.push(lx(n.getNode())),yx(e,r,n.getNode(),t)}function yx(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return kj(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca;class xx{constructor(){this.views=new Map}}function sC(e){B(!ca,"__referenceConstructor has already been defined"),ca=e}function oC(){return B(ca,"Reference.ts has not been loaded"),ca}function lC(e){return e.views.size===0}function gf(e,t,n,r){const i=t.source.queryId;if(i!==null){const o=e.views.get(i);return B(o!=null,"SyncTree gave us an op for an invalid query."),Op(o,t,n,r)}else{let o=[];for(const l of e.views.values())o=o.concat(Op(l,t,n,r));return o}}function vx(e,t,n,r,i){const o=t._queryIdentifier,l=e.views.get(o);if(!l){let c=oa(n,i?r:null),d=!1;c?d=!0:r instanceof oe?(c=ff(n,r),d=!1):(c=oe.EMPTY_NODE,d=!1);const u=Ma(new Fr(c,d,!1),new Fr(r,i,!1));return new Zj(t,u)}return l}function aC(e,t,n,r,i,o){const l=vx(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,l),rC(l,n),iC(l,n)}function cC(e,t,n,r){const i=t._queryIdentifier,o=[];let l=[];const c=Or(e);if(i==="default")for(const[d,u]of e.views.entries())l=l.concat(Fp(u,n,r)),Pp(u)&&(e.views.delete(d),u.query._queryParams.loadsAllData()||o.push(u.query));else{const d=e.views.get(i);d&&(l=l.concat(Fp(d,n,r)),Pp(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||o.push(d.query)))}return c&&!Or(e)&&o.push(new(oC())(t._repo,t._path)),{removed:o,events:l}}function _x(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Rr(e,t){let n=null;for(const r of e.views.values())n=n||nC(r,t);return n}function Sx(e,t){if(t._queryParams.loadsAllData())return Pa(e);{const r=t._queryIdentifier;return e.views.get(r)}}function wx(e,t){return Sx(e,t)!=null}function Or(e){return Pa(e)!=null}function Pa(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da;function dC(e){B(!da,"__referenceConstructor has already been defined"),da=e}function uC(){return B(da,"Reference.ts has not been loaded"),da}let fC=1;class Lp{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ae(null),this.pendingWriteTree_=$j(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jx(e,t,n,r,i){return Tj(e.pendingWriteTree_,t,n,r,i),i?ys(e,new fi(cf(),t,n)):[]}function hC(e,t,n,r){Dj(e.pendingWriteTree_,t,n,r);const i=Ae.fromObject(n);return ys(e,new cs(cf(),t,i))}function _r(e,t,n=!1){const r=zj(e.pendingWriteTree_,t);if(Rj(e.pendingWriteTree_,t)){let o=new Ae(null);return r.snap!=null?o=o.set(je(),!0):kt(r.children,l=>{o=o.set(new ze(l),!0)}),ys(e,new ia(r.path,o,n))}else return[]}function Uo(e,t,n){return ys(e,new fi(df(),t,n))}function pC(e,t,n){const r=Ae.fromObject(n);return ys(e,new cs(df(),t,r))}function gC(e,t){return ys(e,new To(df(),t))}function mC(e,t,n){const r=yf(e,n);if(r){const i=xf(r),o=i.path,l=i.queryId,c=At(o,t),d=new To(uf(l),c);return vf(e,o,d)}else return[]}function ua(e,t,n,r,i=!1){const o=t._path,l=e.syncPointTree_.get(o);let c=[];if(l&&(t._queryIdentifier==="default"||wx(l,t))){const d=cC(l,t,n,r);lC(l)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const u=d.removed;if(c=d.events,!i){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,p=e.syncPointTree_.findOnPath(o,(f,S)=>Or(S));if(h&&!p){const f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){const S=vC(f);for(let y=0;y<S.length;++y){const w=S[y],j=w.query,m=Ix(e,w);e.listenProvider_.startListening(no(j),Do(e,j),m.hashFn,m.onComplete)}}}!p&&u.length>0&&!r&&(h?e.listenProvider_.stopListening(no(t),null):u.forEach(f=>{const S=e.queryToTagMap.get(Fa(f));e.listenProvider_.stopListening(no(f),S)}))}_C(e,u)}return c}function Cx(e,t,n,r){const i=yf(e,r);if(i!=null){const o=xf(i),l=o.path,c=o.queryId,d=At(l,t),u=new fi(uf(c),d,n);return vf(e,l,u)}else return[]}function yC(e,t,n,r){const i=yf(e,r);if(i){const o=xf(i),l=o.path,c=o.queryId,d=At(l,t),u=Ae.fromObject(n),h=new cs(uf(c),d,u);return vf(e,l,h)}else return[]}function Kd(e,t,n,r=!1){const i=t._path;let o=null,l=!1;e.syncPointTree_.foreachOnPath(i,(f,S)=>{const y=At(f,i);o=o||Rr(S,y),l=l||Or(S)});let c=e.syncPointTree_.get(i);c?(l=l||Or(c),o=o||Rr(c,je())):(c=new xx,e.syncPointTree_=e.syncPointTree_.set(i,c));let d;o!=null?d=!0:(d=!1,o=oe.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((S,y)=>{const w=Rr(y,je());w&&(o=o.updateImmediateChild(S,w))}));const u=wx(c,t);if(!u&&!t._queryParams.loadsAllData()){const f=Fa(t);B(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const S=SC();e.queryToTagMap.set(f,S),e.tagToQueryMap.set(S,f)}const h=Aa(e.pendingWriteTree_,i);let p=aC(c,t,n,h,o,d);if(!u&&!l&&!r){const f=Sx(c,t);p=p.concat(wC(e,t,f))}return p}function mf(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(l,c)=>{const d=At(l,t),u=Rr(c,d);if(u)return u});return fx(i,t,o,n,!0)}function xC(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(u,h)=>{const p=At(u,n);r=r||Rr(h,p)});let i=e.syncPointTree_.get(n);i?r=r||Rr(i,je()):(i=new xx,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=r!=null,l=o?new Fr(r,!0,!1):null,c=Aa(e.pendingWriteTree_,t._path),d=vx(i,t,c,o?l.getNode():oe.EMPTY_NODE,o);return tC(d)}function ys(e,t){return kx(t,e.syncPointTree_,null,Aa(e.pendingWriteTree_,je()))}function kx(e,t,n,r){if(xe(e.path))return bx(e,t,n,r);{const i=t.get(je());n==null&&i!=null&&(n=Rr(i,je()));let o=[];const l=ge(e.path),c=e.operationForChild(l),d=t.children.get(l);if(d&&c){const u=n?n.getImmediateChild(l):null,h=hx(r,l);o=o.concat(kx(c,d,u,h))}return i&&(o=o.concat(gf(i,e,r,n))),o}}function bx(e,t,n,r){const i=t.get(je());n==null&&i!=null&&(n=Rr(i,je()));let o=[];return t.children.inorderTraversal((l,c)=>{const d=n?n.getImmediateChild(l):null,u=hx(r,l),h=e.operationForChild(l);h&&(o=o.concat(bx(h,c,d,u)))}),i&&(o=o.concat(gf(i,e,r,n))),o}function Ix(e,t){const n=t.query,r=Do(e,n);return{hashFn:()=>(eC(t)||oe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?mC(e,n._path,r):gC(e,n._path);{const o=gw(i,n);return ua(e,n,null,o)}}}}function Do(e,t){const n=Fa(t);return e.queryToTagMap.get(n)}function Fa(e){return e._path.toString()+"$"+e._queryIdentifier}function yf(e,t){return e.tagToQueryMap.get(t)}function xf(e){const t=e.indexOf("$");return B(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ze(e.substr(0,t))}}function vf(e,t,n){const r=e.syncPointTree_.get(t);B(r,"Missing sync point for query tag that we're tracking");const i=Aa(e.pendingWriteTree_,t);return gf(r,n,i,null)}function vC(e){return e.fold((t,n,r)=>{if(n&&Or(n))return[Pa(n)];{let i=[];return n&&(i=_x(n)),kt(r,(o,l)=>{i=i.concat(l)}),i}})}function no(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(uC())(e._repo,e._path):e}function _C(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=Fa(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function SC(){return fC++}function wC(e,t,n){const r=t._path,i=Do(e,t),o=Ix(e,n),l=e.listenProvider_.startListening(no(t),i,o.hashFn,o.onComplete),c=e.syncPointTree_.subtree(r);if(i)B(!Or(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((u,h,p)=>{if(!xe(u)&&h&&Or(h))return[Pa(h).query];{let f=[];return h&&(f=f.concat(_x(h).map(S=>S.query))),kt(p,(S,y)=>{f=f.concat(y)}),f}});for(let u=0;u<d.length;++u){const h=d[u];e.listenProvider_.stopListening(no(h),Do(e,h))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new _f(n)}node(){return this.node_}}class Sf{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Je(this.path_,t);return new Sf(this.syncTree_,n)}node(){return mf(this.syncTree_,this.path_)}}const jC=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Bp=function(e,t,n){if(!e||typeof e!="object")return e;if(B(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return CC(e[".sv"],t,n);if(typeof e[".sv"]=="object")return kC(e[".sv"],t);B(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},CC=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+e)}},kC=function(e,t,n){e.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const i=t.node();if(B(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return typeof l!="number"?r:l+r},Ex=function(e,t,n,r){return wf(t,new Sf(n,e),r)},Tx=function(e,t,n){return wf(e,new _f(t),n)};function wf(e,t,n){const r=e.getPriority().val(),i=Bp(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const l=e,c=Bp(l.getValue(),t,n);return c!==l.getValue()||i!==l.getPriority().val()?new gt(c,ut(i)):e}else{const l=e;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new gt(i))),l.forEachChild(qe,(c,d)=>{const u=wf(d,t.getImmediateChild(c),n);u!==d&&(o=o.updateImmediateChild(c,u))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function Cf(e,t){let n=t instanceof ze?t:new ze(t),r=e,i=ge(n);for(;i!==null;){const o=os(r.node.children,i)||{children:{},childCount:0};r=new jf(i,r,o),n=Fe(n),i=ge(n)}return r}function xs(e){return e.node.value}function Dx(e,t){e.node.value=t,Gd(e)}function zx(e){return e.node.childCount>0}function bC(e){return xs(e)===void 0&&!zx(e)}function Oa(e,t){kt(e.node.children,(n,r)=>{t(new jf(n,e,r))})}function Rx(e,t,n,r){n&&t(e),Oa(e,i=>{Rx(i,t,!0)})}function IC(e,t,n){let r=e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Ho(e){return new ze(e.parent===null?e.name:Ho(e.parent)+"/"+e.name)}function Gd(e){e.parent!==null&&EC(e.parent,e.name,e)}function EC(e,t,n){const r=bC(n),i=Bn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Gd(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Gd(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/[\[\].#$\/\u0000-\u001F\u007F]/,DC=/[\[\].#$\u0000-\u001F\u007F]/,Rc=10*1024*1024,kf=function(e){return typeof e=="string"&&e.length!==0&&!TC.test(e)},Nx=function(e){return typeof e=="string"&&e.length!==0&&!DC.test(e)},zC=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Nx(e)},RC=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ju(e)||e&&typeof e=="object"&&Bn(e,".sv")},Mx=function(e,t,n,r){r&&t===void 0||La(za(e,"value"),t,n)},La=function(e,t,n){const r=n instanceof ze?new Qw(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Jr(r));if(typeof t=="function")throw new Error(e+"contains a function "+Jr(r)+" with contents = "+t.toString());if(Ju(t))throw new Error(e+"contains "+t.toString()+" "+Jr(r));if(typeof t=="string"&&t.length>Rc/3&&Ra(t)>Rc)throw new Error(e+"contains a string greater than "+Rc+" utf8 bytes "+Jr(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(kt(t,(l,c)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!kf(l)))throw new Error(e+" contains an invalid key ("+l+") "+Jr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xw(r,l),La(e,c,r),Jw(r)}),i&&o)throw new Error(e+' contains ".value" child '+Jr(r)+" in addition to actual children.")}},NC=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const o=ko(r);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!kf(o[l]))throw new Error(e+"contains an invalid key ("+o[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Yw);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&un(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},MC=function(e,t,n,r){const i=za(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];kt(t,(l,c)=>{const d=new ze(l);if(La(i,c,Je(n,d)),nf(d)===".priority"&&!RC(c))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(d)}),NC(i,o)},Ax=function(e,t,n,r){if(!Nx(n))throw new Error(za(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},AC=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ax(e,t,n)},bf=function(e,t){if(ge(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},PC=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!kf(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zC(n))throw new Error(za(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ba(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();n!==null&&!rf(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Px(e,t,n){Ba(e,n),Fx(e,r=>rf(r,t))}function gn(e,t,n){Ba(e,n),Fx(e,r=>un(r,t)||un(t,r))}function Fx(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){const o=i.path;t(o)?(OC(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function OC(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const r=n.getEventRunner();qs&&wt("event: "+n.toString()),ms(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="repo_interrupt",BC=25;class $C{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ra(),this.transactionQueueTree_=new jf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WC(e,t,n){if(e.stats_=ef(e.repoInfo_),e.forceRestClient_||vw())e.server_=new na(e.repoInfo_,(r,i,o,l)=>{$p(e,r,i,o,l)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Wp(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ft(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new er(e.repoInfo_,t,(r,i,o,l)=>{$p(e,r,i,o,l)},r=>{Wp(e,r)},r=>{UC(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=Cw(e.repoInfo_,()=>new jj(e.stats_,e.server_)),e.infoData_=new xj,e.infoSyncTree_=new Lp({startListening:(r,i,o,l)=>{let c=[];const d=e.infoData_.getNode(r._path);return d.isEmpty()||(c=Uo(e.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),If(e,"connected",!1),e.serverSyncTree_=new Lp({startListening:(r,i,o,l)=>(e.server_.listen(r,o,i,(c,d)=>{const u=l(c,d);gn(e.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function Ox(e){const n=e.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function $a(e){return jC({timestamp:Ox(e)})}function $p(e,t,n,r,i){e.dataUpdateCount++;const o=new ze(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let l=[];if(i)if(r){const d=Jl(n,u=>ut(u));l=yC(e.serverSyncTree_,o,d,i)}else{const d=ut(n);l=Cx(e.serverSyncTree_,o,d,i)}else if(r){const d=Jl(n,u=>ut(u));l=pC(e.serverSyncTree_,o,d)}else{const d=ut(n);l=Uo(e.serverSyncTree_,o,d)}let c=o;l.length>0&&(c=us(e,o)),gn(e.eventQueue_,c,l)}function Wp(e,t){If(e,"connected",t),t===!1&&GC(e)}function UC(e,t){kt(t,(n,r)=>{If(e,n,r)})}function If(e,t,n){const r=new ze("/.info/"+t),i=ut(n);e.infoData_.updateSnapshot(r,i);const o=Uo(e.infoSyncTree_,r,i);gn(e.eventQueue_,r,o)}function Ef(e){return e.nextWriteId_++}function HC(e,t,n){const r=xC(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{const o=ut(i).withIndex(t._queryParams.getIndex());Kd(e.serverSyncTree_,t,n,!0);let l;if(t._queryParams.loadsAllData())l=Uo(e.serverSyncTree_,t._path,o);else{const c=Do(e.serverSyncTree_,t);l=Cx(e.serverSyncTree_,t._path,o,c)}return gn(e.eventQueue_,t._path,l),ua(e.serverSyncTree_,t,n,null,!0),o},i=>(Vo(e,"get for query "+ft(t)+" failed: "+i),Promise.reject(new Error(i))))}function VC(e,t,n,r,i){Vo(e,"set",{path:t.toString(),value:n,priority:r});const o=$a(e),l=ut(n,r),c=mf(e.serverSyncTree_,t),d=Tx(l,c,o),u=Ef(e),h=jx(e.serverSyncTree_,t,d,u,!0);Ba(e.eventQueue_,h),e.server_.put(t.toString(),l.val(!0),(f,S)=>{const y=f==="ok";y||Ot("set at "+t+" failed: "+f);const w=_r(e.serverSyncTree_,u,!y);gn(e.eventQueue_,t,w),Yd(e,i,f,S)});const p=Df(e,t);us(e,p),gn(e.eventQueue_,p,[])}function KC(e,t,n,r){Vo(e,"update",{path:t.toString(),value:n});let i=!0;const o=$a(e),l={};if(kt(n,(c,d)=>{i=!1,l[c]=Ex(Je(t,c),ut(d),e.serverSyncTree_,o)}),i)wt("update() called with empty data.  Don't do anything."),Yd(e,r,"ok",void 0);else{const c=Ef(e),d=hC(e.serverSyncTree_,t,l,c);Ba(e.eventQueue_,d),e.server_.merge(t.toString(),n,(u,h)=>{const p=u==="ok";p||Ot("update at "+t+" failed: "+u);const f=_r(e.serverSyncTree_,c,!p),S=f.length>0?us(e,t):t;gn(e.eventQueue_,S,f),Yd(e,r,u,h)}),kt(n,u=>{const h=Df(e,Je(t,u));us(e,h)}),gn(e.eventQueue_,t,[])}}function GC(e){Vo(e,"onDisconnectEvents");const t=$a(e),n=ra();Bd(e.onDisconnect_,je(),(i,o)=>{const l=Ex(i,o,e.serverSyncTree_,t);ax(n,i,l)});let r=[];Bd(n,je(),(i,o)=>{r=r.concat(Uo(e.serverSyncTree_,i,o));const l=Df(e,i);us(e,l)}),e.onDisconnect_=ra(),gn(e.eventQueue_,je(),r)}function YC(e,t,n){let r;ge(t._path)===".info"?r=Kd(e.infoSyncTree_,t,n):r=Kd(e.serverSyncTree_,t,n),Px(e.eventQueue_,t._path,r)}function Up(e,t,n){let r;ge(t._path)===".info"?r=ua(e.infoSyncTree_,t,n):r=ua(e.serverSyncTree_,t,n),Px(e.eventQueue_,t._path,r)}function QC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(LC)}function Vo(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),wt(n,...t)}function Yd(e,t,n,r){t&&ms(()=>{if(n==="ok")t(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,t(l)}})}function Lx(e,t,n){return mf(e.serverSyncTree_,t,n)||oe.EMPTY_NODE}function Tf(e,t=e.transactionQueueTree_){if(t||Wa(e,t),xs(t)){const n=$x(e,t);B(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&XC(e,Ho(t),n)}else zx(t)&&Oa(t,n=>{Tf(e,n)})}function XC(e,t,n){const r=n.map(u=>u.currentWriteId),i=Lx(e,t,r);let o=i;const l=i.hash();for(let u=0;u<n.length;u++){const h=n[u];B(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=At(t,h.path);o=o.updateChild(p,h.currentOutputSnapshotRaw)}const c=o.val(!0),d=t;e.server_.put(d.toString(),c,u=>{Vo(e,"transaction put response",{path:d.toString(),status:u});let h=[];if(u==="ok"){const p=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(_r(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&p.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Wa(e,Cf(e.transactionQueueTree_,t)),Tf(e,e.transactionQueueTree_),gn(e.eventQueue_,t,h);for(let f=0;f<p.length;f++)ms(p[f])}else{if(u==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Ot("transaction at "+d.toString()+" failed: "+u);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=u}us(e,t)}},l)}function us(e,t){const n=Bx(e,t),r=Ho(n),i=$x(e,n);return JC(e,i,r),r}function JC(e,t,n){if(t.length===0)return;const r=[];let i=[];const l=t.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){const d=t[c],u=At(n,d.path);let h=!1,p;if(B(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)h=!0,p=d.abortReason,i=i.concat(_r(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=BC)h=!0,p="maxretry",i=i.concat(_r(e.serverSyncTree_,d.currentWriteId,!0));else{const f=Lx(e,d.path,l);d.currentInputSnapshot=f;const S=t[c].update(f.val());if(S!==void 0){La("transaction failed: Data returned ",S,d.path);let y=ut(S);typeof S=="object"&&S!=null&&Bn(S,".priority")||(y=y.updatePriority(f.getPriority()));const j=d.currentWriteId,m=$a(e),g=Tx(y,f,m);d.currentOutputSnapshotRaw=y,d.currentOutputSnapshotResolved=g,d.currentWriteId=Ef(e),l.splice(l.indexOf(j),1),i=i.concat(jx(e.serverSyncTree_,d.path,g,d.currentWriteId,d.applyLocally)),i=i.concat(_r(e.serverSyncTree_,j,!0))}else h=!0,p="nodata",i=i.concat(_r(e.serverSyncTree_,d.currentWriteId,!0))}gn(e.eventQueue_,n,i),i=[],h&&(t[c].status=2,function(f){setTimeout(f,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&(p==="nodata"?r.push(()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot)):r.push(()=>t[c].onComplete(new Error(p),!1,null))))}Wa(e,e.transactionQueueTree_);for(let c=0;c<r.length;c++)ms(r[c]);Tf(e,e.transactionQueueTree_)}function Bx(e,t){let n,r=e.transactionQueueTree_;for(n=ge(t);n!==null&&xs(r)===void 0;)r=Cf(r,n),t=Fe(t),n=ge(t);return r}function $x(e,t){const n=[];return Wx(e,t,n),n.sort((r,i)=>r.order-i.order),n}function Wx(e,t,n){const r=xs(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Oa(t,i=>{Wx(e,i,n)})}function Wa(e,t){const n=xs(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Dx(t,n.length>0?n:void 0)}Oa(t,r=>{Wa(e,r)})}function Df(e,t){const n=Ho(Bx(e,t)),r=Cf(e.transactionQueueTree_,t);return IC(r,i=>{Nc(e,i)}),Nc(e,r),Rx(r,i=>{Nc(e,i)}),n}function Nc(e,t){const n=xs(t);if(n){const r=[];let i=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(B(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(B(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),i=i.concat(_r(e.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&r.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Dx(t,void 0):n.length=o+1,gn(e.eventQueue_,Ho(t),i);for(let l=0;l<r.length;l++)ms(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function ZC(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ot(`Invalid query segment '${n}' in query '${e}'`)}return t}const Hp=function(e,t){const n=ek(e),r=n.namespace;n.domain==="firebase.com"&&lr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Vy(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ze(n.pathString)}},ek=function(e){let t="",n="",r="",i="",o="",l=!0,c="https",d=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(c=e.substring(0,u-1),e=e.substring(u+2));let h=e.indexOf("/");h===-1&&(h=e.length);let p=e.indexOf("?");p===-1&&(p=e.length),t=e.substring(0,Math.min(h,p)),h<p&&(i=qC(e.substring(h,p)));const f=ZC(e.substring(Math.min(e.length,p)));u=t.indexOf(":"),u>=0?(l=c==="https"||c==="wss",d=parseInt(t.substring(u+1),10)):u=t.length;const S=t.slice(0,u);if(S.toLowerCase()==="localhost")n="localhost";else if(S.split(".").length<=2)n=S;else{const y=t.indexOf(".");r=t.substring(0,y).toLowerCase(),n=t.substring(y+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:d,domain:n,subdomain:r,secure:l,scheme:c,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tk=function(){let e=0;const t=[];return function(n){const r=n===e;e=n;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Vp.charAt(n%64),n=Math.floor(n/64);B(n===0,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)l+=Vp.charAt(t[i]);return B(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ft(this.snapshot.exportVal())}}class rk{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return xe(this._path)?null:nf(this._path)}get ref(){return new cr(this._repo,this._path)}get _queryIdentifier(){const t=Tp(this._queryParams),n=qu(t);return n==="{}"?"default":n}get _queryObject(){return Tp(this._queryParams)}isEqual(t){if(t=$n(t),!(t instanceof zf))return!1;const n=this._repo===t._repo,r=rf(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Gw(this._path)}}class cr extends zf{constructor(t,n){super(t,n,new af,!1)}get parent(){const t=ex(this._path);return t===null?null:new cr(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class zo{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new ze(t),r=Ro(this.ref,t);return new zo(this._node.getChild(n),r,qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new zo(i,Ro(this.ref,r),qe)))}hasChild(t){const n=new ze(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Kr(e,t){return e=$n(e),e._checkNotDeleted("ref"),t!==void 0?Ro(e._root,t):e._root}function Ro(e,t){return e=$n(e),ge(e._path)===null?AC("child","path",t):Ax("child","path",t),new cr(e._repo,Je(e._path,t))}function ik(e,t){e=$n(e),bf("push",e._path),Mx("push",t,e._path,!0);const n=Ox(e._repo),r=tk(n),i=Ro(e,r),o=Ro(e,r);let l;return l=Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}function sk(e){return bf("remove",e._path),Qd(e,null)}function Qd(e,t){e=$n(e),bf("set",e._path),Mx("set",t,e._path,!1);const n=new Oo;return VC(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function ok(e,t){MC("update",t,e._path);const n=new Oo;return KC(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Kp(e){e=$n(e);const t=new Ux(()=>{}),n=new Ua(t);return HC(e._repo,e,n).then(r=>new zo(r,new cr(e._repo,e._path),e._queryParams.getIndex()))}class Ua{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new nk("value",this,new zo(t.snapshotNode,new cr(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new rk(this,t,n):null}matches(t){return t instanceof Ua?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function lk(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){const d=n,u=(h,p)=>{Up(e._repo,e,c),d(h,p)};u.userCallback=n.userCallback,u.context=n.context,n=u}const l=new Ux(n,o||void 0),c=new Ua(l);return YC(e._repo,e,c),()=>Up(e._repo,e,c)}function ak(e,t,n,r){return lk(e,"value",t,n,r)}sC(cr);dC(cr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="FIREBASE_DATABASE_EMULATOR_HOST",Xd={};let dk=!1;function uk(e,t,n,r){const i=t.lastIndexOf(":"),o=t.substring(0,i),l=Yu(o);e.repoInfo_=new Vy(t,l,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function fk(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wt("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let l=Hp(o,i),c=l.repoInfo,d;typeof process<"u"&&up&&(d=up[ck]),d?(o=`http://${d}?ns=${c.namespace}`,l=Hp(o,i),c=l.repoInfo):l.repoInfo.secure;const u=new Sw(e.name,e.options,t);PC("Invalid Firebase Database URL",l),xe(l.path)||lr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=pk(c,e,u,new _w(e,n));return new gk(h,e)}function hk(e,t){const n=Xd[t];(!n||n[e.key]!==e)&&lr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),QC(e),delete n[e.key]}function pk(e,t,n,r){let i=Xd[t.name];i||(i={},Xd[t.name]=i);let o=i[e.toURLString()];return o&&lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new $C(e,dk,n,r),i[e.toURLString()]=o,o}class gk{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cr(this._repo,je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&lr("Cannot call "+t+" on a deleted database.")}}function mk(e=Ey(),t){const n=Lo(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=C_("database");r&&yk(n,...r)}return n}function yk(e,t,n,r={}){e=$n(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&wo(r,o.repoInfo_.emulatorOptions))return;lr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new kl(kl.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:b_(r.mockUserToken,e.app.options.projectId);l=new kl(c)}Yu(t)&&(k_(t),T_("Database",!0)),uk(o,i,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(e){iw(VS),Ar(new sr("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return fk(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Ln(fp,hp,e),Ln(fp,hp,"esm2020")}er.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};er.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};xk();const Hx="@firebase/installations",Rf="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=1e4,Kx=`w:${Rf}`,Gx="FIS_v2",vk="https://firebaseinstallations.googleapis.com/v1",_k=60*60*1e3,Sk="installations",wk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},pi=new Da(Sk,wk,jk);function Yx(e){return e instanceof xi&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx({projectId:e}){return`${vk}/projects/${e}/installations`}function Xx(e){return{token:e.token,requestStatus:2,expiresIn:kk(e.expiresIn),creationTime:Date.now()}}async function Jx(e,t){const r=(await t.json()).error;return pi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function qx({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Ck(e,{refreshToken:t}){const n=qx(e);return n.append("Authorization",bk(t)),n}async function Zx(e){const t=await e();return t.status>=500&&t.status<600?e():t}function kk(e){return Number(e.replace("s","000"))}function bk(e){return`${Gx} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Qx(e),i=qx(e),o=t.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const l={fid:n,authVersion:Gx,appId:e.appId,sdkVersion:Kx},c={method:"POST",headers:i,body:JSON.stringify(l)},d=await Zx(()=>fetch(r,c));if(d.ok){const u=await d.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Xx(u.authToken)}}else throw await Jx("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^[cdef][\w-]{21}$/,Jd="";function Dk(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=zk(e);return Tk.test(n)?n:Jd}catch{return Jd}}function zk(e){return Ek(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new Map;function n1(e,t){const n=Ha(e);r1(n,t),Rk(n,t)}function r1(e,t){const n=t1.get(e);if(n)for(const r of n)r(t)}function Rk(e,t){const n=Nk();n&&n.postMessage({key:e,fid:t}),Mk()}let ri=null;function Nk(){return!ri&&"BroadcastChannel"in self&&(ri=new BroadcastChannel("[Firebase] FID Change"),ri.onmessage=e=>{r1(e.data.key,e.data.fid)}),ri}function Mk(){t1.size===0&&ri&&(ri.close(),ri=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="firebase-installations-database",Pk=1,gi="firebase-installations-store";let Mc=null;function Nf(){return Mc||(Mc=by(Ak,Pk,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(gi)}}})),Mc}async function fa(e,t){const n=Ha(e),i=(await Nf()).transaction(gi,"readwrite"),o=i.objectStore(gi),l=await o.get(n);return await o.put(t,n),await i.done,(!l||l.fid!==t.fid)&&n1(e,t.fid),t}async function i1(e){const t=Ha(e),r=(await Nf()).transaction(gi,"readwrite");await r.objectStore(gi).delete(t),await r.done}async function Va(e,t){const n=Ha(e),i=(await Nf()).transaction(gi,"readwrite"),o=i.objectStore(gi),l=await o.get(n),c=t(l);return c===void 0?await o.delete(n):await o.put(c,n),await i.done,c&&(!l||l.fid!==c.fid)&&n1(e,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(e){let t;const n=await Va(e.appConfig,r=>{const i=Fk(r),o=Ok(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===Jd?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function Fk(e){const t=e||{fid:Dk(),registrationStatus:0};return s1(t)}function Ok(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(pi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=Lk(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Bk(e)}:{installationEntry:t}}async function Lk(e,t){try{const n=await Ik(e,t);return fa(e.appConfig,n)}catch(n){throw Yx(n)&&n.customData.serverCode===409?await i1(e.appConfig):await fa(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function Bk(e){let t=await Gp(e.appConfig);for(;t.registrationStatus===1;)await e1(100),t=await Gp(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Mf(e);return r||n}return t}function Gp(e){return Va(e,t=>{if(!t)throw pi.create("installation-not-found");return s1(t)})}function s1(e){return $k(e)?{fid:e.fid,registrationStatus:0}:e}function $k(e){return e.registrationStatus===1&&e.registrationTime+Vx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk({appConfig:e,heartbeatServiceProvider:t},n){const r=Uk(e,n),i=Ck(e,n),o=t.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const l={installation:{sdkVersion:Kx,appId:e.appId}},c={method:"POST",headers:i,body:JSON.stringify(l)},d=await Zx(()=>fetch(r,c));if(d.ok){const u=await d.json();return Xx(u)}else throw await Jx("Generate Auth Token",d)}function Uk(e,{fid:t}){return`${Qx(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Af(e,t=!1){let n;const r=await Va(e.appConfig,o=>{if(!o1(o))throw pi.create("not-registered");const l=o.authToken;if(!t&&Kk(l))return o;if(l.requestStatus===1)return n=Hk(e,t),o;{if(!navigator.onLine)throw pi.create("app-offline");const c=Yk(o);return n=Vk(e,c),c}});return n?await n:r.authToken}async function Hk(e,t){let n=await Yp(e.appConfig);for(;n.authToken.requestStatus===1;)await e1(100),n=await Yp(e.appConfig);const r=n.authToken;return r.requestStatus===0?Af(e,t):r}function Yp(e){return Va(e,t=>{if(!o1(t))throw pi.create("not-registered");const n=t.authToken;return Qk(n)?{...t,authToken:{requestStatus:0}}:t})}async function Vk(e,t){try{const n=await Wk(e,t),r={...t,authToken:n};return await fa(e.appConfig,r),n}catch(n){if(Yx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await i1(e.appConfig);else{const r={...t,authToken:{requestStatus:0}};await fa(e.appConfig,r)}throw n}}function o1(e){return e!==void 0&&e.registrationStatus===2}function Kk(e){return e.requestStatus===2&&!Gk(e)}function Gk(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+_k}function Yk(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function Qk(e){return e.requestStatus===1&&e.requestTime+Vx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(e){const t=e,{installationEntry:n,registrationPromise:r}=await Mf(t);return r?r.catch(console.error):Af(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(e,t=!1){const n=e;return await qk(n),(await Af(n,t)).token}async function qk(e){const{registrationPromise:t}=await Mf(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(e){if(!e||!e.options)throw Ac("App Configuration");if(!e.name)throw Ac("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ac(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Ac(e){return pi.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="installations",eb="installations-internal",tb=e=>{const t=e.getProvider("app").getImmediate(),n=Zk(t),r=Lo(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},nb=e=>{const t=e.getProvider("app").getImmediate(),n=Lo(t,l1).getImmediate();return{getId:()=>Xk(n),getToken:i=>Jk(n,i)}};function rb(){Ar(new sr(l1,tb,"PUBLIC")),Ar(new sr(eb,nb,"PRIVATE"))}rb();Ln(Hx,Rf);Ln(Hx,Rf,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="analytics",ib="firebase_id",sb="origin",ob=60*1e3,lb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=new Qu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},en=new Da("analytics","Analytics",ab);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(e){if(!e.startsWith(Pf)){const t=en.create("invalid-gtag-resource",{gtagURL:e});return Lt.warn(t.message),""}return e}function a1(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function db(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function ub(e,t){const n=db("firebase-js-sdk-policy",{createScriptURL:cb}),r=document.createElement("script"),i=`${Pf}?l=${e}&id=${t}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function fb(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function hb(e,t,n,r,i,o){const l=r[i];try{if(l)await t[l];else{const d=(await a1(n)).find(u=>u.measurementId===i);d&&await t[d.appId]}}catch(c){Lt.error(c)}e("config",i,o)}async function pb(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const c=await a1(n);for(const d of l){const u=c.find(p=>p.measurementId===d),h=u&&t[u.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(o){Lt.error(o)}}function gb(e,t,n,r){async function i(o,...l){try{if(o==="event"){const[c,d]=l;await pb(e,t,n,c,d)}else if(o==="config"){const[c,d]=l;await hb(e,t,n,r,c,d)}else if(o==="consent"){const[c,d]=l;e("consent",c,d)}else if(o==="get"){const[c,d,u]=l;e("get",c,d,u)}else if(o==="set"){const[c]=l;e("set",c)}else e(o,...l)}catch(c){Lt.error(c)}}return i}function mb(e,t,n,r,i){let o=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=gb(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function yb(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Pf)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=30,vb=1e3;class _b{constructor(t={},n=vb){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const c1=new _b;function Sb(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function wb(e){var l;const{appId:t,apiKey:n}=e,r={method:"GET",headers:Sb(n)},i=lb.replace("{app-id}",t),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let c="";try{const d=await o.json();(l=d.error)!=null&&l.message&&(c=d.error.message)}catch{}throw en.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function jb(e,t=c1,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw en.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw en.create("no-api-key")}const l=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new bb;return setTimeout(async()=>{c.abort()},ob),d1({appId:r,apiKey:i,measurementId:o},l,c,t)}async function d1(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=c1){var c;const{appId:o,measurementId:l}=e;try{await Cb(r,t)}catch(d){if(l)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw d}try{const d=await wb(e);return i.deleteThrottleMetadata(o),d}catch(d){const u=d;if(!kb(u)){if(i.deleteThrottleMetadata(o),l)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw d}const h=Number((c=u==null?void 0:u.customData)==null?void 0:c.httpStatus)===503?np(n,i.intervalMillis,xb):np(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,p),Lt.debug(`Calling attemptFetch again in ${h} millis`),d1(e,p,r,i)}}function Cb(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(en.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function kb(e){if(!(e instanceof xi)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class bb{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function Ib(e,t,n,r,i){if(i&&i.global){e("event",n,r);return}else{const o=await t,l={...r,send_to:o};e("event",n,l)}}async function Eb(e,t,n,r){if(r&&r.global){const i={};for(const o of Object.keys(n))i[`user_properties.${o}`]=n[o];return e("set",i),Promise.resolve()}else{const i=await t;e("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(){if(Sy())try{await wy()}catch(e){return Lt.warn(en.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Lt.warn(en.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Db(e,t,n,r,i,o,l){const c=jb(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Lt.error(f)),t.push(c);const d=Tb().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,d]);yb(o)||ub(o,u.measurementId),i("js",new Date);const p=(l==null?void 0:l.config)??{};return p[sb]="firebase",p.update=!0,h!=null&&(p[ib]=h),i("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.app=t}_delete(){return delete Ji[this.app.options.appId],Promise.resolve()}}let Ji={},Qp=[];const Xp={};let Pc="dataLayer",Rb="gtag",Jp,Ff,qp=!1;function Nb(){const e=[];if(z_()&&e.push("This is a browser extension environment."),M_()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=en.create("invalid-analytics-context",{errorInfo:t});Lt.warn(n.message)}}function Mb(e,t,n){Nb();const r=e.options.appId;if(!r)throw en.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw en.create("no-api-key");if(Ji[r]!=null)throw en.create("already-exists",{id:r});if(!qp){fb(Pc);const{wrappedGtag:o,gtagCore:l}=mb(Ji,Qp,Xp,Pc,Rb);Ff=o,Jp=l,qp=!0}return Ji[r]=Db(e,Qp,Xp,t,Jp,Pc,n),new zb(e)}function Ab(e=Ey()){e=$n(e);const t=Lo(e,ha);return t.isInitialized()?t.getImmediate():Pb(e)}function Pb(e,t={}){const n=Lo(e,ha);if(n.isInitialized()){const i=n.getImmediate();if(wo(t,n.getOptions()))return i;throw en.create("already-initialized")}return n.initialize({options:t})}function Fb(e,t,n){e=$n(e),Eb(Ff,Ji[e.app.options.appId],t,n).catch(r=>Lt.error(r))}function Ob(e,t,n,r){e=$n(e),Ib(Ff,Ji[e.app.options.appId],t,n,r).catch(i=>Lt.error(i))}const Zp="@firebase/analytics",eg="0.10.19";function Lb(){Ar(new sr(ha,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return Mb(r,i,n)},"PUBLIC")),Ar(new sr("analytics-internal",e,"PRIVATE")),Ln(Zp,eg),Ln(Zp,eg,"esm2020");function e(t){try{const n=t.getProvider(ha).getImmediate();return{logEvent:(r,i,o)=>Ob(n,r,i,o),setUserProperties:(r,i)=>Fb(n,r,i)}}catch(n){throw en.create("interop-component-reg-failed",{reason:n})}}}Lb();const Bb={apiKey:"AIzaSyA3yT_4no9dn4v1GIVpUkYeLjQo8jrcSAM",authDomain:"kookminarchiportal.firebaseapp.com",databaseURL:"https://kookminarchiportal-default-rtdb.firebaseio.com",projectId:"kookminarchiportal",storageBucket:"kookminarchiportal.firebasestorage.app",messagingSenderId:"196510835085",appId:"1:196510835085:web:8ccb9df98c9fd849539dc4",measurementId:"G-83HGXX5H9E"},u1=Iy(Bb);Ab(u1);const Gr=mk(u1),Ei={async get(e){try{const t=await Kp(Kr(Gr,e));return t.exists()?t.val():null}catch(t){return console.error(`Firebase get error (${e}):`,t),null}},async set(e,t){try{return await Qd(Kr(Gr,e),t),!0}catch(n){return console.error(`Firebase set error (${e}):`,n),!1}},async update(e,t){try{return await ok(Kr(Gr,e),t),!0}catch(n){return console.error(`Firebase update error (${e}):`,n),!1}},async push(e,t){try{const n=ik(Kr(Gr,e));return await Qd(n,t),n.key}catch(n){return console.error(`Firebase push error (${e}):`,n),null}},async remove(e){try{return await sk(Kr(Gr,e)),!0}catch(t){return console.error(`Firebase remove error (${e}):`,t),!1}},subscribe(e,t){return ak(Kr(Gr,e),r=>{t(r.exists()?r.val():null)},r=>{console.error(`Firebase subscribe error (${e}):`,r)})},async listByPrefix(e){try{const t=await Kp(Kr(Gr,e));if(!t.exists())return[];const n=t.val();return Object.keys(n).map(r=>({name:`${e}/${r}`}))}catch(t){return console.error(`Firebase listByPrefix error (${e}):`,t),[]}}};if(!window.storage){const e="portal",t="__server_migrated_v1__",r=o=>`${e}/${o}`,i=(o,l)=>Promise.race([o,new Promise(c=>setTimeout(()=>c(l),2e3))]);window.storage={async get(o){const l=await i(Ei.get(r(o)),"__timeout__");if(l==="__timeout__"){const c=localStorage.getItem(o);return c?{value:c}:null}return typeof l=="string"?{value:l}:l==null?null:{value:JSON.stringify(l)}},async set(o,l){return await i(Ei.set(r(o),l),!1)||localStorage.setItem(o,l),!0},async list(o){const l=await i(Ei.listByPrefix(e),null);if(Array.isArray(l))return{keys:l.map(({name:u})=>u.replace(`${e}/`,"")).filter(u=>u.startsWith(o)).map(u=>({name:u}))};const c=[];for(let d=0;d<localStorage.length;d+=1){const u=localStorage.key(d);u&&u.startsWith(o)&&c.push({name:u})}return{keys:c}}},(async()=>{if(await Ei.get(r(t)))return;const l=[];for(let c=0;c<localStorage.length;c+=1){const d=localStorage.key(c);if(!d)continue;const u=localStorage.getItem(d);u!==null&&l.push(Ei.set(r(d),u))}await Promise.all(l),await Ei.set(r(t),"1")})().catch(o=>{console.error("Initial migration to server storage failed:",o)})}Fc.createRoot(document.getElementById("root")).render(s.jsx(F1.StrictMode,{children:s.jsx(e_,{})}));
